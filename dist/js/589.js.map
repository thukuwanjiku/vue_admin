{"version":3,"file":"js/589.js","mappings":"86DAuBA,MAAMA,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MAERC,GAAYC,EAAAA,EAAAA,KAAI,GAChBC,GAAOD,EAAAA,EAAAA,IAAI,IACXE,GAAWF,EAAAA,EAAAA,IAAI,IACfG,GAAuBH,EAAAA,EAAAA,IAAI,IAC3BI,GAAoBJ,EAAAA,EAAAA,KAAI,GACxBK,GAAeL,EAAAA,EAAAA,KAAI,GACnBM,GAAgCN,EAAAA,EAAAA,KAAI,GACpCO,GAA2BP,EAAAA,EAAAA,KAAI,GAE/BQ,GAAsBR,EAAAA,EAAAA,IAAI,IAiBhC,SAASS,IACLJ,EAAaK,OAASL,EAAaK,MAEnCC,YAAW,KACPC,EAAE,aAAaC,OAAO,GACvB,IACP,CACA,SAASC,IACLP,EAAyBG,OAASH,EAAyBG,MAE3DC,YAAW,KACPC,EAAE,yBAAyBC,OAAO,GACnC,IACP,CACA,SAASE,IAELhB,EAAUW,OAAQ,EAElBM,EAAAA,EAAIC,KAAKC,EAAAA,GAAUC,sBAAuB,CAACC,MAAO3B,EAAM4B,OAAOD,QAEtDE,MAAKC,IAEFf,EAAoBE,MAAQa,EAASC,KAAKC,MAAQ,QAAU,UAG5D1B,EAAUW,OAAQ,CAAK,IAE1BgB,OAAMC,GAAS5B,EAAUW,OAAQ,GAC9C,CACA,SAASkB,IAEL,GAAG1B,EAASQ,QAAUP,EAAqBO,MACvC,OAAOmB,EAAAA,GAAUC,QAAQ,wCAG7B/B,EAAUW,OAAQ,EAGlB,IAAIqB,EAAU,CACVX,MAAO3B,EAAM4B,OAAOD,MACpBnB,KAAMA,EAAKS,MAAMsB,OACjB9B,SAAUA,EAASQ,MAAMsB,OACzBC,sBAAuB9B,EAAqBO,MAAMsB,QAItDhB,EAAAA,EAAIC,KAAKC,EAAAA,GAAUgB,cAAeH,GACzBT,MAAKC,IAEFX,EAAEuB,MAAMC,OAAO,CAACC,QAASd,EAASC,KAAKa,UAGvCxC,EAAMyC,OAAO,wBAAyBf,EAASC,KAAKJ,OAEpDvB,EAAMyC,OAAO,uBAAwBf,EAASC,KAAKe,MAEnD1C,EAAMyC,OAAO,yBAA0Bf,EAASC,KAAKgB,aAGrDzC,EAAUW,OAAQ,EAGlBb,EAAMyC,OAAO,mBAGb3C,EAAO8C,QAAQ,CAAExC,KAAM,eAGvByC,EAAAA,EAAAA,IAAmB,IAEtBhB,OAAMC,GAAS5B,EAAUW,OAAQ,GAC9C,C,OAjFAiC,EAAAA,EAAAA,KAAU,KAEN5B,GAAe,I,0rDCvCnB,MAAM6B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://myzola-admin/./src/views/access_control/AcceptInvite.vue","webpack://myzola-admin/./src/views/access_control/AcceptInvite.vue?5dbf"],"sourcesContent":["<script setup>\n\nimport {onMounted, ref} from \"vue\";\nimport api from \"@/services/api\";\nimport {apiRoutes} from \"@/services/apiRoutes\";\nimport {startIdleTracking} from \"@/services/idleAppLockTimer\";\nimport {useRoute, useRouter} from \"vue-router\";\nimport {ElMessage} from \"element-plus\";\nimport {useStore} from \"vuex\";\n\n/* --------------------------------\n* PROPS DEFINITION\n* ----------------------------\n* */\ndefineProps({\n    token: String\n})\n\n\n/* --------------------------------\n* Variables\n* ----------------------------\n* */\nconst route = useRoute();\nconst router = useRouter();\nconst store = useStore();\n\nconst isLoading = ref(false);\nconst name = ref(\"\");\nconst password = ref(\"\");\nconst passwordConfirmation = ref(\"\");\nconst isPasswordFocused = ref(false)\nconst showPassword = ref(false)\nconst isPasswordConfirmationFocused = ref(false)\nconst showPasswordConfirmation = ref(false)\n\nconst tokenValidityStatus = ref(\"\");\n\n\n/* --------------------------------\n* Variables\n* ----------------------------\n* */\nonMounted(()=>{\n    //validate token\n    validateToken();\n});\n\n\n/* --------------------------------\n* Methods\n* ----------------------------\n* */\nfunction toggleShowPassword(){\n    showPassword.value = !showPassword.value;\n    //focus the password field\n    setTimeout(()=>{\n        $(\"#password\").focus();\n    }, 100);\n}\nfunction toggleShowConfirmPassword(){\n    showPasswordConfirmation.value = !showPasswordConfirmation.value;\n    //focus the password field\n    setTimeout(()=>{\n        $(\"#passwordConfirmation\").focus();\n    }, 100);\n}\nfunction validateToken(){\n    //show loader\n    isLoading.value = true;\n\n    api.post(apiRoutes.VALIDATE_INVITE_TOKEN, {token: route.params.token})\n            //call method to login user\n            .then(response => {\n                //set validity status\n                tokenValidityStatus.value = response.data.valid ? 'valid' : 'invalid';\n\n                //dismiss load\n                isLoading.value = false;\n            })\n            .catch(error => isLoading.value = false)\n}\nfunction acceptInvite(){\n    //check if passwords match\n    if(password.value !== passwordConfirmation.value)\n        return ElMessage.warning(\"Password confirmation does not match\");\n\n    //show loader\n    isLoading.value = true;\n\n    //prepare request payload\n    let payload = {\n        token: route.params.token,\n        name: name.value.trim(),\n        password: password.value.trim(),\n        password_confirmation: passwordConfirmation.value.trim()\n    }\n\n    //make api call\n    api.post(apiRoutes.ACCEPT_INVITE, payload)\n            .then(response => {\n                //show success message\n                $.growl.notice({message: response.data.message});\n\n                //store access token\n                store.commit('auth/STORE_AUTH_TOKEN', response.data.token);\n                //store user details\n                store.commit('auth/STORE_AUTH_USER', response.data.user)\n                //store user permissions\n                store.commit('auth/STORE_PERMISSIONS', response.data.permissions)\n\n                //dismiss loader\n                isLoading.value = false;\n\n                //set that the app is not locked\n                store.commit('auth/UNLOCK_APP');\n\n                //redirect user to dashboard\n                router.replace({ name: 'dashboard'}); //TODO Implement intended route logic\n\n                //start time for tracking idle time\n                startIdleTracking();\n            })\n            .catch(error => isLoading.value = false)\n}\n\n</script>\n\n<template>\n\n    <main>\n        <div class=\"container\">\n\n            <section class=\"section register min-vh-100 d-flex flex-column align-items-center justify-content-center py-4\">\n                <div class=\"container\">\n                    <div class=\"row justify-content-center\">\n                        <div class=\"col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center\">\n\n                            <div class=\"d-flex justify-content-center py-4\">\n                                <div class=\"logo d-flex align-items-center w-auto\">\n                                    <img src=\"@/assets/images/myzola_icon.png\" alt=\"\">\n                                    <span class=\"d-none d-lg-block\">MyZola Admin</span>\n                                </div>\n                            </div><!-- End Logo -->\n\n                            <div class=\"card mb-3\">\n\n                                <div class=\"card-body\" v-loading=\"isLoading\">\n\n                                    <template v-if=\"tokenValidityStatus == 'valid'\">\n                                        <div class=\"pt-4 pb-2\">\n                                            <h5 class=\"card-title text-center pb-0 fs-4\">Accept Invite</h5>\n                                            <p class=\"text-center small\">Enter your details below to accept invite and create account</p>\n                                        </div>\n                                        <form @submit.prevent=\"acceptInvite\" class=\"row g-3 needs-validation\">\n\n                                            <div class=\"col-12\">\n                                                <div class=\"form-floating\">\n                                                    <input type=\"text\" class=\"form-control\" id=\"name\"\n                                                           placeholder=\"Name\" v-model=\"name\" required>\n                                                    <label for=\"name\">Name</label>\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-12\">\n                                                <div class=\"form-floating\">\n                                                    <input :type=\"showPassword ? 'text' : 'password'\"\n                                                           class=\"form-control\" id=\"password\"\n                                                           placeholder=\"Password\" v-model=\"password\"\n                                                           @focus=\"isPasswordFocused = true\"\n                                                           @blur=\"isPasswordFocused = false\"\n                                                           required>\n                                                    <label for=\"password\">Password</label>\n\n                                                    <i\n                                                            :class=\"showPassword ? 'bi bi-eye-slash-fill' : 'bi bi-eye-fill'\"\n                                                            @click=\"toggleShowPassword\"\n                                                            class=\"toggle-password\" v-if=\"password.length\"\n                                                    ></i>\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-12\">\n                                                <div class=\"form-floating\">\n                                                    <input :type=\"showPasswordConfirmation ? 'text' : 'password'\"\n                                                           class=\"form-control\" id=\"passwordConfirmation\"\n                                                           placeholder=\"Password Confirmation\"\n                                                           v-model=\"passwordConfirmation\"\n                                                           @focus=\"isPasswordConfirmationFocused = true\"\n                                                           @blur=\"isPasswordConfirmationFocused = false\"\n                                                           required>\n                                                    <label for=\"passwordConfirmation\">Password</label>\n\n                                                    <i\n                                                            :class=\"showPasswordConfirmation ? 'bi bi-eye-slash-fill' : 'bi bi-eye-fill'\"\n                                                            @click=\"toggleShowConfirmPassword\"\n                                                            class=\"toggle-password\" v-if=\"passwordConfirmation.length\"\n                                                    ></i>\n                                                </div>\n                                            </div>\n\n\n                                            <div class=\"col-12\">\n                                                <button class=\"btn btn-primary w-100\" type=\"submit\">Accept Invite</button>\n                                            </div>\n                                        </form>\n                                    </template>\n\n                                    <template v-if=\"tokenValidityStatus == 'invalid'\">\n                                        <div class=\"row p-2\">\n\n                                            <div class=\"alert alert-danger bg-danger text-light border-0 alert-dismissible fade show\" role=\"alert\">\n                                                <i class=\"bx bx-error\"></i>\n                                                Token Invalid\n                                            </div>\n\n                                            <div class=\"col-md-12\">\n                                                The invite token is invalid.\n                                            </div>\n\n                                        </div>\n                                    </template>\n\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n\n            </section>\n\n        </div>\n    </main>\n\n</template>\n\n<style scoped>\n.toggle-password {\n    position: absolute;\n    top: 50%;\n    right: 15px;\n    transform: translateY(-50%);\n    cursor: pointer;\n    z-index: 2;\n    color: #b7b7b7;\n    font-size: 20px;\n}\n\n.form-floating input {\n    padding-right: 2.5rem; /* Adjust to make space for the icon */\n}\n</style>","import script from \"./AcceptInvite.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AcceptInvite.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AcceptInvite.vue?vue&type=style&index=0&id=404dc976&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-404dc976\"]])\n\nexport default __exports__"],"names":["route","useRoute","router","useRouter","store","useStore","isLoading","ref","name","password","passwordConfirmation","isPasswordFocused","showPassword","isPasswordConfirmationFocused","showPasswordConfirmation","tokenValidityStatus","toggleShowPassword","value","setTimeout","$","focus","toggleShowConfirmPassword","validateToken","api","post","apiRoutes","VALIDATE_INVITE_TOKEN","token","params","then","response","data","valid","catch","error","acceptInvite","ElMessage","warning","payload","trim","password_confirmation","ACCEPT_INVITE","growl","notice","message","commit","user","permissions","replace","startIdleTracking","onMounted","__exports__"],"sourceRoot":""}