"use strict";(self["webpackChunkmyzola_admin"]=self["webpackChunkmyzola_admin"]||[]).push([[739],{739:function(e,l,a){a.r(l),a.d(l,{default:function(){return Te}});a(4114);var n=a(6768),t=a(5130),o=a(4232),i=a(144),s=a(1387),u=a(4300),r=a(7190),c=a(782),d=a(6133),p=a(22),m=a(5015),v=a(7021),f=a(5459),k=a(1219),L=a(1099);const g={class:"col-sm-12 mb-3 d-inline-flex align-items-center justify-content-between"},b=(0,n.Lk)("h6",{class:"fw-bold mb-0",style:{"margin-left":"20px"}},"Add a new Company",-1),y={class:"row"},C={class:"col-md-6"},h={class:"col-md-10 m-b-20"},E={class:"form-floating"},x=(0,n.Lk)("label",{for:"companyName"},"Company Name",-1),w={class:"col-md-10 m-b-20"},_={class:"form-floating"},R=(0,n.Lk)("label",{for:"companyTagline"},"Tagline",-1),P={key:0,class:"d-flex justify-content-end character_count_indicator"},A={class:"col-md-10 m-b-20"},X={class:"form-floating"},K=(0,n.Lk)("label",{for:"companyContactPerson"},"Contact Person",-1),F={class:"col-md-10 m-b-20"},S=(0,n.Lk)("small",{class:"text-muted"},"Contact Phone",-1),B={class:"col-md-10 m-b-20"},I={class:"form-floating"},N=(0,n.Lk)("label",{for:"companyContactEmail"},"Email",-1),j=(0,n.Lk)("div",{class:"col-md-10 m-b-20"},[(0,n.Lk)("h6",null,"Company's Bio (About)"),(0,n.Lk)("div",{id:"addCompanyAboutEditor",class:"quill-editor-default"})],-1),D={class:"col-md-6"},O={class:"col-md-10 m-b-20"},M={class:"form-floating"},Q=(0,n.Lk)("label",{for:"companyLogo"},"Company Logo (Max 2MB | png, jpg, jpeg, gif)",-1),V={key:0,class:"d-flex flex-wrap m-t-10"},T={class:"p-1 uploaded-image"},U=["src"],q=(0,n.Lk)("i",{class:"ri ri-close-line"},null,-1),z=[q],W={class:"col-md-10 m-b-20"},J={class:"form-floating"},H=(0,n.Lk)("label",{for:"companyBanner"},"Company Banner (Max 2MB | png, jpg, jpeg, gif)",-1),Y={key:0,class:"d-flex flex-wrap m-t-10"},G={class:"p-1 uploaded-image"},Z=["src"],ee=(0,n.Lk)("i",{class:"ri ri-close-line"},null,-1),le=[ee],ae={class:"col-md-10 m-b-20"},ne=(0,n.Lk)("h6",null,"Social Media Handles",-1),te={class:"d-inline-flex align-items-center flex-wrap"},oe={key:0,class:"d-inline-flex"},ie={key:0,class:"ri ri-add-line"},se={class:"col-md-10 m-b-20"},ue=(0,n.Lk)("label",{for:"businessType",class:"mb-2"},"Business Type",-1),re=["value"],ce={class:"col-md-10 m-b-20"},de={key:0},pe=(0,n.Lk)("h6",null,"Please upload the following required documents (Max 2MB per file | pdf, doc, docx)",-1),me=["onChange"],ve=["for"],fe=(0,n.Lk)("hr",null,null,-1),ke={class:"modal-footer"},Le={key:0,class:"btn btn-primary",type:"submit"},ge={key:0,class:"row"},be=(0,n.Lk)("h6",{class:"fw-bold"},[(0,n.Lk)("small",{class:"text-muted"},"Currently added")],-1),ye=(0,n.Lk)("small",{class:"text-muted text-italic"},"Click to remove",-1),Ce={class:"d-inline-flex"},he=["onClick"],Ee=(0,n.Lk)("br",null,null,-1),xe={class:"row"},we={key:0,class:"fw-bold"},_e=(0,n.Lk)("small",{class:"text-muted"},"Add more here",-1),Re=[_e],Pe={class:"p-l-20"},Ae=(0,n.Lk)("p",null,[(0,n.Lk)("small",null,"Select Platform")],-1),Xe={class:"d-inline-flex flex-wrap"},Ke=["onClick"],Fe=["onClick"],Se=(0,n.Lk)("br",null,null,-1),Be=(0,n.Lk)("br",null,null,-1),Ie={key:0,class:"col-md-6"},Ne={class:"input-group mb-3"},je={class:"form-floating"},De={for:"newSocialLink"},Oe={class:"input-group-text",id:"basic-addon2"},Me={key:0},Qe={class:"col-sm-12 d-flex justify-content-end"};var Ve={__name:"Add",setup(e){const l=(0,s.rd)(),a=(0,c.Pj)(),q=(0,i.KR)({name:"",description:"",contact_name:"",contact_phone:"",email:"",about:"",business_type:""}),ee=(0,i.KR)([]),_e=(0,i.KR)({platform:"",link:""});let Ve=(0,i.KR)(null),$e=(0,i.KR)(null),Te=(0,i.KR)(null),Ue=(0,i.KR)(null);const qe=(0,i.KR)(!1),ze=(0,i.KR)(!1);let We=(0,i.KR)(null);const Je=[{label:"Sole Proprietorship",value:"Sole Proprietorship"},{label:"Partnership",value:"Partnership"},{label:"Limited Liability Company (LLC)",value:"Limited Liability Company"}],He=(0,i.KR)([]),Ye=(0,i.KR)({}),Ge=(0,n.EW)((()=>{let e=ee.value.map((e=>e.platform));return v.eX.filter((l=>!e.includes(l)))}));function Ze(e,l){const a=e.target.files[0];if(a.size>2097152)return k.nk.error("File size exceeds 2MB limit. Please upload a smaller file."),void(e.target.value=null);Ye.value[l]=a}function el(e){const l=e.target.files[0];if(l.size>2097152)return k.nk.error("Logo file size exceeds 2MB limit. Please upload a smaller file."),e.target.value=null,void(Ve.value=null);Ve.value=l;const a=new FileReader;a.onload=e=>{$e.value=e.target.result},a.readAsDataURL(l)}function ll(e){const l=e.target.files[0];if(l.size>2097152)return k.nk.error("Banner file size exceeds 2MB limit. Please upload a smaller file."),e.target.value=null,void(Te.value=null);Te.value=l;const a=new FileReader;a.onload=e=>{Ue.value=e.target.result},a.readAsDataURL(l)}function al(){Ve.value=null,$e.value=null,$("#companyLogo").val("")}function nl(){Te.value=null,Ue.value=null,$("#companyBanner").val("")}function tl(e){_e.value.platform=e,_e.value.link="whatsapp"==e?"https://wa.me/":""}function ol(){if("whatsapp"!=_e.value.platform&&(_e.value.link=_e.value.link.replace(/\/+$/,"")),!(0,f.I)(_e.value))return k.nk.warning(`Please enter a valid ${(0,m.A)(_e.value.platform)} url`);ee.value.push({platform:_e.value.platform,link:_e.value.link}),_e.value={platform:"",link:""}}function il(){let e=We.getSemanticHTML();if(!e||!e.toString().length||"<p></p>"==e)return $.growl.warning({message:"Please enter the company's bio"});if(q.value["about"]=e,!q.value.contact_phone||!q.value.contact_phone.toString().length)return $.growl.warning({message:"Please enter contact phone"});let n=new FormData;Object.keys(q.value).forEach((e=>{let l=q.value[e];"contact_phone"==e&&(l=l.toString().replaceAll(" ","")),n.append(e,l)})),Object.keys(Ye.value).forEach((e=>{Ye.value[e]&&n.append(`documents[${e}]`,Ye.value[e])})),n.append("company_logo",Ve.value),n.append("company_banner",Te.value),ee.value.length&&ee.value.forEach(((e,l)=>{n.append(`socials[${l}][platform]`,e.platform),n.append(`socials[${l}][link]`,e.link)})),qe.value=!0,u.A.post(r.pe.ADD_EXPLORE_LISTED_COMPANY,n).then((e=>{$.growl.notice({message:e.data.message});let n=JSON.parse(JSON.stringify(a.state.exploreHub.companies));n.unshift(e.data.data),a.commit("exploreHub/STORE_EXPLORE_LISTED_COMPANIES",n),qe.value=!1,l.back()})).catch((e=>{qe.value=!1}))}return(0,n.sV)((()=>{We=new Quill("#addCompanyAboutEditor",{theme:"snow",placeholder:"Enter company about here"}),We.on("text-change",(()=>{We.getLength()}))})),(0,n.wB)((()=>q.value.business_type),(e=>{Ye.value={},"Sole Proprietorship"===e?He.value=["Business Registration Certificate","KRA PIN Certificate","Owner's National ID","Owner's KRA PIN Certificate","Bank Account Confirmation Letter (in business name)"]:"Partnership"===e?He.value=["Partnership Deed","Certificate of Registration","Company KRA PIN Certificate","Partners Resolution Letter","Owner's National ID","Bank Letter Stating Partnership Bank Details"]:"Limited Liability Company"===e&&(He.value=["Business Registration Certificate","Company KRA PIN Certificate","Owner's National ID","Owner's KRA PIN Certificate","Bank Account Confirmation Letter (in business name)"])})),(e,a)=>{const s=(0,n.g2)("el-button"),u=(0,n.g2)("el-badge"),r=(0,n.g2)("el-dialog"),c=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",g,[b,(0,n.bF)(d.A)]),(0,n.bo)(((0,n.uX)(),(0,n.CE)("form",{onSubmit:(0,t.D$)(il,["prevent"])},[(0,n.Lk)("div",y,[(0,n.Lk)("div",C,[(0,n.Lk)("div",h,[(0,n.Lk)("div",E,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"companyName",placeholder:"Company Name","onUpdate:modelValue":a[0]||(a[0]=e=>q.value.name=e),required:""},null,512),[[t.Jo,q.value.name]]),x])]),(0,n.Lk)("div",w,[(0,n.Lk)("div",_,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"companyTagline",placeholder:"Tagline","onUpdate:modelValue":a[1]||(a[1]=e=>q.value.description=e),maxlength:"100",required:""},null,512),[[t.Jo,q.value.description]]),R,q.value.description.toString().length?((0,n.uX)(),(0,n.CE)("div",P,(0,o.v_)(q.value.description.toString().length)+"/100 ",1)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",A,[(0,n.Lk)("div",X,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"companyContactPerson",placeholder:"Company Person","onUpdate:modelValue":a[2]||(a[2]=e=>q.value.contact_name=e),required:""},null,512),[[t.Jo,q.value.contact_name]]),K])]),(0,n.Lk)("div",F,[S,(0,n.bF)((0,i.R1)(p.E),{modelValue:q.value.contact_phone,"onUpdate:modelValue":a[3]||(a[3]=e=>q.value.contact_phone=e),mode:"international"},null,8,["modelValue"])]),(0,n.Lk)("div",B,[(0,n.Lk)("div",I,[(0,n.bo)((0,n.Lk)("input",{type:"email",class:"form-control",id:"companyContactEmail",placeholder:"Email","onUpdate:modelValue":a[4]||(a[4]=e=>q.value.email=e),required:""},null,512),[[t.Jo,q.value.email]]),N])]),j]),(0,n.Lk)("div",D,[(0,n.Lk)("div",O,[(0,n.Lk)("div",M,[(0,n.Lk)("input",{type:"file",class:"form-control",id:"companyLogo",onChange:el,accept:".png,.jpg,.jpeg,.gif"},null,32),Q]),(0,i.R1)($e)?((0,n.uX)(),(0,n.CE)("div",V,[(0,n.Lk)("div",T,[(0,n.Lk)("img",{src:(0,i.R1)($e),style:{"max-width":"80px","max-height":"60px"}},null,8,U),(0,n.Lk)("div",{class:"remover",onClick:al},z)])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",W,[(0,n.Lk)("div",J,[(0,n.Lk)("input",{type:"file",class:"form-control",id:"companyBanner",onChange:ll,accept:".png,.jpg,.jpeg,.gif"},null,32),H]),(0,i.R1)(Ue)?((0,n.uX)(),(0,n.CE)("div",Y,[(0,n.Lk)("div",G,[(0,n.Lk)("img",{src:(0,i.R1)(Ue),style:{"max-width":"80px","max-height":"60px"}},null,8,Z),(0,n.Lk)("div",{class:"remover",onClick:nl},le)])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ae,[ne,(0,n.Lk)("div",te,[ee.value.length?((0,n.uX)(),(0,n.CE)("div",oe,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ee.value,((e,l)=>((0,n.uX)(),(0,n.Wv)(L.A,(0,n.v6)({key:"form-current-socials-"+l,ref_for:!0},e),null,16)))),128))])):(0,n.Q3)("",!0),(0,n.bF)(s,{onClick:a[5]||(a[5]=e=>ze.value=!ze.value),size:"small",round:""},{default:(0,n.k6)((()=>[ee.value.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("i",ie)),(0,n.eW)((0,o.v_)(ee.value.length?"Click to edit":"Click to add"),1)])),_:1})])]),(0,n.Lk)("div",se,[ue,(0,n.bo)((0,n.Lk)("select",{class:"form-control","onUpdate:modelValue":a[6]||(a[6]=e=>q.value.business_type=e),required:""},[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(Je,(e=>(0,n.Lk)("option",{key:e.value,value:e.value},(0,o.v_)(e.label),9,re))),64))],512),[[t.u1,q.value.business_type]])]),(0,n.Lk)("div",ce,[He.value.length?((0,n.uX)(),(0,n.CE)("div",de,[pe,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(He.value,(e=>((0,n.uX)(),(0,n.CE)("div",{class:"form-floating mb-2",key:e},[(0,n.Lk)("input",{required:"",class:"form-control",type:"file",onChange:l=>Ze(l,e),accept:".pdf,.doc,.docx"},null,40,me),(0,n.Lk)("label",{for:e},(0,o.v_)(e),9,ve)])))),128))])):(0,n.Q3)("",!0)])])]),fe,(0,n.Lk)("div",ke,[(0,i.R1)(v.cE)("explore_hub.companies.add")?((0,n.uX)(),(0,n.CE)("button",Le,"Add Company")):(0,n.Q3)("",!0),(0,n.eW)("   "),(0,n.Lk)("button",{onClick:a[7]||(a[7]=e=>(0,i.R1)(l).back()),class:"btn btn-secondary",type:"button"},"Cancel")])],32)),[[c,qe.value]]),(0,n.bF)(r,{fullscreen:(0,i.R1)(v.Qv),modelValue:ze.value,"onUpdate:modelValue":a[10]||(a[10]=e=>ze.value=e)},{default:(0,n.k6)((()=>[ee.value.length?((0,n.uX)(),(0,n.CE)("div",ge,[be,ye,(0,n.Lk)("div",Ce,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ee.value,((e,l)=>((0,n.uX)(),(0,n.CE)("div",{class:"p-1",onClick:e=>ee.value.splice(l,1),key:"current-socials-"+l},[(0,n.bF)(L.A,{platform:e.platform},null,8,["platform"])],8,he)))),128))])])):(0,n.Q3)("",!0),Ee,(0,n.Lk)("div",xe,[ee.value.length?((0,n.uX)(),(0,n.CE)("h6",we,Re)):(0,n.Q3)("",!0),(0,n.Lk)("div",Pe,[(0,n.Lk)("form",{onSubmit:(0,t.D$)(ol,["prevent"])},[Ae,(0,n.Lk)("div",Xe,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Ge.value,((e,l)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:"to-add-social"+l},[e==_e.value.platform?((0,n.uX)(),(0,n.CE)("div",{key:0,onClick:l=>tl(e)},[(0,n.bF)(u,{value:"✓",class:"item",type:"primary"},{default:(0,n.k6)((()=>[(0,n.bF)(L.A,{platform:e},null,8,["platform"])])),_:2},1024)],8,Ke)):((0,n.uX)(),(0,n.CE)("div",{key:1,onClick:l=>tl(e)},[(0,n.bF)(L.A,{platform:e},null,8,["platform"])],8,Fe))],64)))),128))]),Se,Be,_e.value.platform.length?((0,n.uX)(),(0,n.CE)("div",Ie,[(0,n.Lk)("div",Ne,[(0,n.Lk)("div",je,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"newSocialLink",placeholder:"Tagline","onUpdate:modelValue":a[8]||(a[8]=e=>_e.value.link=e),required:""},null,512),[[t.Jo,_e.value.link]]),(0,n.Lk)("label",De,["whatsapp"==_e.value.platform?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.eW)(" Enter Whatsapp number ")],64)):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)(" Enter "+(0,o.v_)((0,i.R1)(m.A)(_e.value.platform))+" Link here ",1)],64))])]),(0,n.Lk)("span",Oe,[(0,n.bF)(s,{"native-type":"submit",link:""},{default:(0,n.k6)((()=>[(0,n.eW)("Add")])),_:1})])]),"whatsapp"==_e.value.platform?((0,n.uX)(),(0,n.CE)("small",Me,"Please enter the whatsapp number in international format (+254712345678)")):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",Qe,[(0,n.bF)(s,{type:"primary",onClick:a[9]||(a[9]=e=>ze.value=!ze.value)},{default:(0,n.k6)((()=>[(0,n.eW)("Close")])),_:1})])])])),_:1},8,["fullscreen","modelValue"])],64)}}};const $e=Ve;var Te=$e}}]);
//# sourceMappingURL=739.js.map