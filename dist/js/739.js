"use strict";(self["webpackChunkmyzola_admin"]=self["webpackChunkmyzola_admin"]||[]).push([[739],{5459:function(l,e,a){function n(l){const e=/^(https?:\/\/)?((\w{2,3}\.)?facebook.com\/[A-Za-z0-9_.-]+)$/;return e.test(l)}function t(l){const e=/^(https?:\/\/)?((\w{2,3}\.)?instagram.com\/[A-Za-z0-9_.-]+)$/;return e.test(l)}function o(l){const e=/^(https?:\/\/)?((\w{2,3}\.)?x.com\/[A-Za-z0-9_]+)$/;return e.test(l)}function s(l){const e=/^(https?:\/\/)?((\w{2,3}\.)?linkedin.com\/in\/[A-Za-z0-9_-]+)$/;return e.test(l)}function i(l){const e=/^(https?:\/\/)?((\w{2,3}\.)?([A-Za-z0-9_-]+\.)+[A-Za-z]{2,})(:[0-9]{1,5})?(\/.*)?$/;return e.test(l)}function u(l){const e=/^(https?:\/\/)?((\w{2,3}\.)?wa.me\/\+?[0-9]+)$/;return e.test(l)}function c(l){const e=/^(https?:\/\/)?((\w{2,3}\.)?youtube.com\/(user|channel)\/[A-Za-z0-9_-]+|youtu.be\/[A-Za-z0-9_-]+)$/;return e.test(l)}function r(l){switch(l.platform){case"facebook":return n(l.link);case"instagram":return t(l.link);case"x":return o(l.link);case"linkedin":return s(l.link);case"whatsapp":return u(l.link);case"website":return i(l.link);case"youtube":return c(l.link);default:return!1}}a.d(e,{I:function(){return r}})},739:function(l,e,a){a.r(e),a.d(e,{default:function(){return Al}});a(4114);var n=a(6768),t=a(5130),o=a(144),s=a(4232),i=a(1387),u=a(4300),c=a(7190),r=a(782),d=a(6133),m=a(22),p=a(1452),k=a(5015),v=a(7021),f=a(5459),b=a(1219);const L={class:"col-sm-12 mb-3 d-inline-flex align-items-center justify-content-between"},y=(0,n.Lk)("h6",{class:"fw-bold mb-0",style:{"margin-left":"20px"}},"Add a new Company",-1),g={class:"row"},h={class:"col-md-6"},C={class:"col-md-10 m-b-20"},w={class:"form-floating"},E=(0,n.Lk)("label",{for:"companyName"},"Company Name",-1),_={class:"col-md-10 m-b-20"},x={class:"form-floating"},A=(0,n.Lk)("label",{for:"companyTagline"},"Tagline",-1),R={class:"col-md-10 m-b-20"},X={class:"form-floating"},F=(0,n.Lk)("label",{for:"companyContactPerson"},"Contact Person",-1),S={class:"col-md-10 m-b-20"},P=(0,n.Lk)("small",{class:"text-muted"},"Contact Phone",-1),K={class:"col-md-10 m-b-20"},V={class:"form-floating"},z=(0,n.Lk)("label",{for:"companyContactEmail"},"Email",-1),W=(0,n.Lk)("div",{class:"col-md-10 m-b-20"},[(0,n.Lk)("h6",null,"Company's Bio (About)"),(0,n.Lk)("div",{id:"addCompanyAboutEditor",class:"quill-editor-default"})],-1),N={class:"col-md-6"},Q={class:"col-md-10 m-b-20"},T={class:"form-floating"},D=(0,n.Lk)("label",{for:"companyLogo"},"Company Logo",-1),I={key:0,class:"d-flex flex-wrap m-t-10"},O={class:"p-1 uploaded-image"},U=["src"],Z=(0,n.Lk)("i",{class:"ri ri-close-line"},null,-1),J=[Z],j={class:"col-md-10 m-b-20"},q=(0,n.Lk)("h6",null,"Social Media Handles",-1),H={class:"d-inline-flex align-items-center flex-wrap"},M={key:0,class:"d-inline-flex"},B={key:0,class:"ri ri-add-line"},Y=(0,n.Lk)("hr",null,null,-1),G={class:"modal-footer"},ll=(0,n.Lk)("button",{class:"btn btn-primary",type:"submit"},"Add Company",-1),el={key:0,class:"row"},al=(0,n.Lk)("h6",{class:"fw-bold"},[(0,n.Lk)("small",{class:"text-muted"},"Currently added")],-1),nl=(0,n.Lk)("small",{class:"text-muted text-italic"},"Click to remove",-1),tl={class:"d-inline-flex"},ol=["onClick"],sl=(0,n.Lk)("br",null,null,-1),il={class:"row"},ul={key:0,class:"fw-bold"},cl=(0,n.Lk)("small",{class:"text-muted"},"Add more here",-1),rl=[cl],dl={class:"p-l-20"},ml=(0,n.Lk)("small",null,"Select Platform",-1),pl=(0,n.Lk)("br",null,null,-1),kl={class:"d-inline-flex flex-wrap"},vl=["onClick"],fl=(0,n.Lk)("br",null,null,-1),bl=(0,n.Lk)("br",null,null,-1),Ll={key:0,class:"col-md-6"},yl={class:"input-group mb-3"},gl={class:"form-floating"},hl={for:"newSocialLink"},Cl={class:"input-group-text",id:"basic-addon2"},wl={key:0},El={class:"col-sm-12 d-flex justify-content-end"};var _l={__name:"Add",setup(l){const e=(0,i.rd)(),a=(0,r.Pj)(),Z=(0,o.KR)({name:"",description:"",contact_name:"",contact_phone:"",email:"",about:""}),cl=(0,o.KR)([]),_l=(0,o.KR)({platform:"",link:""});let xl=(0,o.KR)(null),Al=(0,o.KR)(null);const Rl=(0,o.KR)(!1),Xl=(0,o.KR)(!1);let Fl=(0,o.KR)(null);const $l=(0,n.EW)((()=>{let l=cl.value.map((l=>l.platform));return v.eX.filter((e=>!l.includes(e)))}));function Sl(l){xl.value=l.target.files[0];const e=l.target.files[0],a=new FileReader;a.onload=l=>{Al.value=l.target.result},a.readAsDataURL(e)}function Pl(){xl.value=null,Al.value=null,$("#companyLogo").val("")}function Kl(l){_l.value.platform=l,_l.value.link="whatsapp"==l?"https://wa.me/":""}function Vl(){if("whatsapp"!=_l.value.platform&&(_l.value.link=_l.value.link.replace(/\/+$/,"")),!(0,f.I)(_l.value))return b.nk.warning(`Please enter a valid ${(0,k.A)(_l.value.platform)} url`);cl.value.push({platform:_l.value.platform,link:_l.value.link}),_l.value={platform:"",link:""}}function zl(){let l=Fl.getSemanticHTML();if(!l||!l.toString().length||"<p></p>"==l)return $.growl.warning({message:"Please enter the company's bio"});if(Z.value["about"]=l,!Z.value.contact_phone||!Z.value.contact_phone.toString().length)return $.growl.warning({message:"Please enter contact phone"});let n=new FormData;Object.keys(Z.value).forEach((l=>{let e=Z.value[l];"contact_phone"==l&&(e=e.toString().replaceAll(" ","")),n.append(l,e)})),n.append("company_logo",xl.value),cl.value.length&&cl.value.forEach(((l,e)=>{n.append(`socials[${e}][platform]`,l.platform),n.append(`socials[${e}][link]`,l.link)})),Rl.value=!0,u.A.post(c.pe.ADD_EXPLORE_LISTED_COMPANY,n).then((l=>{$.growl.notice({message:l.data.message});let n=JSON.parse(JSON.stringify(a.state.exploreHub.companies));n.unshift(l.data.data),a.commit("exploreHub/STORE_EXPLORE_LISTED_COMPANIES",n),Rl.value=!1,e.back()})).catch((l=>Rl.value=!1))}return(0,n.sV)((()=>{Fl=new Quill("#addCompanyAboutEditor",{theme:"snow",placeholder:"Enter company about here"})})),(l,a)=>{const i=(0,n.g2)("el-button"),u=(0,n.g2)("el-badge"),c=(0,n.g2)("el-dialog"),r=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",L,[y,(0,n.bF)(d.A)]),(0,n.bo)(((0,n.uX)(),(0,n.CE)("form",{onSubmit:(0,t.D$)(zl,["prevent"])},[(0,n.Lk)("div",g,[(0,n.Lk)("div",h,[(0,n.Lk)("div",C,[(0,n.Lk)("div",w,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"companyName",placeholder:"Company Name","onUpdate:modelValue":a[0]||(a[0]=l=>Z.value.name=l),required:""},null,512),[[t.Jo,Z.value.name]]),E])]),(0,n.Lk)("div",_,[(0,n.Lk)("div",x,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"companyTagline",placeholder:"Tagline","onUpdate:modelValue":a[1]||(a[1]=l=>Z.value.description=l),required:""},null,512),[[t.Jo,Z.value.description]]),A])]),(0,n.Lk)("div",R,[(0,n.Lk)("div",X,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"companyContactPerson",placeholder:"Company Person","onUpdate:modelValue":a[2]||(a[2]=l=>Z.value.contact_name=l),required:""},null,512),[[t.Jo,Z.value.contact_name]]),F])]),(0,n.Lk)("div",S,[P,(0,n.bF)((0,o.R1)(m.E),{modelValue:Z.value.contact_phone,"onUpdate:modelValue":a[3]||(a[3]=l=>Z.value.contact_phone=l),mode:"international"},null,8,["modelValue"])]),(0,n.Lk)("div",K,[(0,n.Lk)("div",V,[(0,n.bo)((0,n.Lk)("input",{type:"email",class:"form-control",id:"companyContactEmail",placeholder:"Email","onUpdate:modelValue":a[4]||(a[4]=l=>Z.value.email=l),required:""},null,512),[[t.Jo,Z.value.email]]),z])]),W]),(0,n.Lk)("div",N,[(0,n.Lk)("div",Q,[(0,n.Lk)("div",T,[(0,n.Lk)("input",{type:"file",class:"form-control",id:"companyLogo",onChange:Sl,accept:".png,.jpg,.jpeg,.gif"},null,32),D]),(0,o.R1)(Al)?((0,n.uX)(),(0,n.CE)("div",I,[(0,n.Lk)("div",O,[(0,n.Lk)("img",{src:(0,o.R1)(Al),style:{"max-width":"80px","max-height":"60px"}},null,8,U),(0,n.Lk)("div",{class:"remover",onClick:Pl},J)])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",j,[q,(0,n.Lk)("div",H,[cl.value.length?((0,n.uX)(),(0,n.CE)("div",M,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(cl.value,((l,e)=>((0,n.uX)(),(0,n.CE)("div",{class:"p-1",key:"form-current-socials-"+e},[(0,n.bF)((0,o.R1)(p.p),{type:l.platform,link:{src:l.link}},null,8,["type","link"])])))),128))])):(0,n.Q3)("",!0),(0,n.bF)(i,{onClick:a[5]||(a[5]=l=>Xl.value=!Xl.value),size:"small",round:""},{default:(0,n.k6)((()=>[cl.value.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("i",B)),(0,n.eW)((0,s.v_)(cl.value.length?"Click to edit":"Click to add"),1)])),_:1})])])])]),Y,(0,n.Lk)("div",G,[ll,(0,n.eW)("   "),(0,n.Lk)("button",{onClick:a[6]||(a[6]=l=>(0,o.R1)(e).back()),class:"btn btn-secondary",type:"button"},"Cancel")])],32)),[[r,Rl.value]]),(0,n.bF)(c,{fullscreen:(0,o.R1)(v.Qv),modelValue:Xl.value,"onUpdate:modelValue":a[9]||(a[9]=l=>Xl.value=l)},{default:(0,n.k6)((()=>[cl.value.length?((0,n.uX)(),(0,n.CE)("div",el,[al,nl,(0,n.Lk)("div",tl,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(cl.value,((l,e)=>((0,n.uX)(),(0,n.CE)("div",{class:"p-1",onClick:l=>cl.value.splice(e,1),key:"current-socials-"+e},[(0,n.bF)((0,o.R1)(p.p),{type:l.platform,link:{src:"#"}},null,8,["type"])],8,ol)))),128))])])):(0,n.Q3)("",!0),sl,(0,n.Lk)("div",il,[cl.value.length?((0,n.uX)(),(0,n.CE)("h6",ul,rl)):(0,n.Q3)("",!0),(0,n.Lk)("div",dl,[(0,n.Lk)("form",{onSubmit:(0,t.D$)(Vl,["prevent"])},[ml,pl,(0,n.Lk)("div",kl,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)($l.value,((l,e)=>((0,n.uX)(),(0,n.CE)("div",{class:"p-1",onClick:e=>Kl(l),key:"to-add-social"+e},[_l.value.platform==l?((0,n.uX)(),(0,n.Wv)(u,{key:0,value:"✓",class:"item",type:"primary"},{default:(0,n.k6)((()=>[(0,n.bF)((0,o.R1)(p.p),{type:l,link:{src:"#"}},null,8,["type"])])),_:2},1024)):((0,n.uX)(),(0,n.Wv)((0,o.R1)(p.p),{key:1,type:l,link:{src:"#"}},null,8,["type"]))],8,vl)))),128))]),fl,bl,_l.value.platform.length?((0,n.uX)(),(0,n.CE)("div",Ll,[(0,n.Lk)("div",yl,[(0,n.Lk)("div",gl,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"newSocialLink",placeholder:"Tagline","onUpdate:modelValue":a[7]||(a[7]=l=>_l.value.link=l),required:""},null,512),[[t.Jo,_l.value.link]]),(0,n.Lk)("label",hl,["whatsapp"==_l.value.platform?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.eW)(" Enter Whatsapp number ")],64)):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)(" Enter "+(0,s.v_)((0,o.R1)(k.A)(_l.value.platform))+" Link here ",1)],64))])]),(0,n.Lk)("span",Cl,[(0,n.bF)(i,{"native-type":"submit",link:""},{default:(0,n.k6)((()=>[(0,n.eW)("Add")])),_:1})])]),"whatsapp"==_l.value.platform?((0,n.uX)(),(0,n.CE)("small",wl,"Please enter the whatsapp number in international format (+254712345678)")):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",El,[(0,n.bF)(i,{type:"primary",onClick:a[8]||(a[8]=l=>Xl.value=!Xl.value)},{default:(0,n.k6)((()=>[(0,n.eW)("Close")])),_:1})])])])),_:1},8,["fullscreen","modelValue"])],64)}}};const xl=_l;var Al=xl}}]);
//# sourceMappingURL=739.js.map