"use strict";(self["webpackChunkmyzola_admin"]=self["webpackChunkmyzola_admin"]||[]).push([[40],{7676:function(e,l,u){u.d(l,{A:function(){return r}});var a=u(6768);const n={class:"f-w-600"},s=(0,a.Lk)("br",null,null,-1);function i(e,l){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("small",n,[(0,a.RG)(e.$slots,"default")]),s],64)}var o=u(1241);const t={},d=(0,o.A)(t,[["render",i]]);var r=d},8040:function(e,l,u){u.r(l),u.d(l,{default:function(){return M}});var a=u(6768),n=u(144),s=u(4232),i=u(7021),o=u(5015),t=u(782),d=u(7676),r=u(1219),c=u(4300),f=u(7190);const m=e=>((0,a.Qi)("data-v-7e547e2c"),e=e(),(0,a.jt)(),e),v={class:"pagetitle"},p=m((()=>(0,a.Lk)("h1",null,"Role Permissions",-1))),k={class:"breadcrumb"},b={class:"breadcrumb-item"},h=m((()=>(0,a.Lk)("li",{class:"breadcrumb-item"},"Access Control",-1))),x=m((()=>(0,a.Lk)("li",{class:"breadcrumb-item active"},"Role Permissions",-1))),g={class:"card"},E={class:"card-body"},A=m((()=>(0,a.Lk)("br",null,null,-1))),_={key:0,class:"row p-2"},L={class:"row p-b-10"},C={class:"col-md-6 col-sm-12"},R={class:"d-flex align-items-center flex-wrap"},y={key:0,class:"row"},I={class:"m-0 text-center"},w={class:"row m-t-10"},X=m((()=>(0,a.Lk)("i",{class:"bx bx-shield-quarter"},null,-1))),F={class:"col-md-12"},S={class:"d-flex align-items-center"},O={class:"fw-bold m-0"},z=["onClick"],U=m((()=>(0,a.Lk)("small",null,"Check all",-1))),j=[U],K={key:0,class:"d-flex align-items-center"},V={class:"fw-bold m-0"},N=["onClick"],Z=m((()=>(0,a.Lk)("small",null,"Check all",-1))),P=[Z],W={class:"p-1 row m-l-10"},T={class:"col-md-12 d-flex justify-content-end"};var G={__name:"Permissions",setup(e){const l=(0,t.Pj)(),u=(0,n.KR)(!1),m=(0,n.KR)(null),U=(0,n.KR)({}),Z=(0,n.KR)([]),G=(0,n.KR)([]),Q=(0,a.EW)((()=>l.state.auth.roles));function D(){let e=Q.value.find((e=>e.id==m.value));if(!e)return r.nk.warning("An error occurred, please reload the page and try again");U.value=JSON.parse(JSON.stringify(e)),M()}function M(){let e={role_id:U.value.id};u.value=!0,c.A.post(f.pe.GET_ROLE_PERMISSIONS,e).then((e=>{Z.value=e.data.permissions,m.value=null,u.value=!1})).catch((e=>u.value=!1))}function H(){let e=Z.value.filter((e=>!G.length||G.value.includes(e.module))).flatMap((e=>e.submodules.flatMap((e=>e.actions.map((e=>({name:e.name,has_permission:e.has_permission}))))))),l={role_id:U.value.id,permissions:e};u.value=!0,c.A.post(f.pe.SAVE_ROLE_PERMISSIONS,l).then((e=>{$.growl.notice({message:e.data.message}),window.location.reload(),u.value=!1})).catch((e=>u.value=!1))}return(0,a.sV)((()=>{Q.value.length||(0,i.kN)()})),(e,l)=>{const t=(0,a.g2)("router-link"),r=(0,a.g2)("el-option"),c=(0,a.g2)("el-select"),f=(0,a.g2)("el-button"),M=(0,a.g2)("el-divider"),J=(0,a.g2)("el-checkbox"),$=(0,a.g2)("el-checkbox-group"),Y=(0,a.gN)("loading");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",v,[p,(0,a.Lk)("nav",null,[(0,a.Lk)("ol",k,[(0,a.Lk)("li",b,[(0,a.bF)(t,{to:{name:"dashboard"}},{default:(0,a.k6)((()=>[(0,a.eW)("Home")])),_:1})]),h,x])])]),(0,a.Lk)("div",g,[(0,a.Lk)("div",E,[A,(0,n.R1)(i.cE)("permissions.list")?(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",_,[(0,a.Lk)("div",L,[(0,a.Lk)("div",C,[(0,a.bF)(d.A,null,{default:(0,a.k6)((()=>[(0,a.eW)("Select a role to manage permissions")])),_:1}),(0,a.Lk)("div",R,[(0,a.bF)(c,{style:{width:"250px"},modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=e=>m.value=e),placeholder:"Click to select",size:"large",filterable:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Q.value.filter((e=>"super_admin"!=e.name)),(e=>((0,a.uX)(),(0,a.Wv)(r,{key:"roles-permission-picker-"+e.id,label:(0,n.R1)(o.A)(e.name),value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,a.bF)(f,{disabled:!m.value,type:"primary",id:"btn-get-permissions",onClick:D},{default:(0,a.k6)((()=>[(0,a.eW)("Get Permissions")])),_:1},8,["disabled"])])])]),Z.value.length?((0,a.uX)(),(0,a.CE)("div",y,[(0,a.bF)(M),(0,a.Lk)("h4",I,"Permissions for "+(0,s.v_)((0,n.R1)(o.A)(U.value.name)),1),(0,a.Lk)("div",w,[(0,a.bF)($,{class:"d-flex flex-wrap justify-content-center align-items-center",modelValue:G.value,"onUpdate:modelValue":l[1]||(l[1]=e=>G.value=e)},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Z.value,(e=>((0,a.uX)(),(0,a.Wv)(J,{key:"modules-checker-"+e.module,label:(0,n.R1)(o.A)(e.module),value:e.module,border:""},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,a.bF)(M,null,{default:(0,a.k6)((()=>[X])),_:1}),(0,a.Lk)("div",F,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Z.value.filter((e=>!G.value.length||G.value.includes(e.module))),((e,l)=>((0,a.uX)(),(0,a.CE)("div",{class:"col-md-12 p-2 permission_module m-t-10",key:"permissions-module-"+e.module},[l>0?((0,a.uX)(),(0,a.Wv)(M,{key:0})):(0,a.Q3)("",!0),(0,a.Lk)("div",S,[(0,a.Lk)("h5",O,(0,s.v_)((0,n.R1)(o.A)(e.module)),1),1==e.submodules.length&&e.submodules.some((e=>e.actions.some((e=>!e.has_permission))))?((0,a.uX)(),(0,a.CE)("div",{key:0,onClick:l=>e.submodules.forEach((e=>e.actions.forEach((e=>e.has_permission=!0)))),class:"m-l-10 check_all d-flex align-items-center"},j,8,z)):(0,a.Q3)("",!0)]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.submodules,((l,u)=>((0,a.uX)(),(0,a.CE)("div",{class:"col-md-12 p-1 m-l-15 m-t-10",key:e.module+"-submodule-"+u},[l.submodule.length?((0,a.uX)(),(0,a.CE)("div",K,[(0,a.Lk)("h6",V,(0,s.v_)((0,n.R1)(o.A)(l.submodule)),1),l.actions.length>1&&l.actions.some((e=>!e.has_permission))?((0,a.uX)(),(0,a.CE)("div",{key:0,onClick:e=>l.actions.forEach((e=>e.has_permission=!0)),class:"m-l-10 check_all d-flex align-items-center"},P,8,N)):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.Lk)("div",W,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.actions,(e=>((0,a.uX)(),(0,a.CE)("div",{class:"col-md-2 col-sm-6",key:"module-permission-"+e.action},[(0,a.bF)(J,{modelValue:e.has_permission,"onUpdate:modelValue":l=>e.has_permission=l,label:(0,n.R1)(o.A)(e.action),disabled:!(0,n.R1)(i.cE)(e.has_permission?"permissions.revoke":"permissions.grant"),size:"large"},null,8,["modelValue","onUpdate:modelValue","label","disabled"])])))),128))])])))),128))])))),128))]),(0,a.bF)(M),(0,a.Lk)("div",T,[(0,a.bF)(f,{size:"large",type:"primary",onClick:H},{default:(0,a.k6)((()=>[(0,a.eW)("Save Permissions")])),_:1})])])):(0,a.Q3)("",!0)])),[[Y,u.value]]):(0,a.Q3)("",!0)])])],64)}}},Q=u(1241);const D=(0,Q.A)(G,[["__scopeId","data-v-7e547e2c"]]);var M=D},5015:function(e,l,u){function a(e,l,u,a){var n=-1,s=null==e?0:e.length;a&&s&&(u=e[++n]);while(++n<s)u=l(u,e[n],n,e);return u}u.d(l,{A:function(){return rl}});var n=a;function s(e){return function(l){return null==e?void 0:e[l]}}var i=s,o={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},t=i(o),d=t,r=u(49),c=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,f="\\u0300-\\u036f",m="\\ufe20-\\ufe2f",v="\\u20d0-\\u20ff",p=f+m+v,k="["+p+"]",b=RegExp(k,"g");function h(e){return e=(0,r.A)(e),e&&e.replace(c,d).replace(b,"")}var x=h,g=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function E(e){return e.match(g)||[]}var A=E,_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function L(e){return _.test(e)}var C=L,R="\\ud800-\\udfff",y="\\u0300-\\u036f",I="\\ufe20-\\ufe2f",w="\\u20d0-\\u20ff",X=y+I+w,F="\\u2700-\\u27bf",S="a-z\\xdf-\\xf6\\xf8-\\xff",O="\\xac\\xb1\\xd7\\xf7",z="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",U="\\u2000-\\u206f",j=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",K="A-Z\\xc0-\\xd6\\xd8-\\xde",V="\\ufe0e\\ufe0f",N=O+z+U+j,Z="['’]",P="["+N+"]",W="["+X+"]",T="\\d+",G="["+F+"]",Q="["+S+"]",D="[^"+R+N+T+F+S+K+"]",M="\\ud83c[\\udffb-\\udfff]",H="(?:"+W+"|"+M+")",J="[^"+R+"]",$="(?:\\ud83c[\\udde6-\\uddff]){2}",Y="[\\ud800-\\udbff][\\udc00-\\udfff]",q="["+K+"]",B="\\u200d",ee="(?:"+Q+"|"+D+")",le="(?:"+q+"|"+D+")",ue="(?:"+Z+"(?:d|ll|m|re|s|t|ve))?",ae="(?:"+Z+"(?:D|LL|M|RE|S|T|VE))?",ne=H+"?",se="["+V+"]?",ie="(?:"+B+"(?:"+[J,$,Y].join("|")+")"+se+ne+")*",oe="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",te="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",de=se+ne+ie,re="(?:"+[G,$,Y].join("|")+")"+de,ce=RegExp([q+"?"+Q+"+"+ue+"(?="+[P,q,"$"].join("|")+")",le+"+"+ae+"(?="+[P,q+ee,"$"].join("|")+")",q+"?"+ee+"+"+ue,q+"+"+ae,te,oe,T,re].join("|"),"g");function fe(e){return e.match(ce)||[]}var me=fe;function ve(e,l,u){return e=(0,r.A)(e),l=u?void 0:l,void 0===l?C(e)?me(e):A(e):e.match(l)||[]}var pe=ve,ke="['’]",be=RegExp(ke,"g");function he(e){return function(l){return n(pe(x(l).replace(be,"")),e,"")}}var xe=he,ge=u(6497);function Ee(e,l,u){var a=e.length;return u=void 0===u?a:u,!l&&u>=a?e:(0,ge.A)(e,l,u)}var Ae=Ee,_e="\\ud800-\\udfff",Le="\\u0300-\\u036f",Ce="\\ufe20-\\ufe2f",Re="\\u20d0-\\u20ff",ye=Le+Ce+Re,Ie="\\ufe0e\\ufe0f",we="\\u200d",Xe=RegExp("["+we+_e+ye+Ie+"]");function Fe(e){return Xe.test(e)}var Se=Fe;function Oe(e){return e.split("")}var ze=Oe,Ue="\\ud800-\\udfff",je="\\u0300-\\u036f",Ke="\\ufe20-\\ufe2f",Ve="\\u20d0-\\u20ff",Ne=je+Ke+Ve,Ze="\\ufe0e\\ufe0f",Pe="["+Ue+"]",We="["+Ne+"]",Te="\\ud83c[\\udffb-\\udfff]",Ge="(?:"+We+"|"+Te+")",Qe="[^"+Ue+"]",De="(?:\\ud83c[\\udde6-\\uddff]){2}",Me="[\\ud800-\\udbff][\\udc00-\\udfff]",He="\\u200d",Je=Ge+"?",$e="["+Ze+"]?",Ye="(?:"+He+"(?:"+[Qe,De,Me].join("|")+")"+$e+Je+")*",qe=$e+Je+Ye,Be="(?:"+[Qe+We+"?",We,De,Me,Pe].join("|")+")",el=RegExp(Te+"(?="+Te+")|"+Be+qe,"g");function ll(e){return e.match(el)||[]}var ul=ll;function al(e){return Se(e)?ul(e):ze(e)}var nl=al;function sl(e){return function(l){l=(0,r.A)(l);var u=Se(l)?nl(l):void 0,a=u?u[0]:l.charAt(0),n=u?Ae(u,1).join(""):l.slice(1);return a[e]()+n}}var il=sl,ol=il("toUpperCase"),tl=ol,dl=xe((function(e,l,u){return e+(u?" ":"")+tl(l)})),rl=dl}}]);
//# sourceMappingURL=40.js.map