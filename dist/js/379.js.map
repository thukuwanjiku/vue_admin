{"version":3,"file":"js/379.js","mappings":"+xCAeA,MAAMA,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MAERC,GAAWC,EAAAA,EAAAA,IAAI,IACfC,GAAYD,EAAAA,EAAAA,KAAI,GAChBE,GAAoBF,EAAAA,EAAAA,KAAI,GACxBG,GAAeH,EAAAA,EAAAA,KAAI,GAOnBI,GAAWC,EAAAA,EAAAA,KAAS,IAAKR,EAAMS,MAAMC,KAAKC,OAC1CC,GAAgBJ,EAAAA,EAAAA,KAAS,IACxBD,EACQP,EAAMS,MAAMC,KAAKC,KAAKE,KAAKC,WAAWC,MAAM,KAAK,GAErD,KAELC,GAAmBR,EAAAA,EAAAA,KAAS,IAC1BD,GACGU,EAAAA,EAAAA,IAAgBV,EAASW,MAAML,MADjB,KASzB,SAASM,IACLb,EAAaY,OAASZ,EAAaY,MAEnCE,YAAW,KACPC,EAAE,aAAaC,OAAO,GACvB,IACP,CACA,SAASC,IAELnB,EAAUc,OAAQ,EAElBM,EAAAA,EAAIC,IAAIC,EAAAA,GAAUC,oBAETC,MAAKC,GACKC,MAEVC,OAAMC,GAAS5B,EAAUc,OAAQ,GAC9C,CACA,SAASY,IAGL,IAAIG,EAAU,CACVC,MAAO3B,EAASW,MAAMgB,MAAMC,OAC5BjC,SAAUA,EAASgB,MAAMiB,OACzBC,UAAU,GAIdZ,EAAAA,EAAIa,KAAKX,EAAAA,GAAUY,MAAOL,GACjBL,MAAKC,IAEF7B,EAAMuC,OAAO,wBAAyBV,EAASW,KAAKC,OAGpDzC,EAAMuC,OAAO,uBAAwBV,EAASW,KAAK7B,MAGnDP,EAAUc,OAAQ,EAGlBlB,EAAMuC,OAAO,mBAGbzC,EAAO4C,QAGPC,EAAAA,EAAAA,IAAmB,IAEtBZ,OAAMC,GAAS5B,EAAUc,OAAQ,GAC9C,CAEA,SAAS0B,IAEL5C,EAAMuC,OAAO,eAEbzC,EAAO+C,QAAQ,CAAChC,KAAM,WAEtBiC,EAAAA,EAAAA,IACJ,C,2tCCjGA,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://myzola-admin/./src/views/auth/AppLocked.vue","webpack://myzola-admin/./src/views/auth/AppLocked.vue?df49"],"sourcesContent":["<script setup>\r\n\r\n//imports\r\nimport {computed, ref} from 'vue';\r\nimport api from \"@/services/api\";\r\nimport {apiRoutes} from \"@/services/apiRoutes\";\r\nimport {useRouter} from \"vue-router\";\r\nimport {useStore} from \"vuex\";\r\nimport {startIdleTracking, stopIdleTracking} from \"@/services/idleAppLockTimer\";\r\nimport {getNameInitials} from \"@/services/Helpers\";\r\n\r\n/* ---------------------------------\r\n * All variables definitions\r\n * --------------------------------\r\n * */\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\nconst password = ref(\"\");\r\nconst isLoading = ref(false)\r\nconst isPasswordFocused = ref(false)\r\nconst showPassword = ref(false)\r\n\r\n\r\n/* ---------------------------------\r\n * Computed properties\r\n * --------------------------------\r\n * */\r\nconst authUser = computed(()=> store.state.auth.user);\r\nconst userFirstName = computed(()=> {\r\n    if(authUser){\r\n        return store.state.auth.user.name.toString().split(\" \")[0];\r\n    }\r\n    return \"\";\r\n})\r\nconst userNameInitials = computed(()=> {\r\n    if(!authUser) return \"\";\r\n    return getNameInitials(authUser.value.name);\r\n})\r\n\r\n\r\n/* -----------------------------\r\n * Methods definitions\r\n * -----------------------------\r\n * */\r\nfunction toggleShowPassword(){\r\n    showPassword.value = !showPassword.value;\r\n    //focus the password field\r\n    setTimeout(()=>{\r\n        $(\"#password\").focus();\r\n    }, 100);\r\n}\r\nfunction getSanctumCSRFToken(){\r\n    //show loader\r\n    isLoading.value = true;\r\n\r\n    api.get(apiRoutes.SANCTUM_CSRF_TOKEN)\r\n            //call method to login user\r\n            .then(response => {\r\n                return login();\r\n            })\r\n            .catch(error => isLoading.value = false)\r\n}\r\nfunction login(){\r\n\r\n    //prepare request payload\r\n    let payload = {\r\n        email: authUser.value.email.trim(),\r\n        password: password.value.trim(),\r\n        app_lock: true\r\n    }\r\n\r\n    //make api call\r\n    api.post(apiRoutes.LOGIN, payload)\r\n            .then(response => {\r\n                //store access token\r\n                store.commit('auth/STORE_AUTH_TOKEN', response.data.token);\r\n\r\n                //store user details\r\n                store.commit('auth/STORE_AUTH_USER', response.data.user)\r\n\r\n                //dismiss loader\r\n                isLoading.value = false;\r\n\r\n                //set that the app is not locked\r\n                store.commit(\"auth/UNLOCK_APP\");\r\n\r\n                //redirect user back to the page they were on before app lock\r\n                router.back();\r\n\r\n                //start time for tracking idle time\r\n                startIdleTracking();\r\n            })\r\n            .catch(error => isLoading.value = false)\r\n}\r\n\r\nfunction goToLogin(){\r\n    //clear token & user details from store & local storage\r\n    store.commit('auth/LOGOUT');\r\n    //redirect user to login page\r\n    router.replace({name: 'login'});\r\n    //stop idle time tracker\r\n    stopIdleTracking();\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n\r\n    <main>\r\n        <div class=\"container\">\r\n\r\n            <section class=\"section register min-vh-100 d-flex flex-column align-items-center justify-content-center py-4\">\r\n                <div class=\"container\">\r\n                    <div class=\"row justify-content-center\">\r\n                        <div class=\"col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center\">\r\n\r\n                            <div class=\"d-flex justify-content-center py-4\">\r\n                                <div class=\"logo d-flex align-items-center w-auto\">\r\n                                    <img src=\"@/assets/images/myzola_icon.png\" alt=\"\">\r\n                                    <span class=\"d-none d-lg-block\">MyZola Admin</span>\r\n                                </div>\r\n                            </div><!-- End Logo -->\r\n\r\n                            <div class=\"card mb-3\">\r\n\r\n                                <div class=\"card-body\" v-loading=\"isLoading\">\r\n\r\n                                    <div class=\"pt-4 pb-2\">\r\n                                        <div class=\"col-sm-12 d-flex justify-content-center\">\r\n                                            <div :class=\"{'user_initials':true, 'single_letter': userNameInitials.length == 1}\">{{ userNameInitials }}</div>\r\n                                        </div>\r\n\r\n                                        <h5 class=\"card-title text-center pb-0\">Hello, {{ userFirstName }}</h5>\r\n                                        <p class=\"text-center small\">{{ authUser.email }}</p>\r\n                                    </div>\r\n\r\n                                    <form @submit.prevent=\"getSanctumCSRFToken\" class=\"row g-3 needs-validation\">\r\n                                        <div class=\"col-12\">\r\n                                            <div class=\"form-floating\">\r\n                                                <input :type=\"showPassword ? 'text' : 'password'\"\r\n                                                       class=\"form-control\" id=\"password\"\r\n                                                       placeholder=\"Password\" v-model=\"password\"\r\n                                                       @focus=\"isPasswordFocused = true\"\r\n                                                       @blur=\"isPasswordFocused = false\"\r\n                                                       required>\r\n                                                <label for=\"password\">Password</label>\r\n\r\n                                                <i\r\n                                                        :class=\"showPassword ? 'bi bi-eye-slash-fill' : 'bi bi-eye-fill'\"\r\n                                                        @click=\"toggleShowPassword\"\r\n                                                        class=\"toggle-password\" v-if=\"password.length\"\r\n                                                ></i>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div class=\"col-12\">\r\n                                            <button class=\"btn btn-primary w-100\" type=\"submit\">\r\n                                                Login\r\n                                            </button>\r\n                                        </div>\r\n                                        <div class=\"col-12\">\r\n                                            <p class=\"small mb-0\">Having problems? <a href=\"#\" @click=\"goToLogin\">Switch Account</a></p>\r\n                                        </div>\r\n                                    </form>\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </section>\r\n\r\n        </div>\r\n    </main>\r\n    <!-- End #main -->\r\n\r\n</template>\r\n\r\n<style scoped>\r\n.toggle-password {\r\n    position: absolute;\r\n    top: 50%;\r\n    right: 15px;\r\n    transform: translateY(-50%);\r\n    cursor: pointer;\r\n    z-index: 2;\r\n    color: #b7b7b7;\r\n    font-size: 20px;\r\n}\r\n\r\n.form-floating input {\r\n    padding-right: 2.5rem; /* Adjust to make space for the icon */\r\n}\r\n\r\n.user_initials{\r\n    padding: 20px;\r\n    background: #c9bcef;\r\n    border-radius: 50%;\r\n    font-size: 25px;\r\n    font-weight: 600 !important;\r\n}\r\n.user_initials.single_letter{\r\n    padding: 20px 30px;\r\n}\r\n</style>","import script from \"./AppLocked.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AppLocked.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AppLocked.vue?vue&type=style&index=0&id=ca4415d4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ca4415d4\"]])\n\nexport default __exports__"],"names":["router","useRouter","store","useStore","password","ref","isLoading","isPasswordFocused","showPassword","authUser","computed","state","auth","user","userFirstName","name","toString","split","userNameInitials","getNameInitials","value","toggleShowPassword","setTimeout","$","focus","getSanctumCSRFToken","api","get","apiRoutes","SANCTUM_CSRF_TOKEN","then","response","login","catch","error","payload","email","trim","app_lock","post","LOGIN","commit","data","token","back","startIdleTracking","goToLogin","replace","stopIdleTracking","__exports__"],"sourceRoot":""}