"use strict";(self["webpackChunkmyzola_admin"]=self["webpackChunkmyzola_admin"]||[]).push([[58],{2151:function(e,t,a){a.d(t,{A:function(){return F}});var n=a(6768),s=a(4232),i=(a(4114),{props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},showDisabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator:e=>-1!==["small","default","large"].indexOf(e)},align:{type:String,default:"left",validator:e=>-1!==["left","center","right"].indexOf(e)}},data:function(){return{totalPerPage:this.isApiResource?this.data.meta.per_page:Number(this.data.per_page)}},computed:{isApiResource:function(){return!!this.data.meta},currentPage:function(){return this.isApiResource?this.data.meta.current_page:this.data.current_page},firstPageUrl:function(){return this.isApiResource?this.data.links.first:null},from:function(){return this.isApiResource?this.data.meta.from:this.data.from},lastPage:function(){return this.isApiResource?this.data.meta.last_page:this.data.last_page},lastPageUrl:function(){return this.isApiResource?this.data.links.last:null},nextPageUrl:function(){return this.isApiResource?this.data.links.next:this.data.next_page_url},perPage:function(){return this.isApiResource?this.data.meta.per_page:Number(this.data.per_page)},prevPageUrl:function(){return this.isApiResource?this.data.links.prev:this.data.prev_page_url},to:function(){return this.isApiResource?this.data.meta.to:this.data.to},total:function(){return this.isApiResource?this.data.meta.total:this.data.total},pageRange:function(){if(-1===this.limit)return 0;if(0===this.limit)return this.lastPage;let e,t=this.currentPage,a=this.lastPage,n=this.limit,s=t-n,i=t+n+1,r=[],o=[];for(let l=1;l<=a;l++)(1===l||l===a||l>=s&&l<i)&&r.push(l);return r.forEach((function(t){e&&(t-e===2?o.push(e+1):t-e!==1&&o.push("...")),o.push(t),e=t})),o},perPageOptions:()=>Array.from(Array(9).keys()).map((e=>5+5*e)),pages:function(){return Array.from(Array(this.lastPage).keys()).map((e=>e+1))}},watch:{perPage:function(){this.totalPerPage=this.perPage}},emits:["pagination-change-page"],methods:{previousPage:function(){this.selectPage(this.currentPage-1,this.perPage)},nextPage:function(){this.currentPage>=this.lastPage||this.selectPage(this.currentPage+1,this.perPage)},loadMore:function(){this.selectPage(this.currentPage,this.totalPerPage+=10)},selectPage:function(e,t){"..."!==e&&this.$emit("pagination-change-page",{page:e,perPage:t})}},render:function(){return this.$slots.default({data:this.data,limit:this.limit,showDisabled:this.showDisabled,size:this.size,align:this.align,computed:{isApiResource:this.isApiResource,currentPage:this.currentPage,firstPageUrl:this.firstPageUrl,from:this.from,lastPage:this.lastPage,lastPageUrl:this.lastPageUrl,nextPageUrl:this.nextPageUrl,perPage:this.perPage,prevPageUrl:this.prevPageUrl,to:this.to,total:this.total,pageRange:this.pageRange,perPageOptions:this.perPageOptions,pages:this.pages},prevButtonEvents:{click:e=>{e.preventDefault(),this.previousPage()}},nextButtonEvents:{click:e=>{e.preventDefault(),this.nextPage()}},loadMoreEvents:{click:e=>{e.preventDefault(),this.loadMore()}},pageButtonEvents:e=>({click:t=>{t.preventDefault(),this.selectPage(e,this.perPage)}}),pageSelectEvents:()=>({change:e=>{e.preventDefault(),this.selectPage(e.target.value,this.perPage)}}),onPerPageEvents:()=>({change:e=>{e.preventDefault(),this.selectPage(1,e.target.value)}})})}});const r=i;var o=r;const l={class:"py-3"},c={class:"d-none d-md-flex align-items-center justify-content-between"},u={class:"d-flex align-items-center"},d={class:"pe-4 me-4 d-flex align-items-center border-end"},g=(0,n.Lk)("p",{class:"my-0 me-2 fw-medium text-dark w-100"},"Items Per Page",-1),p=["value"],m=["value"],h={class:"m-0 fw-medium text-dark"},f={class:"d-flex align-items-center"},v={class:"pe-4 border-end"},k={class:"m-0 fw-medium text-dark"},L={class:"me-n3 d-flex align-items-center"},P=(0,n.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 16 16",fill:"inherit","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},[(0,n.Lk)("g",{id:"pagination-chevron-left"},[(0,n.Lk)("path",{d:"M9.3335 12.5L5.3335 8.5L9.3335 4.5L10.2668 5.43333L7.20016 8.5L10.2668 11.5667L9.3335 12.5Z"})])],-1),_=[P],b=["value"],y=(0,n.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 16 16",fill:"inherit","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,n.Lk)("g",{id:"pagination-chevron-right"},[(0,n.Lk)("path",{d:"M6.26683 12.5L5.3335 11.5667L8.40016 8.5L5.3335 5.43333L6.26683 4.5L10.2668 8.5L6.26683 12.5Z"})])],-1),E=[y],w={class:"d-flex d-md-none align-items-center justify-content-center"},x={key:1,class:"m-0 fs-5 fw-medium text-uppercase text-secondary"},C={class:"d-flex d-md-none align-items-center justify-content-center"},A=(0,n.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 16 16",fill:"inherit","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},[(0,n.Lk)("g",{id:"pagination-chevron-left"},[(0,n.Lk)("path",{d:"M9.3335 12.5L5.3335 8.5L9.3335 4.5L10.2668 5.43333L7.20016 8.5L10.2668 11.5667L9.3335 12.5Z"})])],-1),R=[A],T={class:"m-0 fw-medium text-uppercase text-dark"},S=(0,n.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 16 16",fill:"inherit","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},[(0,n.Lk)("g",{id:"pagination-chevron-right"},[(0,n.Lk)("path",{d:"M6.26683 12.5L5.3335 11.5667L8.40016 8.5L5.3335 5.43333L6.26683 4.5L10.2668 8.5L6.26683 12.5Z"})])],-1),O=[S];var U={__name:"PaginationComponent",props:{pagination:{type:Object,required:!0},showLoadMore:{type:Boolean,default:!0}},setup(e){const t=e;return(e,a)=>((0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(o,{data:t.pagination,onPaginationChangePage:a[0]||(a[0]=t=>e.$emit("pagination-change-page",t))},{default:(0,n.k6)((({computed:e,onPerPageEvents:t,nextButtonEvents:a,prevButtonEvents:i,pageSelectEvents:r})=>[(0,n.Lk)("div",c,[(0,n.Lk)("div",u,[(0,n.Lk)("div",d,[g,(0,n.Lk)("select",(0,n.v6)({name:"pagination",id:"pagination",class:"text-primary fw-medium border-0 bg-transparent form-select",value:e.perPage},(0,n.Tb)(t(),!0),{style:{width:"max-content"}}),[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.perPageOptions,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,s.v_)(e),9,m)))),128))],16,p)]),(0,n.Lk)("p",h," Showing "+(0,s.v_)(e.from?e.from:0)+" - "+(0,s.v_)(e.to?e.to:0)+" of "+(0,s.v_)(e.total),1)]),(0,n.Lk)("div",f,[(0,n.Lk)("div",v,[(0,n.Lk)("p",k,"Page "+(0,s.v_)(e.currentPage)+" of "+(0,s.v_)(e.lastPage),1)]),(0,n.Lk)("div",L,[(0,n.Lk)("a",(0,n.v6)({class:[["border-0",{"opacity-50":e.currentPage<=1}],"btn"],role:"button",href:"#"},(0,n.Tb)(i,!0)),_,16),(0,n.Lk)("select",(0,n.v6)({name:"pagination",class:"text-primary fw-medium border-0 bg-transparent form-select"},(0,n.Tb)(r(),!0),{value:e.currentPage}),[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.pages,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e},(0,s.v_)(e),1)))),128))],16,b),(0,n.Lk)("a",(0,n.v6)({role:"button",class:[["border-0 pe-0",{"opacity-50":!e.nextPageUrl}],"btn"],href:"#"},(0,n.Tb)(a,!0)),E,16)])])])])),_:1},8,["data"]),t.showLoadMore?((0,n.uX)(),(0,n.Wv)(o,{key:0,data:t.pagination,onPaginationChangePage:a[1]||(a[1]=t=>e.$emit("pagination-change-page",t))},{default:(0,n.k6)((({computed:e,loadMoreEvents:t})=>[(0,n.Lk)("div",w,[e.nextPageUrl?((0,n.uX)(),(0,n.CE)("a",(0,n.v6)({key:0,class:"m-0 text-decoration-none fs-5 fw-medium text-primary text-uppercase"},(0,n.Tb)(t,!0))," Load more ",16)):((0,n.uX)(),(0,n.CE)("p",x," Load more "))])])),_:1},8,["data"])):((0,n.uX)(),(0,n.Wv)(o,{key:1,data:t.pagination,onPaginationChangePage:a[2]||(a[2]=t=>e.$emit("pagination-change-page",t))},{default:(0,n.k6)((({computed:e,onPerPageEvents:t,nextButtonEvents:a,prevButtonEvents:i})=>[(0,n.Lk)("div",C,[(0,n.Lk)("a",(0,n.v6)({class:[{"opacity-50":e.currentPage<=1},"btn p-0"],role:"button",href:"#"},(0,n.Tb)(i,!0)),R,16),(0,n.Lk)("a",T," Page "+(0,s.v_)(e.currentPage)+" of "+(0,s.v_)(e.lastPage),1),(0,n.Lk)("a",(0,n.v6)({class:[{"opacity-50":!e.nextPageUrl},"btn p-0"],role:"button",href:"#"},(0,n.Tb)(a,!0)),O,16)])])),_:1},8,["data"]))]))}};const M=U;var F=M},1058:function(e,t,a){a.r(t),a.d(t,{default:function(){return Q}});a(4114);var n=a(6768),s=a(144),i=a(4232),r=a(7021),o=a(2151),l=a(6246),c=a(4300),u=a(7190),d=a(7477),g=a(2933),p=a(1219),m=a(1387);const h=e=>((0,n.Qi)("data-v-9db6580e"),e=e(),(0,n.jt)(),e),f={class:"pagetitle"},v=h((()=>(0,n.Lk)("h1",null,"Customers",-1))),k={class:"breadcrumb"},L={class:"breadcrumb-item"},P=h((()=>(0,n.Lk)("li",{class:"breadcrumb-item"},"Customers",-1))),_=h((()=>(0,n.Lk)("li",{class:"breadcrumb-item"},"List",-1))),b={class:"card"},y={class:"card-body"},E={class:"row"},w={class:"col-12"},x={class:"d-flex my-3"},C={class:"row"},A={class:"col-12"},R={class:"table-responsive m-t-10"},T={class:"table table-hover"},S=h((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Reference"),(0,n.Lk)("th",null,"Name"),(0,n.Lk)("th",null,"Status"),(0,n.Lk)("th",null,"No. Of Accounts"),(0,n.Lk)("th",null,"Registered On"),(0,n.Lk)("th",null,"Account Activated On"),(0,n.Lk)("th",null,"Last Login Time"),(0,n.Lk)("th",null,"Actions")])],-1))),O=["onClick"],U={class:"d-flex align-items-center"},M=["src","alt"],F={class:"mb-2"},B={class:"mb-0"},X={class:"mb-0"},D={key:0,class:"text-danger d-flex align-items-center"},I=h((()=>(0,n.Lk)("i",{class:"bi bi-circle big-dot m-r-8",style:{background:"red"}},null,-1))),N=h((()=>(0,n.Lk)("p",{class:"mb-0"},"De-Activated",-1))),W=[I,N],j={key:1,class:"text-success d-flex align-items-center"},V=h((()=>(0,n.Lk)("i",{class:"bi bi-circle big-dot m-r-8",style:{background:"green"}},null,-1))),z=h((()=>(0,n.Lk)("p",{class:"mb-0"},"Active",-1))),H=[V,z];var G={__name:"Main",setup(e){const t=(0,s.KR)({customer:""}),a=(0,m.rd)();let h=(0,n.EW)({get:()=>l.A.state.customers.customers,set:e=>l.A.commit("customers/STORE_CUSTOMERS",e)}),I=(0,n.EW)({get:()=>l.A.state.customers.isFetchingCustomers,set:e=>l.A.commit("customers/SET_IS_FETCHING_CUSTOMERS",e)});(0,n.sV)((()=>{N({})}));const N=({page:e=1,perPage:t=20})=>{l.A.commit("customers/SET_IS_FETCHING_CUSTOMERS",!0);let a={page:e,perPage:t};c.A.post(u.pe.FETCH_CUSTOMERS,a).then((e=>{l.A.commit("customers/STORE_CUSTOMERS",e.data),l.A.commit("customers/SET_IS_FETCHING_CUSTOMERS",!1)})).catch((e=>{l.A.commit("customers/SET_IS_FETCHING_CUSTOMERS",!1)}))};function V(e){switch(e.action){case"view":return z(e.customer);case"deactivate":return G(e.customer);case"restore":return Z(e.customer)}}function z(e){return l.A.commit("customers/STORE_VIEWED_CUSTOMER",JSON.parse(JSON.stringify(e))),a.push({name:"customers.view",params:{listingTitleSlug:e.formatted_name.toString().replaceAll(" ","-")}})}function G(e){g.s.prompt("Sure you want to deactivate this customer's account?\nPlease give a reason why you want to deactivate their account","Confirm Deactivation",{confirmButtonText:"Deactivate",cancelButtonText:"Cancel",inputPlaceholder:"Type here why you want to deactivate",inputValidator:e=>!(!e||!e.length)||"Please give a reason"}).then((({value:t})=>{let a={reference:e.reference,reason:t};K(a)})).catch((()=>{(0,p.nk)({type:"error",message:"Oops! Something went wrong. Try again."})}))}function K(e){I.value=!0,c.A.post(u.pe.DEACTIVATE_CUSTOMER_ACCOUNT,e).then((e=>{N({}),$.growl.notice({message:e.data})})).catch((e=>I.value=!1))}function Z(e){g.s.confirm("Sure you want to restore this customer's account?","Confirm Restore",{confirmButtonText:"Restore",cancelButtonText:"Cancel"}).then((()=>{I.value=!0;let t={reference:e.reference};c.A.post(u.pe.REACTIVATE_CUSTOMER_ACCOUNT,t).then((e=>{N({}),$.growl.notice({message:e.data})})).catch((e=>I.value=!1))})).catch((()=>{}))}return(e,a)=>{const l=(0,n.g2)("router-link"),c=(0,n.g2)("el-input"),u=(0,n.g2)("el-icon"),g=(0,n.g2)("el-button"),p=(0,n.g2)("el-dropdown-item"),m=(0,n.g2)("el-dropdown-menu"),$=(0,n.g2)("el-dropdown"),G=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",f,[v,(0,n.Lk)("nav",null,[(0,n.Lk)("ol",k,[(0,n.Lk)("li",L,[(0,n.bF)(l,{to:{name:"dashboard"}},{default:(0,n.k6)((()=>[(0,n.eW)("Dashboard")])),_:1})]),P,_])])]),(0,n.Lk)("div",b,[(0,n.Lk)("div",y,[(0,n.Lk)("div",E,[(0,n.Lk)("div",w,[(0,n.Lk)("div",x,[(0,n.bF)(c,{modelValue:t.value.customer,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.customer=e),style:{width:"240px"},placeholder:"Type to search",clearable:""},null,8,["modelValue"])])])]),(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",C,[(0,n.Lk)("div",A,[(0,n.Lk)("div",R,[(0,n.Lk)("table",T,[S,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,s.R1)(h).data,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:"customer"+t,class:(0,i.C4)({"table-info":e.selected}),style:{cursor:"pointer"}},[(0,n.Lk)("td",{onClick:t=>z(e),class:"fw-bold"},(0,i.v_)(e.reference),9,O),(0,n.Lk)("td",null,[(0,n.Lk)("div",U,[(0,n.Lk)("img",{class:"table-img me-2",src:e.user.profile_photo_url,alt:e.formatted_name+"'s logo"},null,8,M),(0,n.Lk)("div",null,[(0,n.Lk)("p",F,(0,i.v_)(e.formatted_name),1),(0,n.Lk)("p",B,(0,i.v_)(e.user.email),1),(0,n.Lk)("p",X,(0,i.v_)(e.user.phone_number),1)])])]),(0,n.Lk)("td",null,[e.user.deleted_at?((0,n.uX)(),(0,n.CE)("div",D,W)):((0,n.uX)(),(0,n.CE)("div",j,H))]),(0,n.Lk)("td",null,(0,i.v_)(e.number_of_accounts),1),(0,n.Lk)("td",null,(0,i.v_)((0,s.R1)(r.Lu)(e.user.created_at)),1),(0,n.Lk)("td",null,(0,i.v_)(e.user.verified_at?(0,s.R1)(r.Lu)(e.user.verified_at):"Not Activated"),1),(0,n.Lk)("td",null,(0,i.v_)((0,s.R1)(r.Lu)(e.user.last_login_at)),1),(0,n.Lk)("td",null,[(0,n.bF)($,{trigger:"click",onCommand:V},{dropdown:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(p,{command:{action:"view",customer:e}},{default:(0,n.k6)((()=>[(0,n.eW)("View")])),_:2},1032,["command"]),e.user.deleted_at?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(p,{key:0,command:{action:"deactivate",customer:e},class:"text-danger"},{default:(0,n.k6)((()=>[(0,n.eW)("Deactivate Account")])),_:2},1032,["command"])),e.user.deleted_at?((0,n.uX)(),(0,n.Wv)(p,{key:1,command:{action:"restore",customer:e},class:"text-warning"},{default:(0,n.k6)((()=>[(0,n.eW)("Restore Account")])),_:2},1032,["command"])):(0,n.Q3)("",!0)])),_:2},1024)])),default:(0,n.k6)((()=>[(0,n.bF)(g,{plain:"",type:"primary",size:"small"},{default:(0,n.k6)((()=>[(0,n.eW)(" Actions"),(0,n.bF)(u,{class:"el-icon--right"},{default:(0,n.k6)((()=>[(0,n.bF)((0,s.R1)(d.yd$))])),_:1})])),_:1})])),_:2},1024)])],2)))),128))])]),(0,n.bF)((0,s.R1)(o.A),{pagination:(0,s.R1)(h),onPaginationChangePage:N},null,8,["pagination"])])])])),[[G,(0,s.R1)(I)]])])])])}}},K=a(1241);const Z=(0,K.A)(G,[["__scopeId","data-v-9db6580e"]]);var Q=Z}}]);
//# sourceMappingURL=58.js.map