"use strict";(self["webpackChunkmyzola_admin"]=self["webpackChunkmyzola_admin"]||[]).push([[324],{7021:function(e,t,n){n.d(t,{DU:function(){return p},HC:function(){return d},Qv:function(){return c},RL:function(){return A},XM:function(){return m},cE:function(){return v},eX:function(){return i},fv:function(){return I},hU:function(){return _},k1:function(){return s},kN:function(){return E},ob:function(){return S},yM:function(){return f}});var u=n(4373),a=n(254),l=n(4300),o=n(7190);const r="https://raw.githubusercontent.com/google/material-design-icons/master/font/MaterialIcons-Regular.codepoints",i=["instagram","facebook","whatsapp","linkedin","youtube","twitter"],c=window.innerWidth<=768;function s(){a.A.commit("exploreHub/SET_IS_FETCHING_COMPANIES",!0),l.A.get(o.pe.GET_EXPLORE_LISTED_COMPANIES).then((e=>{a.A.commit("exploreHub/STORE_EXPLORE_LISTED_COMPANIES",e.data.data),a.A.commit("exploreHub/SET_IS_FETCHING_COMPANIES",!1)})).catch((e=>a.A.commit("exploreHub/SET_IS_FETCHING_COMPANIES",!1)))}function d(){a.A.commit("exploreHub/SET_IS_FETCHING_CATEGORIES",!0),l.A.get(o.pe.EXPLORE_HUB_FETCH_LISTING_CATEGORIES).then((e=>{a.A.commit("exploreHub/STORE_EXPLORE_LISTING_CATEGORIES",e.data.data),a.A.commit("exploreHub/SET_IS_FETCHING_CATEGORIES",!1)})).catch((e=>a.A.commit("exploreHub/SET_IS_FETCHING_CATEGORIES",!1)))}function f(){a.A.commit("investmentHub/SET_IS_FETCHING_COMPANIES",!0),l.A.get(o.pe.GET_INVESTMENT_HUB_LISTED_COMPANIES).then((e=>{a.A.commit("investmentHub/STORE_LISTED_COMPANIES",e.data.data),a.A.commit("investmentHub/SET_IS_FETCHING_COMPANIES",!1)})).catch((e=>a.A.commit("investmentHub/SET_IS_FETCHING_COMPANIES",!1)))}function m(){a.A.commit("investmentHub/SET_IS_FETCHING_CATEGORIES",!0),l.A.get(o.pe.INVESTMENT_HUB_FETCH_LISTING_CATEGORIES).then((e=>{a.A.commit("investmentHub/STORE_LISTING_CATEGORIES",e.data.data),a.A.commit("investmentHub/SET_IS_FETCHING_CATEGORIES",!1)})).catch((e=>a.A.commit("investmentHub/SET_IS_FETCHING_CATEGORIES",!1)))}function E(){a.A.commit("auth/SET_IS_FETCHING_ROLES",!0),l.A.get(o.pe.LIST_ROLES).then((e=>{a.A.commit("auth/STORE_ROLES",e.data),a.A.commit("auth/SET_IS_FETCHING_ROLES",!1)})).catch((e=>a.A.commit("auth/SET_IS_FETCHING_ROLES",!1)))}function _(){a.A.commit("auth/SET_IS_FETCHING_USERS",!0),l.A.get(o.pe.LIST_USERS).then((e=>{a.A.commit("auth/STORE_USERS",e.data),a.A.commit("auth/SET_IS_FETCHING_USERS",!1)})).catch((e=>a.A.commit("auth/SET_IS_FETCHING_USERS",!1)))}function v(e){return a.A.getters["auth/isSuperAdmin"]||a.A.state.auth.permissions.includes(e)}function S(){u.A.get(r).then((e=>{const t=e.data,n=t.split("\n"),u=n.map((e=>{const t=e.split(" ");return t[0]}));a.A.commit("shared/STORE_MATERIAL_ICONS_NAMES",u)}))}function p(e=12){let t="",n="A0zBCDy1EFx2GHx3wIJvKL4uMNtOs5PrQR6qSTpU7oVWnXm8YZab9cdefghijkl";for(let u=0;u<e;u++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function A(e,t="",n=null){let u=parseInt(n)||0,a=(new Intl.NumberFormat).format(parseFloat(e).toFixed(u));return(t?t+" ":"")+a}function I(e,t=2){const n=e.trim().split(/\s+/),u=n.map((e=>e[0].toUpperCase()));return u.slice(0,t).join("")}},8324:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});n(4114);var u=n(6768),a=n(144),l=n(4232),o=n(5130),r=n(4300),i=n(7190),c=n(782),s=n(1387),d=n(1219),f=n(2933),m=n(7477),E=n(7021),_=n(5015);const v={class:"pagetitle"},S=(0,u.Lk)("h1",null,"User Roles",-1),p={class:"breadcrumb"},A={class:"breadcrumb-item"},I=(0,u.Lk)("li",{class:"breadcrumb-item"},"Access Control",-1),h=(0,u.Lk)("li",{class:"breadcrumb-item active"},"Roles",-1),T={class:"card"},b={class:"card-body"},k=(0,u.Lk)("br",null,null,-1),R={class:"row p-2"},C={class:"col-sm-12 d-flex m-b-10"},g=(0,u.Lk)("br",null,null,-1),L={key:1,class:"table-responsive"},x={class:"table table-hover"},N=(0,u.Lk)("thead",null,[(0,u.Lk)("tr",null,[(0,u.Lk)("th",null,"Role"),(0,u.Lk)("th",null,"Users Added"),(0,u.Lk)("th",null,"Permissions Assigned"),(0,u.Lk)("th",null,"Actions")])],-1),O={key:0},H={key:1},F=(0,u.Lk)("td",{colspan:"4",class:"text-center p-3"},"No data",-1),y=[F],G={class:"p-3"},w={class:"m-t-10"},U=(0,u.Lk)("h6",null,[(0,u.Lk)("small",{class:"fw-bold"},"New Roles to save")],-1),X={class:"d-flex flex-wrap"},M={class:"m-t-10 d-flex justify-content-end"},D={class:"p-3"},W={class:"m-t-10"};var z={__name:"ManageRoles",setup(e){const t=(0,c.Pj)(),n=((0,s.rd)(),(0,a.KR)(!1)),F=(0,a.KR)(!1),z=(0,a.KR)(""),P=(0,a.KR)([]),j=(0,a.KR)(!1),K=(0,a.KR)({}),V=(0,u.EW)((()=>t.state.auth.roles)),Q=(0,u.EW)({get:()=>t.state.auth.isFetchingRoles,set:e=>t.commit("auth/SET_IS_FETCHING_ROLES",e)});function Z(e){switch(e.action){case"edit":return Y(e.role);case"delete":return ee(e.role)}}function J(){return P.value.find((e=>e==z.value))||V.value.find((e=>(0,_.A)(e.name)==z.value))?d.nk.warning(`${z.value} is already added`):(P.value.push(JSON.parse(JSON.stringify(z.value))),void(z.value=""))}function B(){n.value=!0,r.A.post(i.pe.ADD_NEW_ROLES,{roles:P.value.map((e=>e.toString().replaceAll(" ","_")))}).then((e=>{(0,E.kN)(),$.growl.notice({message:e.data.message}),F.value=!1,P.value=[],n.value=!1})).catch((e=>n.value=!1))}function Y(e){K.value=JSON.parse(JSON.stringify(e)),K.value.name=(0,_.A)(K.value.name),K.value.new_name=(0,_.A)(K.value.name),j.value=!0}function q(){n.value=!0,r.A.post(i.pe.EDIT_ROLE,{id:K.value.id,name:K.value.new_name.toString().replaceAll(" ","_")}).then((e=>{(0,E.kN)(),$.growl.notice({message:e.data.message}),j.value=!1,n.value=!1})).catch((e=>n.value=!1))}function ee(e){f.s.confirm("Sure you want to delete this role?","Confirm Delete",{confirmButtonText:"Delete",cancelButtonText:"Cancel"}).then((()=>{te(e)})).catch((()=>{}))}function te(e){Q.value=!0,r.A.post(i.pe.DELETE_ROLES,{ids:[e.id]}).then((e=>{(0,E.kN)(),$.growl.notice({message:e.data.message}),Q.value=!1})).catch((e=>Q.value=!1))}return(0,u.sV)((()=>{(0,E.cE)("roles.list")&&!V.value.length&&(0,E.kN)()})),(e,t)=>{const r=(0,u.g2)("router-link"),i=(0,u.g2)("el-button"),c=(0,u.g2)("el-icon"),s=(0,u.g2)("el-dropdown-item"),d=(0,u.g2)("el-dropdown-menu"),f=(0,u.g2)("el-dropdown"),$=(0,u.g2)("el-divider"),Y=(0,u.g2)("el-tag"),ee=(0,u.g2)("el-dialog"),te=(0,u.gN)("loading");return(0,u.uX)(),(0,u.CE)(u.FK,null,[(0,u.Lk)("div",v,[S,(0,u.Lk)("nav",null,[(0,u.Lk)("ol",p,[(0,u.Lk)("li",A,[(0,u.bF)(r,{to:{name:"dashboard"}},{default:(0,u.k6)((()=>[(0,u.eW)("Home")])),_:1})]),I,h])])]),(0,u.Lk)("div",T,[(0,u.Lk)("div",b,[k,(0,u.bo)(((0,u.uX)(),(0,u.CE)("div",R,[(0,a.R1)(E.cE)("roles.add")?((0,u.uX)(),(0,u.CE)(u.FK,{key:0},[(0,u.Lk)("div",C,[(0,u.bF)(i,{onClick:t[0]||(t[0]=e=>F.value=!0),type:"primary",icon:(0,a.R1)(m.FWt),plain:""},{default:(0,u.k6)((()=>[(0,u.eW)("Add Role")])),_:1},8,["icon"])]),g],64)):(0,u.Q3)("",!0),(0,a.R1)(E.cE)("roles.list")?((0,u.uX)(),(0,u.CE)("div",L,[(0,u.Lk)("table",x,[N,(0,u.Lk)("tbody",null,[V.value.length?((0,u.uX)(!0),(0,u.CE)(u.FK,{key:0},(0,u.pI)(V.value,((e,t)=>((0,u.uX)(),(0,u.CE)("tr",{key:"roles-"+t,style:{cursor:"pointer"}},[(0,u.Lk)("td",null,(0,l.v_)((0,a.R1)(_.A)(e.name)),1),(0,u.Lk)("td",null,[(0,u.eW)((0,l.v_)(e.users_names.slice(0,3).join(", "))+" ",1),e.users_count>2?((0,u.uX)(),(0,u.CE)("small",O,"+"+(0,l.v_)(parseInt(e.users_count)-2)+" more",1)):(0,u.Q3)("",!0)]),(0,u.Lk)("td",null,(0,l.v_)(0==parseInt(e.permissions_count)?"":`${parseInt(e.permissions_count).toString()} permission${parseInt(e.permissions_count)>1?"s":""}`),1),(0,u.Lk)("td",null,["super_admin"!=e.name&&((0,a.R1)(E.cE)("roles.edit")||(0,a.R1)(E.cE)("roles.delete"))?((0,u.uX)(),(0,u.Wv)(f,{key:0,trigger:"click",onCommand:Z},{dropdown:(0,u.k6)((()=>[(0,u.bF)(d,null,{default:(0,u.k6)((()=>[(0,a.R1)(E.cE)("roles.edit")?((0,u.uX)(),(0,u.Wv)(s,{key:0,command:{action:"edit",role:e}},{default:(0,u.k6)((()=>[(0,u.eW)("Edit")])),_:2},1032,["command"])):(0,u.Q3)("",!0),(0,a.R1)(E.cE)("roles.delete")?((0,u.uX)(),(0,u.Wv)(s,{key:1,command:{action:"delete",role:e}},{default:(0,u.k6)((()=>[(0,u.eW)("Delete")])),_:2},1032,["command"])):(0,u.Q3)("",!0)])),_:2},1024)])),default:(0,u.k6)((()=>[(0,u.bF)(i,{plain:"",type:"primary",size:"small"},{default:(0,u.k6)((()=>[(0,u.eW)(" Actions"),(0,u.bF)(c,{class:"el-icon--right"},{default:(0,u.k6)((()=>[(0,u.bF)((0,a.R1)(m.yd$))])),_:1})])),_:1})])),_:2},1024)):(0,u.Q3)("",!0)])])))),128)):((0,u.uX)(),(0,u.CE)("tr",H,y))])])])):(0,u.Q3)("",!0)])),[[te,Q.value]])])]),(0,u.bF)(ee,{modelValue:F.value,"onUpdate:modelValue":t[2]||(t[2]=e=>F.value=e),width:"30%",title:"Add new Role",fullscreen:(0,a.R1)(E.Qv)},{default:(0,u.k6)((()=>[(0,u.bo)(((0,u.uX)(),(0,u.CE)("div",G,[(0,u.Lk)("form",{onSubmit:(0,o.D$)(J,["prevent"])},[(0,u.bo)((0,u.Lk)("input",{type:"text",class:"form-control",placeholder:"Enter new role name here","onUpdate:modelValue":t[1]||(t[1]=e=>z.value=e),required:""},null,512),[[o.Jo,z.value]]),(0,u.Lk)("div",w,[(0,u.bF)(i,{size:"small","native-type":"submit",type:"primary",disabled:!z.value.length},{default:(0,u.k6)((()=>[(0,u.eW)("Add Role")])),_:1},8,["disabled"])])],32),P.value.length?((0,u.uX)(),(0,u.CE)(u.FK,{key:0},[(0,u.bF)($),U,(0,u.Lk)("div",X,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(P.value,((e,t)=>((0,u.uX)(),(0,u.CE)("div",{class:"p-1",key:"new-role"+e},[(0,u.bF)(Y,{closable:"",onClose:e=>P.value.splice(t,1)},{default:(0,u.k6)((()=>[(0,u.eW)((0,l.v_)((0,a.R1)(_.A)(e)),1)])),_:2},1032,["onClose"])])))),128))]),(0,u.Lk)("div",M,[(0,u.bF)(i,{onClick:B,size:"small",type:"primary"},{default:(0,u.k6)((()=>[(0,u.eW)("Save new Roles")])),_:1})])],64)):(0,u.Q3)("",!0)])),[[te,n.value]])])),_:1},8,["modelValue","fullscreen"]),K.value?((0,u.uX)(),(0,u.Wv)(ee,{key:0,modelValue:j.value,"onUpdate:modelValue":t[4]||(t[4]=e=>j.value=e),width:"30%",title:"Edit Role",fullscreen:(0,a.R1)(E.Qv)},{default:(0,u.k6)((()=>[(0,u.bo)(((0,u.uX)(),(0,u.CE)("div",D,[(0,u.Lk)("form",{onSubmit:(0,o.D$)(q,["prevent"])},[(0,u.bo)((0,u.Lk)("input",{type:"text",class:"form-control",placeholder:"Enter role name here","onUpdate:modelValue":t[3]||(t[3]=e=>K.value.new_name=e),required:""},null,512),[[o.Jo,K.value.new_name]]),(0,u.Lk)("div",W,[(0,u.bF)(i,{size:"small","native-type":"submit",type:"primary",disabled:K.value.name==K.value.new_name},{default:(0,u.k6)((()=>[(0,u.eW)("Save Changes")])),_:1},8,["disabled"])])],32)])),[[te,n.value]])])),_:1},8,["modelValue","fullscreen"])):(0,u.Q3)("",!0)],64)}}};const P=z;var j=P},5015:function(e,t,n){function u(e,t,n,u){var a=-1,l=null==e?0:e.length;u&&l&&(n=e[++a]);while(++a<l)n=t(n,e[a],a,e);return n}n.d(t,{A:function(){return st}});var a=u;function l(e){return function(t){return null==e?void 0:e[t]}}var o=l,r={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},i=o(r),c=i,s=n(49),d=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,f="\\u0300-\\u036f",m="\\ufe20-\\ufe2f",E="\\u20d0-\\u20ff",_=f+m+E,v="["+_+"]",S=RegExp(v,"g");function p(e){return e=(0,s.A)(e),e&&e.replace(d,c).replace(S,"")}var A=p,I=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function h(e){return e.match(I)||[]}var T=h,b=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function k(e){return b.test(e)}var R=k,C="\\ud800-\\udfff",g="\\u0300-\\u036f",L="\\ufe20-\\ufe2f",x="\\u20d0-\\u20ff",N=g+L+x,O="\\u2700-\\u27bf",H="a-z\\xdf-\\xf6\\xf8-\\xff",F="\\xac\\xb1\\xd7\\xf7",y="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",G="\\u2000-\\u206f",w=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",U="A-Z\\xc0-\\xd6\\xd8-\\xde",X="\\ufe0e\\ufe0f",M=F+y+G+w,D="['’]",W="["+M+"]",z="["+N+"]",P="\\d+",j="["+O+"]",K="["+H+"]",V="[^"+C+M+P+O+H+U+"]",Q="\\ud83c[\\udffb-\\udfff]",Z="(?:"+z+"|"+Q+")",$="[^"+C+"]",J="(?:\\ud83c[\\udde6-\\uddff]){2}",B="[\\ud800-\\udbff][\\udc00-\\udfff]",Y="["+U+"]",q="\\u200d",ee="(?:"+K+"|"+V+")",te="(?:"+Y+"|"+V+")",ne="(?:"+D+"(?:d|ll|m|re|s|t|ve))?",ue="(?:"+D+"(?:D|LL|M|RE|S|T|VE))?",ae=Z+"?",le="["+X+"]?",oe="(?:"+q+"(?:"+[$,J,B].join("|")+")"+le+ae+")*",re="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ie="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ce=le+ae+oe,se="(?:"+[j,J,B].join("|")+")"+ce,de=RegExp([Y+"?"+K+"+"+ne+"(?="+[W,Y,"$"].join("|")+")",te+"+"+ue+"(?="+[W,Y+ee,"$"].join("|")+")",Y+"?"+ee+"+"+ne,Y+"+"+ue,ie,re,P,se].join("|"),"g");function fe(e){return e.match(de)||[]}var me=fe;function Ee(e,t,n){return e=(0,s.A)(e),t=n?void 0:t,void 0===t?R(e)?me(e):T(e):e.match(t)||[]}var _e=Ee,ve="['’]",Se=RegExp(ve,"g");function pe(e){return function(t){return a(_e(A(t).replace(Se,"")),e,"")}}var Ae=pe,Ie=n(6497);function he(e,t,n){var u=e.length;return n=void 0===n?u:n,!t&&n>=u?e:(0,Ie.A)(e,t,n)}var Te=he,be="\\ud800-\\udfff",ke="\\u0300-\\u036f",Re="\\ufe20-\\ufe2f",Ce="\\u20d0-\\u20ff",ge=ke+Re+Ce,Le="\\ufe0e\\ufe0f",xe="\\u200d",Ne=RegExp("["+xe+be+ge+Le+"]");function Oe(e){return Ne.test(e)}var He=Oe;function Fe(e){return e.split("")}var ye=Fe,Ge="\\ud800-\\udfff",we="\\u0300-\\u036f",Ue="\\ufe20-\\ufe2f",Xe="\\u20d0-\\u20ff",Me=we+Ue+Xe,De="\\ufe0e\\ufe0f",We="["+Ge+"]",ze="["+Me+"]",Pe="\\ud83c[\\udffb-\\udfff]",je="(?:"+ze+"|"+Pe+")",Ke="[^"+Ge+"]",Ve="(?:\\ud83c[\\udde6-\\uddff]){2}",Qe="[\\ud800-\\udbff][\\udc00-\\udfff]",Ze="\\u200d",$e=je+"?",Je="["+De+"]?",Be="(?:"+Ze+"(?:"+[Ke,Ve,Qe].join("|")+")"+Je+$e+")*",Ye=Je+$e+Be,qe="(?:"+[Ke+ze+"?",ze,Ve,Qe,We].join("|")+")",et=RegExp(Pe+"(?="+Pe+")|"+qe+Ye,"g");function tt(e){return e.match(et)||[]}var nt=tt;function ut(e){return He(e)?nt(e):ye(e)}var at=ut;function lt(e){return function(t){t=(0,s.A)(t);var n=He(t)?at(t):void 0,u=n?n[0]:t.charAt(0),a=n?Te(n,1).join(""):t.slice(1);return u[e]()+a}}var ot=lt,rt=ot("toUpperCase"),it=rt,ct=Ae((function(e,t,n){return e+(n?" ":"")+it(t)})),st=ct}}]);
//# sourceMappingURL=324.js.map