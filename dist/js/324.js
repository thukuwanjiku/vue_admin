"use strict";(self["webpackChunkmyzola_admin"]=self["webpackChunkmyzola_admin"]||[]).push([[324],{8324:function(e,u,l){l.r(u),l.d(u,{default:function(){return Z}});l(4114);var a=l(6768),n=l(144),t=l(4232),o=l(5130),r=l(4300),d=l(7190),s=l(782),i=l(1387),c=l(1219),f=l(2933),v=l(7477),m=l(7021),p=l(5015);const k={class:"pagetitle"},b=(0,a.Lk)("h1",null,"User Roles",-1),g={class:"breadcrumb"},E={class:"breadcrumb-item"},h=(0,a.Lk)("li",{class:"breadcrumb-item"},"Access Control",-1),x=(0,a.Lk)("li",{class:"breadcrumb-item active"},"Roles",-1),L={class:"card"},_={class:"card-body"},R=(0,a.Lk)("br",null,null,-1),y={class:"row p-2"},A={class:"col-sm-12 d-flex m-b-10"},w=(0,a.Lk)("br",null,null,-1),C={key:1,class:"table-responsive"},S={class:"table table-hover"},F=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Role"),(0,a.Lk)("th",null,"Users"),(0,a.Lk)("th",null,"Permissions"),(0,a.Lk)("th",null,"Actions")])],-1),I={key:0},N={key:1},W=(0,a.Lk)("td",{colspan:"4",class:"text-center p-3"},"No data",-1),O=[W],U={class:"p-3"},X={class:"m-t-10"},z=(0,a.Lk)("h6",null,[(0,a.Lk)("small",{class:"fw-bold"},"New Roles to save")],-1),D={class:"d-flex flex-wrap"},j={class:"m-t-10 d-flex justify-content-end"},T={class:"p-3"},K={class:"m-t-10"};var Q={__name:"ManageRoles",setup(e){const u=(0,s.Pj)(),l=((0,i.rd)(),(0,n.KR)(!1)),W=(0,n.KR)(!1),Q=(0,n.KR)(""),V=(0,n.KR)([]),Z=(0,n.KR)(!1),J=(0,n.KR)({}),G=(0,a.EW)((()=>u.state.auth.roles)),H=(0,a.EW)({get:()=>u.state.auth.isFetchingRoles,set:e=>u.commit("auth/SET_IS_FETCHING_ROLES",e)});function Y(e){switch(e.action){case"edit":return M(e.role);case"delete":return ee(e.role)}}function q(){return V.value.find((e=>e==Q.value))||G.value.find((e=>(0,p.A)(e.name)==Q.value))?c.nk.warning(`${Q.value} is already added`):(V.value.push(JSON.parse(JSON.stringify(Q.value))),void(Q.value=""))}function B(){l.value=!0,r.A.post(d.pe.ADD_NEW_ROLES,{roles:V.value.map((e=>e.toString().replaceAll(" ","_")))}).then((e=>{(0,m.kN)(),$.growl.notice({message:e.data.message}),W.value=!1,V.value=[],l.value=!1})).catch((e=>l.value=!1))}function M(e){J.value=JSON.parse(JSON.stringify(e)),J.value.name=(0,p.A)(J.value.name),J.value.new_name=(0,p.A)(J.value.name),Z.value=!0}function P(){l.value=!0,r.A.post(d.pe.EDIT_ROLE,{id:J.value.id,name:J.value.new_name.toString().replaceAll(" ","_")}).then((e=>{(0,m.kN)(),$.growl.notice({message:e.data.message}),Z.value=!1,l.value=!1})).catch((e=>l.value=!1))}function ee(e){f.s.confirm("Sure you want to delete this role?","Confirm Delete",{confirmButtonText:"Delete",cancelButtonText:"Cancel"}).then((()=>{ue(e)})).catch((()=>{}))}function ue(e){H.value=!0,r.A.post(d.pe.DELETE_ROLES,{ids:[e.id]}).then((e=>{(0,m.kN)(),$.growl.notice({message:e.data.message}),H.value=!1})).catch((e=>H.value=!1))}return(0,a.sV)((()=>{(0,m.cE)("roles.view")&&!G.value.length&&(0,m.kN)()})),(e,u)=>{const r=(0,a.g2)("router-link"),d=(0,a.g2)("el-button"),s=(0,a.g2)("el-icon"),i=(0,a.g2)("el-dropdown-item"),c=(0,a.g2)("el-dropdown-menu"),f=(0,a.g2)("el-dropdown"),$=(0,a.g2)("el-divider"),M=(0,a.g2)("el-tag"),ee=(0,a.g2)("el-dialog"),ue=(0,a.gN)("loading");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",k,[b,(0,a.Lk)("nav",null,[(0,a.Lk)("ol",g,[(0,a.Lk)("li",E,[(0,a.bF)(r,{to:{name:"dashboard"}},{default:(0,a.k6)((()=>[(0,a.eW)("Home")])),_:1})]),h,x])])]),(0,a.Lk)("div",L,[(0,a.Lk)("div",_,[R,(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",y,[(0,n.R1)(m.cE)("roles.add")?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.Lk)("div",A,[(0,a.bF)(d,{onClick:u[0]||(u[0]=e=>W.value=!0),type:"primary",icon:(0,n.R1)(v.FWt),plain:""},{default:(0,a.k6)((()=>[(0,a.eW)("Add Role")])),_:1},8,["icon"])]),w],64)):(0,a.Q3)("",!0),(0,n.R1)(m.cE)("roles.view")?((0,a.uX)(),(0,a.CE)("div",C,[(0,a.Lk)("table",S,[F,(0,a.Lk)("tbody",null,[G.value.length?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(G.value,((e,u)=>((0,a.uX)(),(0,a.CE)("tr",{key:"roles-"+u,style:{cursor:"pointer"}},[(0,a.Lk)("td",null,(0,t.v_)((0,n.R1)(p.A)(e.name)),1),(0,a.Lk)("td",null,[(0,a.eW)((0,t.v_)(e.users_names.slice(0,3).join(", "))+" ",1),e.users_count>2?((0,a.uX)(),(0,a.CE)("small",I,"+"+(0,t.v_)(parseInt(e.users_count)-2)+" more",1)):(0,a.Q3)("",!0)]),(0,a.Lk)("td",null,(0,t.v_)(0==parseInt(e.permissions_count)?"":`${parseInt(e.permissions_count).toString()} permission${parseInt(e.permissions_count)>1?"s":""}`),1),(0,a.Lk)("td",null,["super_admin"!=e.name?((0,a.uX)(),(0,a.Wv)(f,{key:0,trigger:"click",onCommand:Y},{dropdown:(0,a.k6)((()=>[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,n.R1)(m.cE)("roles.edit")?((0,a.uX)(),(0,a.Wv)(i,{key:0,command:{action:"edit",role:e}},{default:(0,a.k6)((()=>[(0,a.eW)("Edit")])),_:2},1032,["command"])):(0,a.Q3)("",!0),(0,n.R1)(m.cE)("roles.delete")?((0,a.uX)(),(0,a.Wv)(i,{key:1,command:{action:"delete",role:e}},{default:(0,a.k6)((()=>[(0,a.eW)("Delete")])),_:2},1032,["command"])):(0,a.Q3)("",!0)])),_:2},1024)])),default:(0,a.k6)((()=>[(0,a.bF)(d,{plain:"",type:"primary",size:"small",disabled:!((0,n.R1)(m.cE)("roles.edit")||(0,n.R1)(m.cE)("roles.delete"))},{default:(0,a.k6)((()=>[(0,a.eW)(" Actions"),(0,a.bF)(s,{class:"el-icon--right"},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(v.yd$))])),_:1})])),_:1},8,["disabled"])])),_:2},1024)):(0,a.Q3)("",!0)])])))),128)):((0,a.uX)(),(0,a.CE)("tr",N,O))])])])):(0,a.Q3)("",!0)])),[[ue,H.value]])])]),(0,a.bF)(ee,{modelValue:W.value,"onUpdate:modelValue":u[2]||(u[2]=e=>W.value=e),width:"30%",title:"Add new Role",fullscreen:(0,n.R1)(m.Qv)},{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",U,[(0,a.Lk)("form",{onSubmit:(0,o.D$)(q,["prevent"])},[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control",placeholder:"Enter new role name here","onUpdate:modelValue":u[1]||(u[1]=e=>Q.value=e),required:""},null,512),[[o.Jo,Q.value]]),(0,a.Lk)("div",X,[(0,a.bF)(d,{size:"small","native-type":"submit",type:"primary",disabled:!Q.value.length},{default:(0,a.k6)((()=>[(0,a.eW)("Add Role")])),_:1},8,["disabled"])])],32),V.value.length?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)($),z,(0,a.Lk)("div",D,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(V.value,((e,u)=>((0,a.uX)(),(0,a.CE)("div",{class:"p-1",key:"new-role"+e},[(0,a.bF)(M,{closable:"",onClose:e=>V.value.splice(u,1)},{default:(0,a.k6)((()=>[(0,a.eW)((0,t.v_)((0,n.R1)(p.A)(e)),1)])),_:2},1032,["onClose"])])))),128))]),(0,a.Lk)("div",j,[(0,a.bF)(d,{onClick:B,size:"small",type:"primary"},{default:(0,a.k6)((()=>[(0,a.eW)("Save new Roles")])),_:1})])],64)):(0,a.Q3)("",!0)])),[[ue,l.value]])])),_:1},8,["modelValue","fullscreen"]),J.value?((0,a.uX)(),(0,a.Wv)(ee,{key:0,modelValue:Z.value,"onUpdate:modelValue":u[4]||(u[4]=e=>Z.value=e),width:"30%",title:"Edit Role",fullscreen:(0,n.R1)(m.Qv)},{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",T,[(0,a.Lk)("form",{onSubmit:(0,o.D$)(P,["prevent"])},[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control",placeholder:"Enter role name here","onUpdate:modelValue":u[3]||(u[3]=e=>J.value.new_name=e),required:""},null,512),[[o.Jo,J.value.new_name]]),(0,a.Lk)("div",K,[(0,a.bF)(d,{size:"small","native-type":"submit",type:"primary",disabled:J.value.name==J.value.new_name},{default:(0,a.k6)((()=>[(0,a.eW)("Save Changes")])),_:1},8,["disabled"])])],32)])),[[ue,l.value]])])),_:1},8,["modelValue","fullscreen"])):(0,a.Q3)("",!0)],64)}}};const V=Q;var Z=V},5015:function(e,u,l){function a(e,u,l,a){var n=-1,t=null==e?0:e.length;a&&t&&(l=e[++n]);while(++n<t)l=u(l,e[n],n,e);return l}l.d(u,{A:function(){return iu}});var n=a;function t(e){return function(u){return null==e?void 0:e[u]}}var o=t,r={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},d=o(r),s=d,i=l(49),c=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,f="\\u0300-\\u036f",v="\\ufe20-\\ufe2f",m="\\u20d0-\\u20ff",p=f+v+m,k="["+p+"]",b=RegExp(k,"g");function g(e){return e=(0,i.A)(e),e&&e.replace(c,s).replace(b,"")}var E=g,h=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function x(e){return e.match(h)||[]}var L=x,_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function R(e){return _.test(e)}var y=R,A="\\ud800-\\udfff",w="\\u0300-\\u036f",C="\\ufe20-\\ufe2f",S="\\u20d0-\\u20ff",F=w+C+S,I="\\u2700-\\u27bf",N="a-z\\xdf-\\xf6\\xf8-\\xff",W="\\xac\\xb1\\xd7\\xf7",O="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",U="\\u2000-\\u206f",X=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",z="A-Z\\xc0-\\xd6\\xd8-\\xde",D="\\ufe0e\\ufe0f",j=W+O+U+X,T="['’]",K="["+j+"]",$="["+F+"]",Q="\\d+",V="["+I+"]",Z="["+N+"]",J="[^"+A+j+Q+I+N+z+"]",G="\\ud83c[\\udffb-\\udfff]",H="(?:"+$+"|"+G+")",Y="[^"+A+"]",q="(?:\\ud83c[\\udde6-\\uddff]){2}",B="[\\ud800-\\udbff][\\udc00-\\udfff]",M="["+z+"]",P="\\u200d",ee="(?:"+Z+"|"+J+")",ue="(?:"+M+"|"+J+")",le="(?:"+T+"(?:d|ll|m|re|s|t|ve))?",ae="(?:"+T+"(?:D|LL|M|RE|S|T|VE))?",ne=H+"?",te="["+D+"]?",oe="(?:"+P+"(?:"+[Y,q,B].join("|")+")"+te+ne+")*",re="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",de="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",se=te+ne+oe,ie="(?:"+[V,q,B].join("|")+")"+se,ce=RegExp([M+"?"+Z+"+"+le+"(?="+[K,M,"$"].join("|")+")",ue+"+"+ae+"(?="+[K,M+ee,"$"].join("|")+")",M+"?"+ee+"+"+le,M+"+"+ae,de,re,Q,ie].join("|"),"g");function fe(e){return e.match(ce)||[]}var ve=fe;function me(e,u,l){return e=(0,i.A)(e),u=l?void 0:u,void 0===u?y(e)?ve(e):L(e):e.match(u)||[]}var pe=me,ke="['’]",be=RegExp(ke,"g");function ge(e){return function(u){return n(pe(E(u).replace(be,"")),e,"")}}var Ee=ge,he=l(6497);function xe(e,u,l){var a=e.length;return l=void 0===l?a:l,!u&&l>=a?e:(0,he.A)(e,u,l)}var Le=xe,_e="\\ud800-\\udfff",Re="\\u0300-\\u036f",ye="\\ufe20-\\ufe2f",Ae="\\u20d0-\\u20ff",we=Re+ye+Ae,Ce="\\ufe0e\\ufe0f",Se="\\u200d",Fe=RegExp("["+Se+_e+we+Ce+"]");function Ie(e){return Fe.test(e)}var Ne=Ie;function We(e){return e.split("")}var Oe=We,Ue="\\ud800-\\udfff",Xe="\\u0300-\\u036f",ze="\\ufe20-\\ufe2f",De="\\u20d0-\\u20ff",je=Xe+ze+De,Te="\\ufe0e\\ufe0f",Ke="["+Ue+"]",$e="["+je+"]",Qe="\\ud83c[\\udffb-\\udfff]",Ve="(?:"+$e+"|"+Qe+")",Ze="[^"+Ue+"]",Je="(?:\\ud83c[\\udde6-\\uddff]){2}",Ge="[\\ud800-\\udbff][\\udc00-\\udfff]",He="\\u200d",Ye=Ve+"?",qe="["+Te+"]?",Be="(?:"+He+"(?:"+[Ze,Je,Ge].join("|")+")"+qe+Ye+")*",Me=qe+Ye+Be,Pe="(?:"+[Ze+$e+"?",$e,Je,Ge,Ke].join("|")+")",eu=RegExp(Qe+"(?="+Qe+")|"+Pe+Me,"g");function uu(e){return e.match(eu)||[]}var lu=uu;function au(e){return Ne(e)?lu(e):Oe(e)}var nu=au;function tu(e){return function(u){u=(0,i.A)(u);var l=Ne(u)?nu(u):void 0,a=l?l[0]:u.charAt(0),n=l?Le(l,1).join(""):u.slice(1);return a[e]()+n}}var ou=tu,ru=ou("toUpperCase"),du=ru,su=Ee((function(e,u,l){return e+(l?" ":"")+du(u)})),iu=su}}]);
//# sourceMappingURL=324.js.map