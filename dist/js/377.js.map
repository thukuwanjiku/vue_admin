{"version":3,"file":"js/377.js","mappings":"+jDAcA,MAAMA,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MAERC,GAAQC,EAAAA,EAAAA,IAAI,IACZC,GAAWD,EAAAA,EAAAA,IAAI,IACfE,GAAaF,EAAAA,EAAAA,KAAI,GACjBG,GAAYH,EAAAA,EAAAA,KAAI,GAChBI,GAAoBJ,EAAAA,EAAAA,KAAI,GACxBK,GAAeL,EAAAA,EAAAA,KAAI,GAOzB,SAASM,IACLD,EAAaE,OAASF,EAAaE,MAEnCC,YAAW,KACPC,EAAE,aAAaC,OAAO,GACvB,IACP,CACA,SAASC,IAELR,EAAUI,OAAQ,EAElBK,EAAAA,EAAIC,IAAIC,EAAAA,GAAUC,oBAETC,MAAKC,GACKC,MAEVC,OAAMC,GAASjB,EAAUI,OAAQ,GAC9C,CACA,SAASW,IAGL,IAAIG,EAAU,CACVtB,MAAOA,EAAMQ,MAAMe,OACnBrB,SAAUA,EAASM,MAAMe,QAI7BV,EAAAA,EAAIW,KAAKT,EAAAA,GAAUU,MAAOH,GACjBL,MAAKC,IAEFpB,EAAM4B,OAAO,wBAAyBR,EAASS,KAAKC,OAEpD9B,EAAM4B,OAAO,uBAAwBR,EAASS,KAAKE,MAEnD/B,EAAM4B,OAAO,yBAA0BR,EAASS,KAAKG,aAGlD3B,IACC4B,aAAaC,QAAQ,WAAYC,KAAKC,UAAUhB,EAASS,KAAKE,OAC9DE,aAAaC,QAAQ,eAAgBd,EAASS,KAAKC,QAIvDxB,EAAUI,OAAQ,EAGlBV,EAAM4B,OAAO,mBAGb9B,EAAOuC,QAAQ,CAAEC,KAAM,eAGvBC,EAAAA,EAAAA,IAAmB,IAEtBjB,OAAMC,GAASjB,EAAUI,OAAQ,GAC9C,C,gyCC9EA,MAAM8B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://myzola-admin/./src/views/auth/Login.vue","webpack://myzola-admin/./src/views/auth/Login.vue?930c"],"sourcesContent":["<script setup>\n\n//imports\nimport { ref } from 'vue';\nimport api from \"@/services/api\";\nimport {apiRoutes} from \"@/services/apiRoutes\";\nimport {useRouter} from \"vue-router\";\nimport {useStore} from \"vuex\";\nimport {startIdleTracking} from \"@/services/idleAppLockTimer\";\n\n/* -----------------------------\n * All variables definitions\n * -----------------------------\n * */\nconst router = useRouter();\nconst store = useStore();\n\nconst email = ref(\"\");\nconst password = ref(\"\");\nconst rememberMe = ref(false);\nconst isLoading = ref(false)\nconst isPasswordFocused = ref(false)\nconst showPassword = ref(false)\n\n\n/* -----------------------------\n * Methods definitions\n * ---------------------------\n * */\nfunction toggleShowPassword(){\n    showPassword.value = !showPassword.value;\n    //focus the password field\n    setTimeout(()=>{\n        $(\"#password\").focus();\n    }, 100);\n}\nfunction getSanctumCSRFToken(){\n    //show loader\n    isLoading.value = true;\n\n    api.get(apiRoutes.SANCTUM_CSRF_TOKEN)\n            //call method to login user\n            .then(response => {\n                return login();\n            })\n            .catch(error => isLoading.value = false)\n}\nfunction login(){\n\n    //prepare request payload\n    let payload = {\n        email: email.value.trim(),\n        password: password.value.trim()\n    }\n\n    //make api call\n    api.post(apiRoutes.LOGIN, payload)\n            .then(response => {\n                //store access token\n                store.commit('auth/STORE_AUTH_TOKEN', response.data.token);\n                //store user details\n                store.commit('auth/STORE_AUTH_USER', response.data.user)\n                //store user permissions\n                store.commit('auth/STORE_PERMISSIONS', response.data.permissions)\n\n                //if \"Remember Me\" is checked, save the details in localStorage\n                if(rememberMe){\n                    localStorage.setItem('mz.admin', JSON.stringify(response.data.user));\n                    localStorage.setItem('bearer_token', response.data.token);\n                }\n\n                //dismiss loader\n                isLoading.value = false;\n\n                //set that the app is not locked\n                store.commit('auth/UNLOCK_APP');\n\n                //redirect user to dashboard\n                router.replace({ name: 'dashboard'}); //TODO Implement intended route logic\n\n                //start time for tracking idle time\n                startIdleTracking();\n            })\n            .catch(error => isLoading.value = false)\n}\n\n</script>\n\n<template>\n\n    <main>\n        <div class=\"container\">\n\n            <section class=\"section register min-vh-100 d-flex flex-column align-items-center justify-content-center py-4\">\n                <div class=\"container\">\n                    <div class=\"row justify-content-center\">\n                        <div class=\"col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center\">\n\n                            <div class=\"d-flex justify-content-center py-4\">\n                                <div class=\"logo d-flex align-items-center w-auto\">\n                                    <img src=\"@/assets/images/myzola_icon.png\" alt=\"\">\n                                    <span class=\"d-none d-lg-block\">MyZola Admin</span>\n                                </div>\n                            </div><!-- End Logo -->\n\n                            <div class=\"card mb-3\">\n\n                                <div class=\"card-body\" v-loading=\"isLoading\">\n\n                                    <div class=\"pt-4 pb-2\">\n                                        <h5 class=\"card-title text-center pb-0 fs-4\">Login to Your Account</h5>\n                                        <p class=\"text-center small\">Enter your username & password to login</p>\n                                    </div>\n\n                                    <form @submit.prevent=\"getSanctumCSRFToken\" class=\"row g-3 needs-validation\">\n\n                                        <div class=\"col-12\">\n                                            <div class=\"form-floating\">\n                                                <input type=\"email\" class=\"form-control\" id=\"email\"\n                                                       placeholder=\"Email\" v-model=\"email\" required>\n                                                <label for=\"email\">Email</label>\n                                            </div>\n                                        </div>\n\n                                        <div class=\"col-12\">\n                                            <div class=\"form-floating\">\n                                                <input :type=\"showPassword ? 'text' : 'password'\"\n                                                       class=\"form-control\" id=\"password\"\n                                                       placeholder=\"Password\" v-model=\"password\"\n                                                       @focus=\"isPasswordFocused = true\"\n                                                       @blur=\"isPasswordFocused = false\"\n                                                       required>\n                                                <label for=\"password\">Password</label>\n\n                                                <i\n                                                        :class=\"showPassword ? 'bi bi-eye-slash-fill' : 'bi bi-eye-fill'\"\n                                                        @click=\"toggleShowPassword\"\n                                                        class=\"toggle-password\" v-if=\"password.length\"\n                                                ></i>\n                                            </div>\n                                        </div>\n\n                                        <div class=\"col-12\">\n                                            <div class=\"form-check\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" name=\"remember\" value=\"true\" id=\"rememberMe\" v-model=\"rememberMe\">\n                                                <label class=\"form-check-label\" for=\"rememberMe\">Remember me</label>\n                                            </div>\n                                        </div>\n                                        <div class=\"col-12\">\n                                            <button class=\"btn btn-primary w-100\" type=\"submit\">Login</button>\n                                        </div>\n                                        <!--<div class=\"col-12\">\n                                            <p class=\"small mb-0\">Don't have account? <a href=\"pages-register.html\">Create an account</a></p>\n                                        </div>-->\n                                    </form>\n\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n\n            </section>\n\n        </div>\n    </main>\n    <!-- End #main -->\n\n</template>\n\n<style scoped>\n.toggle-password {\n    position: absolute;\n    top: 50%;\n    right: 15px;\n    transform: translateY(-50%);\n    cursor: pointer;\n    z-index: 2;\n    color: #b7b7b7;\n    font-size: 20px;\n}\n\n.form-floating input {\n    padding-right: 2.5rem; /* Adjust to make space for the icon */\n}\n</style>","import script from \"./Login.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Login.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=12380e20&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-12380e20\"]])\n\nexport default __exports__"],"names":["router","useRouter","store","useStore","email","ref","password","rememberMe","isLoading","isPasswordFocused","showPassword","toggleShowPassword","value","setTimeout","$","focus","getSanctumCSRFToken","api","get","apiRoutes","SANCTUM_CSRF_TOKEN","then","response","login","catch","error","payload","trim","post","LOGIN","commit","data","token","user","permissions","localStorage","setItem","JSON","stringify","replace","name","startIdleTracking","__exports__"],"sourceRoot":""}