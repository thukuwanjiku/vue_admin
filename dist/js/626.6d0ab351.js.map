{"version":3,"file":"js/626.6d0ab351.js","mappings":"yzCAWA,MAAMA,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MAERC,GAAUC,EAAAA,EAAAA,IAAI,CAChBC,KAAK,GACLC,YAAY,GACZC,aAAa,GACbC,cAAc,GACdC,MAAM,KAEV,IAAIC,GAAaN,EAAAA,EAAAA,IAAI,MACrB,MAAMO,GAAYP,EAAAA,EAAAA,KAAI,GAMtB,SAASQ,EAAcC,GACnBH,EAAWI,MAAQD,EAAME,OAAOC,MAAM,EAC1C,CACA,SAASC,IAEL,IAAIC,EAAU,IAAIC,SAElBC,OAAOC,KAAKlB,EAAQW,OACXQ,SAAQC,GAAOL,EAAQM,OAAOD,EAAKpB,EAAQW,MAAMS,MAG1DL,EAAQM,OAAO,eAAgBd,EAAWI,OAG1CH,EAAUG,OAAQ,EAGlBW,EAAAA,EAAIC,KAAKC,EAAAA,EAAUC,2BAA4BV,GACtCW,MAAKC,IAEFC,EAAEC,MAAMC,OAAO,CAACC,QAASJ,EAASK,KAAKD,UAGvC,IAAIE,EAAYC,KAAKC,MAAMD,KAAKE,UAAUtC,EAAMuC,MAAMC,QAAQL,YAE9DA,EAAUM,QAAQZ,EAASK,KAAKA,MAEhClC,EAAM0C,OAAO,yCAA0CP,GAGvDzB,EAAUG,OAAQ,EAGlBf,EAAO6C,MAAM,IAEhBC,OAAMC,GAASnC,EAAUG,OAAQ,GAC9C,C,o1DC7DA,MAAMiC,EAAc,EAEpB,O","sources":["webpack://myzola-admin/./src/views/explore/companies/Add.vue","webpack://myzola-admin/./src/views/explore/companies/Add.vue?f896"],"sourcesContent":["<script setup>\r\n\r\nimport {useRouter} from \"vue-router\";\r\nimport {ref} from \"vue\";\r\nimport api from \"@/services/api\";\r\nimport {apiRoutes} from \"@/services/apiRoutes\";\r\nimport {useStore} from \"vuex\";\r\n\r\n/**\r\n * Variables\r\n * */\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\nconst company = ref({\r\n    name:\"\",\r\n    description:\"\",\r\n    contact_name:\"\",\r\n    contact_phone:\"\",\r\n    email:\"\"\r\n});\r\nlet logoUpload = ref(null);\r\nconst isLoading = ref(false);\r\n\r\n\r\n/**\r\n * Methods\r\n * */\r\nfunction processUpload(event){\r\n    logoUpload.value = event.target.files[0];\r\n}\r\nfunction submit(){\r\n    //prepare request payload\r\n    let payload = new FormData();\r\n    //add all company details to the form data\r\n    Object.keys(company.value)\r\n            .forEach(key => payload.append(key, company.value[key]));\r\n\r\n    //add logo to payload\r\n    payload.append('company_logo', logoUpload.value);\r\n\r\n    //SHOW LOADER\r\n    isLoading.value = true;\r\n\r\n    //make api call\r\n    api.post(apiRoutes.ADD_EXPLORE_LISTED_COMPANY, payload)\r\n            .then(response => {\r\n                //show success response\r\n                $.growl.notice({message: response.data.message});\r\n\r\n                //get a copy of current companies list\r\n                let companies = JSON.parse(JSON.stringify(store.state.explore.companies));\r\n                //add the new company to the copy\r\n                companies.unshift(response.data.data);\r\n                //overwrite the vuex companies list with the updated copy\r\n                store.commit('explore/STORE_EXPLORE_LISTED_COMPANIES', companies)\r\n\r\n                //DISMISS LOADER\r\n                isLoading.value = false;\r\n\r\n                //navigate back to companies list\r\n                router.back();\r\n            })\r\n            .catch(error => isLoading.value = false);\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n\r\n    <div class=\"col-md-12 grid-margin stretch-card\">\r\n        <div class=\"card\">\r\n            <div class=\"card-body\">\r\n                <h4 class=\"card-title\">Add Company</h4>\r\n\r\n                <br>\r\n                <form @submit.prevent=\"submit\" v-loading=\"isLoading\">\r\n                    <!-- Name & Tagline -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-6\">\r\n                            <div class=\"form-group row\">\r\n                                <label class=\"fw-bold\">Name</label>\r\n                                <div class=\"col-sm-9\">\r\n                                    <input type=\"text\" class=\"form-control\"\r\n                                           placeholder=\"Company Name\"\r\n                                           v-model=\"company.name\" required>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-6\">\r\n                            <div class=\"form-group row\">\r\n                                <label class=\"fw-bold\">Description</label>\r\n                                <div class=\"col-sm-9\">\r\n                                    <input type=\"text\" class=\"form-control\"\r\n                                           placeholder=\"Tagline\" v-model=\"company.description\" required>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- Logo & Contact Person -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-6\">\r\n                            <div class=\"form-group row\">\r\n                                <label class=\"fw-bold\">Company Logo</label>\r\n                                <div class=\"col-sm-9\">\r\n                                    <input type=\"file\" class=\"form-control\"\r\n                                           @change=\"processUpload\" required>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-6\">\r\n                            <div class=\"form-group row\">\r\n                                <label class=\"fw-bold\">Contact Person</label>\r\n                                <div class=\"col-sm-9\">\r\n                                    <input type=\"text\" class=\"form-control\" placeholder=\"Name\"\r\n                                           v-model=\"company.contact_name\" required>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- Phone & Email -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-6\">\r\n                            <div class=\"form-group row\">\r\n                                <label class=\"fw-bold\">Contact Phone</label>\r\n                                <div class=\"col-sm-9\">\r\n                                    <input type=\"text\" class=\"form-control\" placeholder=\"Contact phone\"\r\n                                           v-model=\"company.contact_phone\" required>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <div class=\"col-md-6\">\r\n                            <div class=\"form-group row\">\r\n                                <label class=\"fw-bold\">Email</label>\r\n                                <div class=\"col-sm-9\">\r\n                                    <input type=\"text\" class=\"form-control\" placeholder=\"Contact Email\"\r\n                                           v-model=\"company.email\" required>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-6\">\r\n                            <button class=\"btn btn-primary\" type=\"submit\">Submit</button>\r\n                            &nbsp;\r\n                            <button @click=\"router.back()\" class=\"btn btn-secondary\" type=\"button\">Cancel</button>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./Add.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Add.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["router","useRouter","store","useStore","company","ref","name","description","contact_name","contact_phone","email","logoUpload","isLoading","processUpload","event","value","target","files","submit","payload","FormData","Object","keys","forEach","key","append","api","post","apiRoutes","ADD_EXPLORE_LISTED_COMPANY","then","response","$","growl","notice","message","data","companies","JSON","parse","stringify","state","explore","unshift","commit","back","catch","error","__exports__"],"sourceRoot":""}