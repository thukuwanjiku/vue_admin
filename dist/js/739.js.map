{"version":3,"file":"js/739.js","mappings":"mnFAkBA,MAAMA,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MAERC,GAAUC,EAAAA,EAAAA,IAAI,CAChBC,KAAK,GACLC,YAAY,GACZC,aAAa,GACbC,cAAc,GACdC,MAAM,GACNC,MAAM,KAEJC,IAAeP,EAAAA,EAAAA,IAAI,IACnBQ,IAAkBR,EAAAA,EAAAA,IAAI,CAACS,SAAS,GAAIC,KAAK,KAE/C,IAAIC,IAAaX,EAAAA,EAAAA,IAAI,MACjBY,IAAWZ,EAAAA,EAAAA,IAAI,MACnB,MAAMa,IAAYb,EAAAA,EAAAA,KAAI,GAChBc,IAAwBd,EAAAA,EAAAA,KAAI,GAClC,IAAIe,IAAmBf,EAAAA,EAAAA,IAAI,MAO3B,MAAMgB,IAAmBC,EAAAA,EAAAA,KAAS,KAE9B,IAAIC,EAAsBX,GAAaY,MAAMC,KAAIC,GAASA,EAAMZ,WAChE,OAAOa,EAAAA,GAAgBC,QAAOF,IAAUH,EAAoBM,SAASH,IAAO,IAoBhF,SAASI,GAAcC,GACnBf,GAAWQ,MAAQO,EAAMC,OAAOC,MAAM,GAEtC,MAAMC,EAAOH,EAAMC,OAAOC,MAAM,GAC1BE,EAAS,IAAIC,WAEnBD,EAAOE,OAAUC,IACbrB,GAASO,MAAQc,EAAEN,OAAOO,MAAM,EAEpCJ,EAAOK,cAAcN,EACzB,CACA,SAASO,KACLzB,GAAWQ,MAAQ,KACnBP,GAASO,MAAQ,KACjBkB,EAAE,gBAAgBC,IAAI,GAC1B,CACA,SAASC,KAELhC,GAAaY,MAAMqB,KAAK,CACpB/B,SAAUD,GAAgBW,MAAMV,SAChCC,KAAMF,GAAgBW,MAAMT,OAGhCF,GAAgBW,MAAQ,CAACV,SAAU,GAAIC,KAAM,GACjD,CACA,SAAS+B,KAEL,IAAInC,EAAQS,GAAiB2B,kBAC7B,IAAIpC,IAAUA,EAAMqC,WAAWC,QAAmB,WAATtC,EACrC,OAAO+B,EAAEQ,MAAMC,QAAQ,CAACC,QAAS,mCAKrC,GAHAhD,EAAQoB,MAAM,SAAWb,GAGrBP,EAAQoB,MAAMf,gBAAkBL,EAAQoB,MAAMf,cAAcuC,WAAWC,OACvE,OAAOP,EAAEQ,MAAMC,QAAQ,CAACC,QAAS,+BAIrC,IAAIC,EAAU,IAAIC,SAElBC,OAAOC,KAAKpD,EAAQoB,OACXiC,SAAQC,IACL,IAAIlC,EAAQpB,EAAQoB,MAAMkC,GAChB,iBAAPA,IAAwBlC,EAAQA,EAAMwB,WAAWW,WAAW,IAAK,KACpEN,EAAQO,OAAOF,EAAKlC,EAAM,IAItC6B,EAAQO,OAAO,eAAgB5C,GAAWQ,OAGvCZ,GAAaY,MAAMyB,QAClBrC,GAAaY,MAAMiC,SAAQ,CAACI,EAAQC,KAChCT,EAAQO,OAAO,WAAWE,eAAoBD,EAAO/C,UACrDuC,EAAQO,OAAO,WAAWE,WAAgBD,EAAO9C,KAAK,IAK9DG,GAAUM,OAAQ,EAGlBuC,EAAAA,EAAIC,KAAKC,EAAAA,GAAUC,2BAA4Bb,GACtCc,MAAKC,IAEF1B,EAAEQ,MAAMmB,OAAO,CAACjB,QAASgB,EAASE,KAAKlB,UAGvC,IAAImB,EAAYC,KAAKC,MAAMD,KAAKE,UAAUxE,EAAMyE,MAAMC,WAAWL,YAEjEA,EAAUM,QAAQT,EAASE,KAAKA,MAEhCpE,EAAM4E,OAAO,4CAA6CP,GAG1DrD,GAAUM,OAAQ,EAGlBxB,EAAO+E,MAAM,IAEhBC,OAAMC,GAAS/D,GAAUM,OAAQ,GAC9C,C,OA7FA0D,EAAAA,EAAAA,KAAU,KACN9D,GAAmB,IAAI+D,MAAM,yBAA0B,CACnDC,MAAO,OACPC,YAAa,4BACf,I,04ICxDN,MAAMC,GAAc,GAEpB,S","sources":["webpack://myzola-admin/./src/views/explore_hub/companies/listed/Add.vue","webpack://myzola-admin/./src/views/explore_hub/companies/listed/Add.vue?e393"],"sourcesContent":["<script setup>\r\n\r\nimport {useRouter} from \"vue-router\";\r\nimport {onMounted, ref, computed} from \"vue\";\r\nimport api from \"@/services/api\";\r\nimport {apiRoutes} from \"@/services/apiRoutes\";\r\nimport {useStore} from \"vuex\";\r\nimport CloseButton from \"@/components/CloseButton.vue\";\r\nimport { VueTelInput } from 'vue-tel-input';\r\nimport 'vue-tel-input/vue-tel-input.css';\r\nimport {AwesomeSocialButton} from \"awesome-social-button\";\r\nimport {startCase} from \"lodash-es\";\r\nimport {isSmallScreen, socialPlatforms} from \"@/services/Helpers\";\r\n\r\n/* ------------------------------\r\n* Variables & Properties\r\n* ------------------------------\r\n* */\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\nconst company = ref({\r\n    name:\"\",\r\n    description:\"\",\r\n    contact_name:\"\",\r\n    contact_phone:\"\",\r\n    email:\"\",\r\n    about:\"\",\r\n});\r\nconst addedSocials = ref([]);\r\nconst newSocialHandle = ref({platform:\"\", link:\"\"});\r\n\r\nlet logoUpload = ref(null);\r\nlet logoFile = ref(null);\r\nconst isLoading = ref(false);\r\nconst isAddingSocialHandles = ref(false);\r\nlet aboutQuillEditor = ref(null);\r\n\r\n\r\n/* ------------------------------\r\n* Computed Properties\r\n* ------------------------------\r\n* */\r\nconst availableSocials = computed(()=>{\r\n    //get socials already added to the company\r\n    let alreadyAddedSocials = addedSocials.value.map(entry => entry.platform);\r\n    return socialPlatforms.filter(entry => !alreadyAddedSocials.includes(entry));\r\n});\r\n\r\n\r\n\r\n/* ------------------------------\r\n* Lifecycle Hooks\r\n* ------------------------------\r\n* */\r\nonMounted(()=>{\r\n    aboutQuillEditor = new Quill('#addCompanyAboutEditor', {\r\n        theme: 'snow',\r\n        placeholder: 'Enter company about here'\r\n    });\r\n});\r\n\r\n/* ------------------------------\r\n* Methods & functions\r\n* ------------------------------\r\n* */\r\nfunction processUpload(event){\r\n    logoUpload.value = event.target.files[0];\r\n\r\n    const file = event.target.files[0];\r\n    const reader = new FileReader();\r\n\r\n    reader.onload = (e) => {\r\n        logoFile.value = e.target.result;\r\n    };\r\n    reader.readAsDataURL(file);\r\n}\r\nfunction removeUpload(){\r\n    logoUpload.value = null;\r\n    logoFile.value = null;\r\n    $(\"#companyLogo\").val(\"\");\r\n}\r\nfunction addSocial(){\r\n    //add new social to company list of socials\r\n    addedSocials.value.push({\r\n        platform: newSocialHandle.value.platform,\r\n        link: newSocialHandle.value.link\r\n    });\r\n    //reset new social handle details\r\n    newSocialHandle.value = {platform: \"\", link: \"\"};\r\n}\r\nfunction submit(){\r\n    //validate that company about is provided\r\n    let about = aboutQuillEditor.getSemanticHTML();\r\n    if(!about || !about.toString().length || about == \"<p></p>\") {\r\n        return $.growl.warning({message: \"Please enter the company's bio\"})\r\n    }\r\n    company.value['about'] = about;\r\n\r\n    //validate that phone number is entered\r\n    if(!company.value.contact_phone || !company.value.contact_phone.toString().length) {\r\n        return $.growl.warning({message: \"Please enter contact phone\"})\r\n    }\r\n\r\n    //prepare request payload\r\n    let payload = new FormData();\r\n    //add all company details to the form data\r\n    Object.keys(company.value)\r\n            .forEach(key => {\r\n                let value = company.value[key];\r\n                if(key == 'contact_phone') value = value.toString().replaceAll(\" \", \"\");\r\n                payload.append(key, value)\r\n            });\r\n\r\n    //add logo to payload\r\n    payload.append('company_logo', logoUpload.value);\r\n\r\n    //where company socials are specified, add them to form data\r\n    if(addedSocials.value.length){\r\n        addedSocials.value.forEach((social, index) => {\r\n            payload.append(`socials[${index}][platform]`, social.platform);\r\n            payload.append(`socials[${index}][link]`, social.link);\r\n        });\r\n    }\r\n\r\n    //SHOW LOADER\r\n    isLoading.value = true;\r\n\r\n    //make api call\r\n    api.post(apiRoutes.ADD_EXPLORE_LISTED_COMPANY, payload)\r\n            .then(response => {\r\n                //show success response\r\n                $.growl.notice({message: response.data.message});\r\n\r\n                //get a copy of current companies list\r\n                let companies = JSON.parse(JSON.stringify(store.state.exploreHub.companies));\r\n                //add the new company to the copy\r\n                companies.unshift(response.data.data);\r\n                //overwrite the vuex companies list with the updated copy\r\n                store.commit('exploreHub/STORE_EXPLORE_LISTED_COMPANIES', companies)\r\n\r\n                //DISMISS LOADER\r\n                isLoading.value = false;\r\n\r\n                //navigate back to companies list\r\n                router.back();\r\n            })\r\n            .catch(error => isLoading.value = false);\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n\r\n    <div class=\"col-sm-12 mb-3 d-inline-flex align-items-center justify-content-between\">\r\n        <h6 class=\"fw-bold mb-0\" style=\"margin-left: 20px;\">Add a new Company</h6>\r\n        <close-button></close-button>\r\n    </div>\r\n\r\n    <form @submit.prevent=\"submit\" v-loading=\"isLoading\">\r\n        <div class=\"row\">\r\n            <div class=\"col-md-6\">\r\n                <!-- Logo -->\r\n                <div class=\"col-md-10 m-b-20\">\r\n                    <div class=\"form-floating\">\r\n                        <input type=\"text\" class=\"form-control\" id=\"companyName\"\r\n                               placeholder=\"Company Name\" v-model=\"company.name\" required>\r\n                        <label for=\"companyName\">Company Name</label>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Tagline -->\r\n                <div class=\"col-md-10 m-b-20\">\r\n                    <div class=\"form-floating\">\r\n                        <input type=\"text\" class=\"form-control\" id=\"companyTagline\"\r\n                               placeholder=\"Tagline\" v-model=\"company.description\" required>\r\n                        <label for=\"companyTagline\">Tagline</label>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Contact Person -->\r\n                <div class=\"col-md-10 m-b-20\">\r\n                    <div class=\"form-floating\">\r\n                        <input type=\"text\" class=\"form-control\" id=\"companyContactPerson\"\r\n                               placeholder=\"Company Person\" v-model=\"company.contact_name\" required>\r\n                        <label for=\"companyContactPerson\">Contact Person</label>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Contact Phone -->\r\n                <div class=\"col-md-10 m-b-20\">\r\n                    <small class=\"text-muted\">Contact Phone</small>\r\n                    <vue-tel-input\r\n                            v-model=\"company.contact_phone\"\r\n                            mode=\"international\"></vue-tel-input>\r\n                </div>\r\n\r\n                <!-- Contact Email -->\r\n                <div class=\"col-md-10 m-b-20\">\r\n                    <div class=\"form-floating\">\r\n                        <input type=\"email\" class=\"form-control\" id=\"companyContactEmail\"\r\n                               placeholder=\"Email\" v-model=\"company.email\" required>\r\n                        <label for=\"companyContactEmail\">Email</label>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- About -->\r\n                <div class=\"col-md-10 m-b-20\">\r\n                    <h6>Company's Bio (About)</h6>\r\n\r\n                    <!-- Quill Editor Default -->\r\n                    <div id=\"addCompanyAboutEditor\" class=\"quill-editor-default\">\r\n                    </div>\r\n                    <!-- End Quill Editor Default -->\r\n                </div>\r\n            </div>\r\n            <div class=\"col-md-6\">\r\n                <!-- Logo -->\r\n                <div class=\"col-md-10 m-b-20\">\r\n                    <div class=\"form-floating\">\r\n                        <input type=\"file\" class=\"form-control\" id=\"companyLogo\" @change=\"processUpload\" accept=\".png,.jpg,.jpeg,.gif\">\r\n                        <label for=\"companyLogo\">Company Logo</label>\r\n                    </div>\r\n\r\n                    <div class=\"d-flex flex-wrap m-t-10\" v-if=\"logoFile\">\r\n                        <div class=\"p-1 uploaded-image\">\r\n                            <img :src=\"logoFile\"  style=\"max-width:80px;max-height:60px;\">\r\n                            <div class=\"remover\" @click=\"removeUpload\">\r\n                                <i class=\"ri ri-close-line\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Socials -->\r\n                <div class=\"col-md-10 m-b-20\">\r\n                    <h6>Social Media Handles</h6>\r\n                    <div class=\"d-inline-flex align-items-center flex-wrap\">\r\n                        <div v-if=\"addedSocials.length\" class=\"d-inline-flex\">\r\n                            <div class=\"p-1\"\r\n                                 v-for=\"(social, index) in addedSocials\" :key=\"'form-current-socials-'+index\">\r\n                                <AwesomeSocialButton\r\n                                        :type=\"social.platform\"\r\n                                        :link=\"{src: social.link}\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <el-button @click=\"isAddingSocialHandles = !isAddingSocialHandles\" size=\"small\" round>\r\n                            <i class=\"ri ri-add-line\" v-if=\"!addedSocials.length\"></i>{{ addedSocials.length ? \"Click to edit\" : \"Click to add\" }}\r\n                        </el-button>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n        <hr>\r\n        <div class=\"modal-footer\">\r\n            <button class=\"btn btn-primary\" type=\"submit\">Add Company</button>\r\n            &nbsp;\r\n            <button @click=\"router.back()\" class=\"btn btn-secondary\" type=\"button\">Cancel</button>\r\n        </div>\r\n    </form>\r\n\r\n    <!-- Modal to add company socials -->\r\n    <el-dialog\r\n            :fullscreen=\"isSmallScreen\"\r\n            v-model=\"isAddingSocialHandles\">\r\n        <div class=\"row\" v-if=\"addedSocials.length\">\r\n            <h6 class=\"fw-bold\">\r\n                <small class=\"text-muted\">Currently added</small>\r\n            </h6>\r\n            <small class=\"text-muted text-italic\">Click to remove</small>\r\n            <div class=\"d-inline-flex\">\r\n                <div class=\"p-1\" @click=\"addedSocials.splice(index,1)\"\r\n                     v-for=\"(social, index) in addedSocials\" :key=\"'current-socials-'+index\">\r\n                    <AwesomeSocialButton\r\n                            :type=\"social.platform\"\r\n                            :link=\"{src: '#'}\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <br>\r\n        <div class=\"row\">\r\n            <h6 class=\"fw-bold\" v-if=\"addedSocials.length\">\r\n                <small class=\"text-muted\">Add more here</small>\r\n            </h6>\r\n            <div class=\"p-l-20\">\r\n                <form @submit.prevent=\"addSocial\">\r\n                    <small>Select Platform</small>\r\n                    <br>\r\n                    <div class=\"d-inline-flex flex-wrap\">\r\n                        <div class=\"p-1\" @click=\"newSocialHandle.platform = social\"\r\n                             v-for=\"(social, index) in availableSocials\" :key=\"'to-add-social'+index\">\r\n                            <template v-if=\"newSocialHandle.platform == social\">\r\n                                <el-badge value=\"✓\" class=\"item\" type=\"primary\">\r\n                                    <AwesomeSocialButton\r\n                                            :type=\"social\"\r\n                                            :link=\"{src: '#'}\"\r\n                                    />\r\n                                </el-badge>\r\n                            </template>\r\n                            <template v-else>\r\n                                <AwesomeSocialButton\r\n                                        :type=\"social\"\r\n                                        :link=\"{src: '#'}\"\r\n                                />\r\n                            </template>\r\n                        </div>\r\n                    </div>\r\n                    <br><br>\r\n                    <div class=\"col-md-6\" v-if=\"newSocialHandle.platform.length\">\r\n                        <div class=\"input-group mb-3\">\r\n                            <div class=\"form-floating\">\r\n                                <input type=\"url\" class=\"form-control\" id=\"newSocialLink\"\r\n                                       placeholder=\"Tagline\" v-model=\"newSocialHandle.link\" required>\r\n                                <label for=\"newSocialLink\">Enter {{ startCase(newSocialHandle.platform) }} Link here</label>\r\n                            </div>\r\n                            <span class=\"input-group-text\" id=\"basic-addon2\">\r\n                                <el-button native-type=\"submit\" link>Add</el-button>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            <div class=\"col-sm-12 d-flex justify-content-end\">\r\n                <el-button type=\"info\" @click=\"isAddingSocialHandles = !isAddingSocialHandles\" plain>Done</el-button>\r\n            </div>\r\n        </div>\r\n    </el-dialog>\r\n\r\n</template>\r\n\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./Add.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Add.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["router","useRouter","store","useStore","company","ref","name","description","contact_name","contact_phone","email","about","addedSocials","newSocialHandle","platform","link","logoUpload","logoFile","isLoading","isAddingSocialHandles","aboutQuillEditor","availableSocials","computed","alreadyAddedSocials","value","map","entry","socialPlatforms","filter","includes","processUpload","event","target","files","file","reader","FileReader","onload","e","result","readAsDataURL","removeUpload","$","val","addSocial","push","submit","getSemanticHTML","toString","length","growl","warning","message","payload","FormData","Object","keys","forEach","key","replaceAll","append","social","index","api","post","apiRoutes","ADD_EXPLORE_LISTED_COMPANY","then","response","notice","data","companies","JSON","parse","stringify","state","exploreHub","unshift","commit","back","catch","error","onMounted","Quill","theme","placeholder","__exports__"],"sourceRoot":""}