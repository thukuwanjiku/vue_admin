"use strict";(self["webpackChunkmyzola_admin"]=self["webpackChunkmyzola_admin"]||[]).push([[100],{6630:function(e,l,a){a.r(l),a.d(l,{default:function(){return he}});a(4114);var t=a(6768),n=a(144),i=a(4232),u=a(5130),d=a(6133),o=a(782),s=a(7021),r=a(7676),c=a(5015),m=a(7477),v=a(4373),p=a(1219),f=a(4300),g=a(7190),k=a(1387);const b=e=>((0,t.Qi)("data-v-52b28b30"),e=e(),(0,t.jt)(),e),y={class:"row"},_={class:"col-sm-12 mb-3 d-inline-flex align-items-center justify-content-between"},h=b((()=>(0,t.Lk)("h5",{class:"fw-bold mb-0",style:{"margin-left":"20px"}},"Edit Listing",-1))),L={class:"row"},F={class:"col-md-6"},x={class:"col-md-10 m-b-20"},C={class:"col-md-10 m-b-20"},W={class:"form-floating"},w={class:"col-md-10 m-b-20"},E={class:"form-floating"},V=["src"],R={class:"col-md-10 m-b-20"},A={class:"form-floating"},S={class:"material-symbols-outlined"},P={class:"col-md-10 m-b-20"},K={class:"form-floating"},X=b((()=>(0,t.Lk)("br",null,null,-1))),M={class:"d-flex flex-wrap"},Y=["src"],z=["onClick"],I=b((()=>(0,t.Lk)("i",{class:"ri ri-close-line"},null,-1))),D=[I],N={class:"col-md-6"},U={class:"col-md-10 m-b-20"},T=b((()=>(0,t.Lk)("div",{id:"descriptionEditor",class:"quill-editor-default"},null,-1))),H={class:"col-md-10 m-b-20"},O={class:"form-floating"},J={class:"col-md-10 m-b-20"},Q={class:"form-floating"},j={class:"col-md-10 m-b-20"},G={class:"form-floating"},q={class:"col-sm-12 d-flex flex-wrap align-items-center"},B=b((()=>(0,t.Lk)("div",{class:"d-flex align-items-center"},[(0,t.Lk)("i",{class:"bi bi-circle big-dot m-l-3 m-r-3",style:{background:"grey","font-size":"4px"}})],-1))),Z=["onClick"],ee=b((()=>(0,t.Lk)("i",{class:"ri ri-close-line fs-18"},null,-1))),le=[ee],ae=b((()=>(0,t.Lk)("hr",{class:"m-0"},null,-1))),te={class:"modal-footer m-t-10"},ne={class:"col-md-12 m-b-20"},ie={class:"col-md-12 m-t-10 d-flex flex-wrap"},ue=["onClick"],de={class:"col-md-12 d-flex align-items-center"},oe=["src"],se={class:"m-0"},re={class:"selected_indicator"},ce=b((()=>(0,t.Lk)("i",{class:"ri ri-check-line"},null,-1))),me=[ce],ve={class:"row"},pe={class:"col-md-6"},fe={class:"col-md-6"},ge=b((()=>(0,t.Lk)("br",null,null,-1))),ke={class:"col-md-12"};var be={__name:"Edit",setup(e){const l=(0,o.Pj)(),b=(0,k.rd)(),I=(0,n.KR)(!1),ee=(0,n.KR)({}),ce=(0,n.KR)(["for_you","featured","exclusive"]);let be=(0,n.KR)(null);const ye=(0,n.KR)([]),_e=(0,n.KR)([]),he=(0,n.KR)(!1),Le=(0,n.KR)([]),Fe=(0,n.KR)({mode:null,amount:null,reference:null}),xe=(0,n.KR)([]);let Ce=(0,t.EW)((()=>l.state.exploreHub.companies)),We=(0,t.EW)((()=>l.state.exploreHub.listingCategories));function we(){v.A.get("/assets/PaymentModes.json").then((e=>Le.value=e.data.map((e=>(e.image=a(1707)(`./${e.image}`),e)))))}function Ee(e){const l=e.target.files;for(let a=0;a<l.length;a++){const e=l[a],t=new FileReader;t.onload=l=>{ye.value.push({name:e.name,url:l.target.result}),_e.value.push(e)},t.readAsDataURL(e)}$("#listingMedia").val("")}function Ve(e){ye.value.splice(e,1),_e.value.splice(e,1)}function Re(){return Fe.value.mode&&Fe.value.mode.length?Fe.value.amount&&Fe.value.amount.toString().length?isNaN(Fe.value.amount)?p.nk.warning("Please enter a valid amount"):null!=Fe.value.reference&&Fe.value.reference.length&&xe.value.find((e=>e.reference.toString().toLowerCase()==Fe.value.reference.toString().toLowerCase()))?p.nk.warning("Reference code has already been used"):(xe.value.push(JSON.parse(JSON.stringify(Fe.value))),Fe.value={mode:null,amount:null,reference:null},void(he.value=!1)):p.nk.warning("Please enter the payment amount"):p.nk.warning("Please select a payment mode")}function Ae(){if(!ee.value.title||!ee.value.title.length)return p.nk.warning("Please enter title");if(!ee.value.placement||!ee.value.placement.length)return p.nk.warning("Please select listing placement");if(!ee.value.company_id||!ee.value.company_id.toString().length)return p.nk.warning("Please select the company");if(!ee.value.category_id||!ee.value.category_id.toString().length)return p.nk.warning("Please select the category");let e=be.getSemanticHTML();if(!e||!e.toString().length||"<p></p>"==e)return p.nk.warning("Please enter the listing description");if(!ee.value.start_at||!ee.value.start_at.length)return p.nk.warning("Please select start date");if(!ee.value.end_at||!ee.value.end_at.length)return p.nk.warning("Please select end date");ee.value.description=e;let a=new FormData,t=["id","title","placement","company_id","category_id","description","start_at","end_at"];if(t.forEach((e=>a.append(e,ee.value[e]))),_e.value.length)for(let l=0;l<_e.value.length;l++)a.append(`media[${l}]`,_e.value[l]);if(xe.value.length)for(let l=0;l<xe.value.length;l++)a.append(`payments[${l}][amount]`,xe.value[l].amount),a.append(`payments[${l}][mode]`,xe.value[l].mode),a.append(`payments[${l}][reference]`,xe.value[l].reference);I.value=!0,f.A.post(g.pe.EXPLORE_HUB_EDIT_LISTING,a).then((e=>{$.growl.notice({message:e.data.message});let a=JSON.parse(JSON.stringify(l.state.exploreHub.activeListings)),t=a.findIndex((e=>e.id==ee.value.id));t>-1&&(a[t]=e.data.data,l.commit("exploreHub/STORE_ACTIVE_LISTINGS",a)),I.value=!1,b.back()})).catch((e=>I.value=!1))}return(0,t.sV)((()=>{ee.value=JSON.parse(JSON.stringify(l.state.exploreHub.editListing)),Ce.value.length||(0,s.k1)(),We.value.length||(0,s.HC)(),we(),$("#descriptionEditor").html(ee.value.description),be=new Quill("#descriptionEditor",{theme:"snow",placeholder:"Enter listing body here"})})),(e,l)=>{const a=(0,t.g2)("el-input"),o=(0,t.g2)("el-tag"),v=(0,t.g2)("el-option"),p=(0,t.g2)("el-select"),f=(0,t.g2)("el-date-picker"),g=(0,t.g2)("el-button"),k=(0,t.g2)("el-dialog"),b=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bo)(((0,t.uX)(),(0,t.CE)("div",y,[(0,t.Lk)("div",_,[h,(0,t.bF)(d.A)]),(0,t.Lk)("div",L,[(0,t.Lk)("div",F,[(0,t.Lk)("div",x,[(0,t.bF)(r.A,null,{default:(0,t.k6)((()=>[(0,t.eW)("Title")])),_:1}),(0,t.bF)(a,{placeholder:"Enter listing title here",size:"large",modelValue:ee.value.title,"onUpdate:modelValue":l[0]||(l[0]=e=>ee.value.title=e)},null,8,["modelValue"])]),(0,t.Lk)("div",C,[(0,t.Lk)("div",W,[(0,t.bF)(r.A,null,{default:(0,t.k6)((()=>[(0,t.eW)("Placement")])),_:1}),(0,t.bF)(p,{placeholder:"Select Placement",size:"large",modelValue:ee.value.placement,"onUpdate:modelValue":l[1]||(l[1]=e=>ee.value.placement=e)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ce.value,(e=>((0,t.uX)(),(0,t.Wv)(v,{key:"create-listing-placement-"+e,label:(0,n.R1)(c.A)(e),value:e},{default:(0,t.k6)((()=>["for_you"==e?((0,t.uX)(),(0,t.Wv)(o,{key:0,type:"success",effect:"light",round:"",size:"small"},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)((0,n.R1)(c.A)(e)),1)])),_:2},1024)):(0,t.Q3)("",!0),"featured"==e?((0,t.uX)(),(0,t.Wv)(o,{key:1,type:"primary",effect:"light",round:"",size:"small"},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)((0,n.R1)(c.A)(e)),1)])),_:2},1024)):(0,t.Q3)("",!0),"exclusive"==e?((0,t.uX)(),(0,t.Wv)(o,{key:2,type:"warning",effect:"light",round:"",size:"small"},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)((0,n.R1)(c.A)(e)),1)])),_:2},1024)):(0,t.Q3)("",!0)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),(0,t.Lk)("div",w,[(0,t.Lk)("div",E,[(0,t.bF)(r.A,null,{default:(0,t.k6)((()=>[(0,t.eW)("Company")])),_:1}),(0,t.bF)(p,{modelValue:ee.value.company_id,"onUpdate:modelValue":l[2]||(l[2]=e=>ee.value.company_id=e),placeholder:"Select Company",size:"large",filterable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,n.R1)(Ce),(e=>((0,t.uX)(),(0,t.Wv)(v,{key:"create-listing-company-"+e.id,label:e.name,value:e.id},{default:(0,t.k6)((()=>[(0,t.Lk)("img",{src:e.logo,style:{"max-width":"30px","max-height":"20px","border-radius":"10px"}},null,8,V),(0,t.eW)("  "+(0,i.v_)(e.name),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),(0,t.Lk)("div",R,[(0,t.Lk)("div",A,[(0,t.bF)(r.A,null,{default:(0,t.k6)((()=>[(0,t.eW)("Category")])),_:1}),(0,t.bF)(p,{modelValue:ee.value.category_id,"onUpdate:modelValue":l[3]||(l[3]=e=>ee.value.category_id=e),placeholder:"Select Category",size:"large",filterable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,n.R1)(We),(e=>((0,t.uX)(),(0,t.Wv)(v,{key:"create-listing-category-"+e.name,label:e.name,value:e.id},{default:(0,t.k6)((()=>[(0,t.Lk)("span",S,(0,i.v_)(e.icon),1),(0,t.eW)("   "+(0,i.v_)(e.name),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),(0,t.Lk)("div",P,[(0,t.Lk)("div",K,[(0,t.bF)(r.A,null,{default:(0,t.k6)((()=>[(0,t.eW)("Media")])),_:1}),(0,t.Lk)("input",{type:"file",multiple:"",class:"form-control",id:"listingMedia",onChange:Ee},null,32),X,(0,t.Lk)("div",M,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ye.value,((e,l)=>((0,t.uX)(),(0,t.CE)("div",{class:"p-1 uploaded-image",key:"uploaded-media-"+l},[(0,t.Lk)("img",{src:e.url,style:{"max-width":"80px","max-height":"60px"}},null,8,Y),(0,t.Lk)("div",{class:"remover",onClick:e=>Ve(l)},D,8,z)])))),128))])])])]),(0,t.Lk)("div",N,[(0,t.Lk)("div",U,[(0,t.bF)(r.A,null,{default:(0,t.k6)((()=>[(0,t.eW)("Description")])),_:1}),T]),(0,t.Lk)("div",H,[(0,t.Lk)("div",O,[(0,t.bF)(r.A,null,{default:(0,t.k6)((()=>[(0,t.eW)("Runs from")])),_:1}),(0,t.bF)(f,{modelValue:ee.value.start_at,"onUpdate:modelValue":l[4]||(l[4]=e=>ee.value.start_at=e),type:"date","value-format":"YYYY-MM-DD",format:"MMM D, YYYY",placeholder:"Start Date",size:"large"},null,8,["modelValue"])])]),(0,t.Lk)("div",J,[(0,t.Lk)("div",Q,[(0,t.bF)(r.A,null,{default:(0,t.k6)((()=>[(0,t.eW)("To")])),_:1}),(0,t.bF)(f,{modelValue:ee.value.end_at,"onUpdate:modelValue":l[5]||(l[5]=e=>ee.value.end_at=e),type:"date","value-format":"YYYY-MM-DD",format:"MMM D, YYYY",placeholder:"End Date",size:"large"},null,8,["modelValue"])])]),(0,t.Lk)("div",j,[(0,t.Lk)("div",G,[(0,t.bF)(r.A,null,{default:(0,t.k6)((()=>[(0,t.eW)("Payments")])),_:1}),(0,t.Lk)("div",q,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(xe.value,((e,l)=>((0,t.uX)(),(0,t.CE)("div",{class:"payment d-flex align-items-center",key:"all-payment-modes-"+l,style:{padding:"0 10px"}},[(0,t.Lk)("small",null,(0,i.v_)((0,n.R1)(c.A)(e.mode)),1),(0,t.eW)("   "),B,(0,t.eW)("   "),(0,t.Lk)("small",null,"KES "+(0,i.v_)((0,n.R1)(s.RL)(e.amount)),1),(0,t.Lk)("div",{class:"m-l-20 d-flex align-items-center hov-pointer",onClick:e=>xe.value.splice(l,1)},le,8,Z)])))),128)),(0,t.eW)("    "),(0,t.bF)(g,{onClick:l[6]||(l[6]=e=>he.value=!he.value),icon:(0,n.R1)(m.FWt),round:""},{default:(0,t.k6)((()=>[(0,t.eW)(" Add payment ")])),_:1},8,["icon"])])])])])]),ae,(0,t.Lk)("div",te,[(0,t.bF)(g,{size:"large",type:"primary",onClick:Ae},{default:(0,t.k6)((()=>[(0,t.eW)("Save Edits")])),_:1}),(0,t.bF)(g,{size:"large",type:"info"},{default:(0,t.k6)((()=>[(0,t.eW)("Cancel")])),_:1})])])),[[b,I.value]]),(0,t.bF)(k,{width:"45%",modelValue:he.value,"onUpdate:modelValue":l[9]||(l[9]=e=>he.value=e)},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ne,[(0,t.bF)(r.A,null,{default:(0,t.k6)((()=>[(0,t.eW)("Select Payment Mode")])),_:1}),(0,t.Lk)("div",ie,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Le.value,(e=>((0,t.uX)(),(0,t.CE)("div",{class:(0,i.C4)(["p-1 payment-mode hov-pointer",{selected:e.name==Fe.value.mode}]),key:"all-payment-modes-"+e.name,onClick:l=>Fe.value.mode=e.name},[(0,t.Lk)("div",de,[(0,t.Lk)("img",{src:e.image,style:{"max-width":"40px","max-height":"20px"}},null,8,oe),(0,t.eW)("    "),(0,t.Lk)("h6",se,(0,i.v_)((0,n.R1)(c.A)(e.name)),1)]),(0,t.bo)((0,t.Lk)("div",re,me,512),[[u.aG,Fe.value.mode==e.name]])],10,ue)))),128))])]),(0,t.Lk)("div",ve,[(0,t.Lk)("div",pe,[(0,t.bF)(r.A,null,{default:(0,t.k6)((()=>[(0,t.eW)("Payment Amount")])),_:1}),(0,t.bF)(a,{placeholder:"Enter payment amount",modelValue:Fe.value.amount,"onUpdate:modelValue":l[7]||(l[7]=e=>Fe.value.amount=e)},null,8,["modelValue"])]),(0,t.Lk)("div",fe,[(0,t.bF)(r.A,null,{default:(0,t.k6)((()=>[(0,t.eW)("Transaction Reference")])),_:1}),(0,t.bF)(a,{placeholder:"Enter reference code",modelValue:Fe.value.reference,"onUpdate:modelValue":l[8]||(l[8]=e=>Fe.value.reference=e)},null,8,["modelValue"])])]),ge,(0,t.Lk)("div",ke,[(0,t.bF)(g,{type:"primary",onClick:Re},{default:(0,t.k6)((()=>[(0,t.eW)("Add Payment")])),_:1})])])),_:1},8,["modelValue"])],64)}}},ye=a(1241);const _e=(0,ye.A)(be,[["__scopeId","data-v-52b28b30"]]);var he=_e}}]);
//# sourceMappingURL=100.js.map