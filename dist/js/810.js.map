{"version":3,"file":"js/810.js","mappings":"46DAuBA,MAAMA,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MAERC,GAAYC,EAAAA,EAAAA,KAAI,GAChBC,GAAOD,EAAAA,EAAAA,IAAI,IACXE,GAAWF,EAAAA,EAAAA,IAAI,IACfG,GAAuBH,EAAAA,EAAAA,IAAI,IAC3BI,GAAoBJ,EAAAA,EAAAA,KAAI,GACxBK,GAAeL,EAAAA,EAAAA,KAAI,GACnBM,GAAgCN,EAAAA,EAAAA,KAAI,GACpCO,GAA2BP,EAAAA,EAAAA,KAAI,GAE/BQ,GAAsBR,EAAAA,EAAAA,IAAI,IAiBhC,SAASS,IAELV,EAAUW,OAAQ,EAElBC,EAAAA,EAAIC,KAAKC,EAAAA,GAAUC,sBAAuB,CAACC,MAAOtB,EAAMuB,OAAOD,QAEtDE,MAAKC,IAEFV,EAAoBE,MAAQQ,EAASC,KAAKC,MAAQ,QAAU,UAG5DrB,EAAUW,OAAQ,CAAK,IAE1BW,OAAMC,GAASvB,EAAUW,OAAQ,GAC9C,CACA,SAASa,IAEL,GAAGrB,EAASQ,QAAUP,EAAqBO,MACvC,OAAOc,EAAAA,GAAUC,QAAQ,wCAG7B1B,EAAUW,OAAQ,EAGlB,IAAIgB,EAAU,CACVX,MAAOtB,EAAMuB,OAAOD,MACpBd,KAAMA,EAAKS,MAAMiB,OACjBzB,SAAUA,EAASQ,MAAMiB,OACzBC,sBAAuBzB,EAAqBO,MAAMiB,QAItDhB,EAAAA,EAAIC,KAAKC,EAAAA,GAAUgB,cAAeH,GACzBT,MAAKC,IAEFY,EAAEC,MAAMC,OAAO,CAACC,QAASf,EAASC,KAAKc,UAGvCpC,EAAMqC,OAAO,wBAAyBhB,EAASC,KAAKJ,OAEpDlB,EAAMqC,OAAO,uBAAwBhB,EAASC,KAAKgB,MAEnDtC,EAAMqC,OAAO,yBAA0BhB,EAASC,KAAKiB,aAGrDrC,EAAUW,OAAQ,EAGlBb,EAAMqC,OAAO,mBAGbvC,EAAO0C,QAAQ,CAAEpC,KAAM,eAGvBqC,EAAAA,EAAAA,IAAmB,IAEtBjB,OAAMC,GAASvB,EAAUW,OAAQ,GAC9C,C,OAnEA6B,EAAAA,EAAAA,KAAU,KAEN9B,GAAe,I,wvDCvCnB,MAAM+B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://myzola-admin/./src/views/access_control/UserInvite.vue","webpack://myzola-admin/./src/views/access_control/UserInvite.vue?aef5"],"sourcesContent":["<script setup>\r\n\r\nimport {onMounted, ref} from \"vue\";\r\nimport api from \"@/services/api\";\r\nimport {apiRoutes} from \"@/services/apiRoutes\";\r\nimport {startIdleTracking} from \"@/services/idleAppLockTimer\";\r\nimport {useRoute, useRouter} from \"vue-router\";\r\nimport {ElMessage} from \"element-plus\";\r\nimport {useStore} from \"vuex\";\r\n\r\n/* --------------------------------\r\n* PROPS DEFINITION\r\n* ----------------------------\r\n* */\r\ndefineProps({\r\n    token: String\r\n})\r\n\r\n\r\n/* --------------------------------\r\n* Variables\r\n* ----------------------------\r\n* */\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\nconst isLoading = ref(false);\r\nconst name = ref(\"\");\r\nconst password = ref(\"\");\r\nconst passwordConfirmation = ref(\"\");\r\nconst isPasswordFocused = ref(false)\r\nconst showPassword = ref(false)\r\nconst isPasswordConfirmationFocused = ref(false)\r\nconst showPasswordConfirmation = ref(false)\r\n\r\nconst tokenValidityStatus = ref(\"\");\r\n\r\n\r\n/* --------------------------------\r\n* Variables\r\n* ----------------------------\r\n* */\r\nonMounted(()=>{\r\n    //validate token\r\n    validateToken();\r\n});\r\n\r\n\r\n/* --------------------------------\r\n* Methods\r\n* ----------------------------\r\n* */\r\nfunction validateToken(){\r\n    //show loader\r\n    isLoading.value = true;\r\n\r\n    api.post(apiRoutes.VALIDATE_INVITE_TOKEN, {token: route.params.token})\r\n            //call method to login user\r\n            .then(response => {\r\n                //set validity status\r\n                tokenValidityStatus.value = response.data.valid ? 'valid' : 'invalid';\r\n\r\n                //dismiss load\r\n                isLoading.value = false;\r\n            })\r\n            .catch(error => isLoading.value = false)\r\n}\r\nfunction acceptInvite(){\r\n    //check if passwords match\r\n    if(password.value !== passwordConfirmation.value)\r\n        return ElMessage.warning(\"Password confirmation does not match\");\r\n\r\n    //show loader\r\n    isLoading.value = true;\r\n\r\n    //prepare request payload\r\n    let payload = {\r\n        token: route.params.token,\r\n        name: name.value.trim(),\r\n        password: password.value.trim(),\r\n        password_confirmation: passwordConfirmation.value.trim()\r\n    }\r\n\r\n    //make api call\r\n    api.post(apiRoutes.ACCEPT_INVITE, payload)\r\n            .then(response => {\r\n                //show success message\r\n                $.growl.notice({message: response.data.message});\r\n\r\n                //store access token\r\n                store.commit('auth/STORE_AUTH_TOKEN', response.data.token);\r\n                //store user details\r\n                store.commit('auth/STORE_AUTH_USER', response.data.user)\r\n                //store user permissions\r\n                store.commit('auth/STORE_PERMISSIONS', response.data.permissions)\r\n\r\n                //dismiss loader\r\n                isLoading.value = false;\r\n\r\n                //set that the app is not locked\r\n                store.commit('auth/UNLOCK_APP');\r\n\r\n                //redirect user to dashboard\r\n                router.replace({ name: 'dashboard'}); //TODO Implement intended route logic\r\n\r\n                //start time for tracking idle time\r\n                startIdleTracking();\r\n            })\r\n            .catch(error => isLoading.value = false)\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n\r\n    <main>\r\n        <div class=\"container\">\r\n\r\n            <section class=\"section register min-vh-100 d-flex flex-column align-items-center justify-content-center py-4\">\r\n                <div class=\"container\">\r\n                    <div class=\"row justify-content-center\">\r\n                        <div class=\"col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center\">\r\n\r\n                            <div class=\"d-flex justify-content-center py-4\">\r\n                                <div class=\"logo d-flex align-items-center w-auto\">\r\n                                    <img src=\"@/assets/images/myzola_icon.png\" alt=\"\">\r\n                                    <span class=\"d-none d-lg-block\">MyZola Admin</span>\r\n                                </div>\r\n                            </div><!-- End Logo -->\r\n\r\n                            <div class=\"card mb-3\">\r\n\r\n                                <div class=\"card-body\" v-loading=\"isLoading\">\r\n\r\n                                    <template v-if=\"tokenValidityStatus == 'valid'\">\r\n                                        <div class=\"pt-4 pb-2\">\r\n                                            <h5 class=\"card-title text-center pb-0 fs-4\">Accept Invite</h5>\r\n                                            <p class=\"text-center small\">Enter your details below to accept invite and create account</p>\r\n                                        </div>\r\n                                        <form @submit.prevent=\"acceptInvite\" class=\"row g-3 needs-validation\">\r\n\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"form-floating\">\r\n                                                    <input type=\"text\" class=\"form-control\" id=\"name\"\r\n                                                           placeholder=\"Name\" v-model=\"name\" required>\r\n                                                    <label for=\"name\">Name</label>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"form-floating\">\r\n                                                    <input :type=\"showPassword ? 'text' : 'password'\"\r\n                                                           class=\"form-control\" id=\"password\"\r\n                                                           placeholder=\"Password\" v-model=\"password\"\r\n                                                           @focus=\"isPasswordFocused = true\"\r\n                                                           @blur=\"isPasswordFocused = false\"\r\n                                                           required>\r\n                                                    <label for=\"password\">Password</label>\r\n\r\n                                                    <i\r\n                                                            :class=\"showPassword ? 'bi bi-eye-slash-fill' : 'bi bi-eye-fill'\"\r\n                                                            @click=\"showPassword = !showPassword\"\r\n                                                            class=\"toggle-password\" v-if=\"password.length\"\r\n                                                    ></i>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"form-floating\">\r\n                                                    <input :type=\"showPasswordConfirmation ? 'text' : 'password'\"\r\n                                                           class=\"form-control\" id=\"passwordConfirmation\"\r\n                                                           placeholder=\"Password Confirmation\"\r\n                                                           v-model=\"passwordConfirmation\"\r\n                                                           @focus=\"isPasswordConfirmationFocused = true\"\r\n                                                           @blur=\"isPasswordConfirmationFocused = false\"\r\n                                                           required>\r\n                                                    <label for=\"passwordConfirmation\">Password</label>\r\n\r\n                                                    <i\r\n                                                            :class=\"showPasswordConfirmation ? 'bi bi-eye-slash-fill' : 'bi bi-eye-fill'\"\r\n                                                            @click=\"showPasswordConfirmation = !showPasswordConfirmation\"\r\n                                                            class=\"toggle-password\" v-if=\"passwordConfirmation.length\"\r\n                                                    ></i>\r\n                                                </div>\r\n                                            </div>\r\n\r\n\r\n                                            <div class=\"col-12\">\r\n                                                <button class=\"btn btn-primary w-100\" type=\"submit\">Accept Invite</button>\r\n                                            </div>\r\n                                        </form>\r\n                                    </template>\r\n\r\n                                    <template v-if=\"tokenValidityStatus == 'invalid'\">\r\n                                        <div class=\"row p-2\">\r\n\r\n                                            <div class=\"alert alert-danger bg-danger text-light border-0 alert-dismissible fade show\" role=\"alert\">\r\n                                                <i class=\"bx bx-error\"></i>\r\n                                                Token Invalid\r\n                                            </div>\r\n\r\n                                            <div class=\"col-md-12\">\r\n                                                The invite token is invalid.\r\n                                            </div>\r\n\r\n                                        </div>\r\n                                    </template>\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </section>\r\n\r\n        </div>\r\n    </main>\r\n\r\n</template>\r\n\r\n<style scoped>\r\n.toggle-password {\r\n    position: absolute;\r\n    top: 50%;\r\n    right: 15px;\r\n    transform: translateY(-50%);\r\n    cursor: pointer;\r\n    z-index: 2;\r\n    color: #b7b7b7;\r\n    font-size: 20px;\r\n}\r\n\r\n.form-floating input {\r\n    padding-right: 2.5rem; /* Adjust to make space for the icon */\r\n}\r\n</style>","import script from \"./UserInvite.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserInvite.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UserInvite.vue?vue&type=style&index=0&id=0cbbb59e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0cbbb59e\"]])\n\nexport default __exports__"],"names":["route","useRoute","router","useRouter","store","useStore","isLoading","ref","name","password","passwordConfirmation","isPasswordFocused","showPassword","isPasswordConfirmationFocused","showPasswordConfirmation","tokenValidityStatus","validateToken","value","api","post","apiRoutes","VALIDATE_INVITE_TOKEN","token","params","then","response","data","valid","catch","error","acceptInvite","ElMessage","warning","payload","trim","password_confirmation","ACCEPT_INVITE","$","growl","notice","message","commit","user","permissions","replace","startIdleTracking","onMounted","__exports__"],"sourceRoot":""}