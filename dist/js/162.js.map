{"version":3,"file":"js/162.js","mappings":"+iEAeA,MAAMA,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MAEd,IAAIC,IAAUC,EAAAA,EAAAA,IAAI,CAAC,GAEfC,IAAaD,EAAAA,EAAAA,IAAI,MACrB,MAAME,IAAYF,EAAAA,EAAAA,KAAI,GACtB,IAAIG,IAAmBH,EAAAA,EAAAA,IAAI,MAwB3B,SAASI,GAAcC,GACnBJ,GAAWK,MAAQD,EAAME,OAAOC,MAAM,EAC1C,CACA,SAASC,KAEL,IAAIC,EAAQP,GAAiBQ,kBAC7B,IAAID,IAAUA,EAAME,WAAWC,QAAmB,WAATH,EACrC,OAAOI,EAAEC,MAAMC,QAAQ,CAACC,QAAS,mCAKrC,GAHAlB,GAAQO,MAAM,SAAWI,GAGrBX,GAAQO,MAAMY,gBAAkBnB,GAAQO,MAAMY,cAAcN,WAAWC,OACvE,OAAOC,EAAEC,MAAMC,QAAQ,CAACC,QAAS,+BAIrC,IAAIE,EAAU,IAAIC,SAElBC,OAAOC,KAAKvB,GAAQO,OACXiB,SAAQC,IACL,IAAIlB,EAAQP,GAAQO,MAAMkB,GAChB,iBAAPA,IAAwBlB,EAAQA,EAAMM,WAAWa,WAAW,IAAK,KACpEN,EAAQO,OAAOF,EAAKlB,EAAM,IAIf,MAApBL,GAAWK,OAAea,EAAQO,OAAO,eAAgBzB,GAAWK,OAGvEJ,GAAUI,OAAQ,EAGlBqB,EAAAA,EAAIC,KAAKC,EAAAA,GAAUC,4BAA6BX,GACvCY,MAAKC,IAEFlB,EAAEC,MAAMkB,OAAO,CAAChB,QAASe,EAASE,KAAKjB,UAGvC,IAAIkB,EAAYC,KAAKC,MAAMD,KAAKE,UAAUzC,EAAM0C,MAAMC,QAAQL,YAG1DM,EAAYN,EAAUO,WAAUC,GAASA,EAAMC,IAAM7C,GAAQO,MAAM,QACpEmC,GAAa,IACZN,EAAUM,GAAaT,EAASE,KAAKA,MAIzCrC,EAAMgD,OAAO,yCAA0CV,GAGvDjC,GAAUI,OAAQ,EAGlBX,EAAOmD,MAAM,IAEhBC,OAAMC,GAAS9C,GAAUI,OAAQ,GAC9C,C,OA3EA2C,EAAAA,EAAAA,KAAU,KAENlD,GAAQO,MAAQ8B,KAAKC,MAAMD,KAAKE,UAAUzC,EAAM0C,MAAMC,QAAQU,cAG9DpC,EAAE,0BAA0BqC,KAAKpD,GAAQO,MAAM,UAG/CH,GAAmB,IAAIiD,MAAM,yBAA0B,CACnDC,MAAO,OACPC,YAAa,4BACf,I,i1DCpCN,MAAMC,GAAc,GAEpB,S","sources":["webpack://myzola-admin/./src/views/explore/companies/listed/Edit.vue","webpack://myzola-admin/./src/views/explore/companies/listed/Edit.vue?68cb"],"sourcesContent":["<script setup>\r\n\r\nimport {useRouter} from \"vue-router\";\r\nimport {onMounted, ref} from \"vue\";\r\nimport api from \"@/services/api\";\r\nimport {apiRoutes} from \"@/services/apiRoutes\";\r\nimport {useStore} from \"vuex\";\r\nimport BackButton from \"@/components/BackButton.vue\";\r\nimport { VueTelInput } from 'vue-tel-input';\r\nimport 'vue-tel-input/vue-tel-input.css';\r\n\r\n/* ------------------------------\r\n* Variables & Properties\r\n* ------------------------------\r\n* */\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\nlet company = ref({});\r\n\r\nlet logoUpload = ref(null);\r\nconst isLoading = ref(false);\r\nlet aboutQuillEditor = ref(null);\r\n\r\n/* ------------------------------\r\n* Lifecycle Hooks\r\n* ------------------------------\r\n* */\r\nonMounted(()=>{\r\n    //copy details of company being edited\r\n    company.value = JSON.parse(JSON.stringify(store.state.explore.editCompany));\r\n\r\n    //set the default content for the company's about\r\n    $(\"#addCompanyAboutEditor\").html(company.value[\"about\"]);\r\n\r\n    //initialize quill editor\r\n    aboutQuillEditor = new Quill('#addCompanyAboutEditor', {\r\n        theme: 'snow',\r\n        placeholder: 'Enter company about here'\r\n    });\r\n});\r\n\r\n/* ------------------------------\r\n* Methods & functions\r\n* ------------------------------\r\n* */\r\nfunction processUpload(event){\r\n    logoUpload.value = event.target.files[0];\r\n}\r\nfunction submit(){\r\n    //validate that company about is provided\r\n    let about = aboutQuillEditor.getSemanticHTML();\r\n    if(!about || !about.toString().length || about == \"<p></p>\") {\r\n        return $.growl.warning({message: \"Please enter the company's bio\"})\r\n    }\r\n    company.value['about'] = about;\r\n\r\n    //validate that phone number is entered\r\n    if(!company.value.contact_phone || !company.value.contact_phone.toString().length) {\r\n        return $.growl.warning({message: \"Please enter contact phone\"})\r\n    }\r\n\r\n    //prepare request payload\r\n    let payload = new FormData();\r\n    //add all company details to the form data\r\n    Object.keys(company.value)\r\n            .forEach(key => {\r\n                let value = company.value[key];\r\n                if(key == 'contact_phone') value = value.toString().replaceAll(\" \", \"\");\r\n                payload.append(key, value)\r\n            });\r\n\r\n    //add logo to payload, where necessary\r\n    if(logoUpload.value != null) payload.append('company_logo', logoUpload.value);\r\n\r\n    //SHOW LOADER\r\n    isLoading.value = true;\r\n\r\n    //make api call\r\n    api.post(apiRoutes.EDIT_EXPLORE_LISTED_COMPANY, payload)\r\n            .then(response => {\r\n                //show success response\r\n                $.growl.notice({message: response.data.message});\r\n\r\n                //get a copy of current companies list\r\n                let companies = JSON.parse(JSON.stringify(store.state.explore.companies));\r\n\r\n                //replace old company with updated company details\r\n                let editIndex = companies.findIndex(entry => entry.id == company.value[\"id\"]);\r\n                if(editIndex > -1){\r\n                    companies[editIndex] = response.data.data;\r\n                }\r\n\r\n                //overwrite the vuex companies list with the updated copy\r\n                store.commit('explore/STORE_EXPLORE_LISTED_COMPANIES', companies)\r\n\r\n                //DISMISS LOADER\r\n                isLoading.value = false;\r\n\r\n                //navigate back to companies list\r\n                router.back();\r\n            })\r\n            .catch(error => isLoading.value = false);\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n\r\n    <div class=\"col-sm-12\">\r\n        <back-button></back-button>\r\n    </div>\r\n\r\n    <br>\r\n\r\n    <form @submit.prevent=\"submit\" v-loading=\"isLoading\">\r\n        <h6 class=\"text-muted fw-bold\">Company Details</h6>\r\n        <div class=\"row\">\r\n            <div class=\"col-md-5\">\r\n                <div class=\"form-floating\">\r\n                    <input type=\"text\" class=\"form-control\" id=\"companyName\"\r\n                           placeholder=\"Company Name\" v-model=\"company.name\" required>\r\n                    <label for=\"companyName\">Company Name</label>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-md-1\">&nbsp;</div>\r\n            <div class=\"col-md-5\">\r\n                <div class=\"form-floating\">\r\n                    <input type=\"file\" class=\"form-control\" id=\"companyLogo\" @change=\"processUpload\">\r\n                    <label for=\"companyLogo\">Logo</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <br>\r\n        <div class=\"row\">\r\n            <div class=\"col-md-5\">\r\n                <div class=\"form-floating\">\r\n                    <input type=\"text\" class=\"form-control\" id=\"companyTagline\"\r\n                           placeholder=\"Tagline\" v-model=\"company.description\" required>\r\n                    <label for=\"companyTagline\">Tagline</label>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-md-1\">&nbsp;</div>\r\n            <div class=\"col-md-5\">\r\n                <h6>Social Media Handles</h6>\r\n                <small class=\"text-muted\">\r\n                    {-- Company social handles will be added here --}\r\n                </small>\r\n            </div>\r\n        </div>\r\n        <br>\r\n        <div class=\"row\">\r\n            <div class=\"col-md-5\">\r\n                <h6>Company's Bio (About)</h6>\r\n\r\n                <!-- Quill Editor Default -->\r\n                <div id=\"addCompanyAboutEditor\" class=\"quill-editor-default\"></div>\r\n                <!-- End Quill Editor Default -->\r\n            </div>\r\n        </div>\r\n\r\n        <br><br><br><br><br><br>\r\n\r\n        <h6 class=\"text-muted fw-bold\">Contact Details</h6>\r\n        <div class=\"row\">\r\n            <div class=\"col-md-5\">\r\n                <div class=\"form-floating\">\r\n                    <input type=\"text\" class=\"form-control\" id=\"companyContactPerson\"\r\n                           placeholder=\"Company Person\" v-model=\"company.contact_name\" required>\r\n                    <label for=\"companyContactPerson\">Contact Person</label>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-md-1\">&nbsp;</div>\r\n            <div class=\"col-md-5\">\r\n                <small class=\"text-muted\">Contact Phone</small>\r\n                <vue-tel-input\r\n                        v-model=\"company.contact_phone\"\r\n                        mode=\"international\"></vue-tel-input>\r\n            </div>\r\n        </div>\r\n        <br>\r\n        <div class=\"row\">\r\n            <div class=\"col-md-5\">\r\n                <div class=\"form-floating\">\r\n                    <input type=\"email\" class=\"form-control\" id=\"companyContactEmail\"\r\n                           placeholder=\"Email\" v-model=\"company.email\" required>\r\n                    <label for=\"companyContactEmail\">Email</label>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-md-1\">&nbsp;</div>\r\n        </div>\r\n\r\n        <hr>\r\n        <div class=\"modal-footer\">\r\n            <button class=\"btn btn-primary\" type=\"submit\">Submit</button>\r\n            &nbsp;\r\n            <button @click=\"router.back()\" class=\"btn btn-secondary\" type=\"button\">Cancel</button>\r\n        </div>\r\n    </form>\r\n\r\n</template>\r\n\r\n\r\n<style scoped>\r\n\r\n</style>","import script from \"./Edit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Edit.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["router","useRouter","store","useStore","company","ref","logoUpload","isLoading","aboutQuillEditor","processUpload","event","value","target","files","submit","about","getSemanticHTML","toString","length","$","growl","warning","message","contact_phone","payload","FormData","Object","keys","forEach","key","replaceAll","append","api","post","apiRoutes","EDIT_EXPLORE_LISTED_COMPANY","then","response","notice","data","companies","JSON","parse","stringify","state","explore","editIndex","findIndex","entry","id","commit","back","catch","error","onMounted","editCompany","html","Quill","theme","placeholder","__exports__"],"sourceRoot":""}