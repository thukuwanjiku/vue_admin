(self["webpackChunkmyzola_admin"]=self["webpackChunkmyzola_admin"]||[]).push([[98],{7676:function(e,l,a){"use strict";a.d(l,{A:function(){return d}});var n=a(6768);const t={class:"f-w-600"},u=(0,n.Lk)("br",null,null,-1);function i(e,l){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("small",t,[(0,n.RG)(e.$slots,"default")]),u],64)}var s=a(1241);const r={},o=(0,s.A)(r,[["render",i]]);var d=o},1568:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return Ke}});a(4114);var n=a(6768),t=a(144),u=a(4232),i=a(5130),s=a(6133),r=a(782),o=a(7021),d=a(7676),c=a(5015),m=a(7477),v=a(4373),p=a(1219),f=a(4300),k=a(7190),g=a(1387);const L={class:"row"},y={class:"col-sm-12 mb-3 d-inline-flex align-items-center justify-content-between"},h=(0,n.Lk)("h5",{class:"fw-bold mb-0",style:{"margin-left":"20px"}},"Create a new Listing",-1),_={class:"row"},b={class:"col-md-6"},w={class:"col-md-10 m-b-20"},C={class:"col-md-10 m-b-20"},x=(0,n.Lk)("div",{id:"descriptionEditor",class:"quill-editor-default"},null,-1),F={class:"col-md-10 m-b-20"},R={class:"form-floating"},W={class:"col-md-10 m-b-20"},A={class:"form-floating"},E=["src"],V={class:"col-md-10 m-b-20"},M={class:"form-floating"},P={class:"d-flex align-items-center"},S={class:"material-symbols-outlined"},K={class:"col-md-6"},X={class:"col-md-10 m-b-20"},D={class:"form-floating"},Y={class:"col-md-10 m-b-20"},I={class:"form-floating"},U={class:"col-md-10 m-b-20"},z={class:"form-floating"},T={class:"p-l-10"},O=(0,n.Lk)("small",null,"Primary Media",-1),N=(0,n.Lk)("br",null,null,-1),H={key:0,class:"d-flex flex-wrap m-t-5"},Q={class:"p-1 uploaded-image"},j=["src"],G=(0,n.Lk)("i",{class:"ri ri-close-line"},null,-1),q=[G],J={class:"p-l-10 m-t-10"},B=(0,n.Lk)("small",null,"Other Media",-1),Z=(0,n.Lk)("br",null,null,-1),ee={class:"d-flex flex-wrap m-t-5"},le=["src"],ae=["onClick"],ne=(0,n.Lk)("i",{class:"ri ri-close-line"},null,-1),te=[ne],ue={class:"col-md-10 m-b-20"},ie={class:"form-floating"},se={class:"col-sm-12 d-flex flex-wrap align-items-center"},re={class:"p-1"},oe=(0,n.Lk)("strong",null,"Amount",-1),de=(0,n.Lk)("br",null,null,-1),ce=(0,n.Lk)("strong",null,"Mode",-1),me=(0,n.Lk)("br",null,null,-1),ve=(0,n.Lk)("strong",null,"Reference",-1),pe=["onClick"],fe=(0,n.Lk)("i",{class:"ri ri-close-line"},null,-1),ke=[fe],ge=(0,n.Lk)("hr",{class:"m-0"},null,-1),Le={class:"modal-footer m-t-10"},ye={class:"col-md-12 m-b-20"},he={class:"col-md-12 m-t-10 d-flex flex-wrap"},_e=["onClick"],be={class:"col-md-12 d-flex align-items-center"},we=["src"],Ce={class:"m-0"},xe={class:"selected_indicator"},Fe=(0,n.Lk)("i",{class:"ri ri-check-line"},null,-1),Re=[Fe],We={class:"row"},Ae={class:"col-md-6"},Ee={class:"col-md-6"},Ve=(0,n.Lk)("br",null,null,-1),Me={class:"col-md-12"};var Pe={__name:"Add",setup(e){const l=(0,r.Pj)(),G=(0,g.rd)(),ne=(0,t.KR)(!1),fe=(0,t.KR)({title:null,placement:null,category_id:null,company_id:null,start_at:null,end_at:null,description:null}),Fe=(0,t.KR)(["for_you","featured","exclusive"]);let Pe=(0,t.KR)(null);const Se=(0,t.KR)(null),Ke=(0,t.KR)(null),Xe=(0,t.KR)([]),De=(0,t.KR)([]),Ye=(0,t.KR)(!1),Ie=(0,t.KR)([]),Ue=(0,t.KR)({mode:null,amount:null,reference:null}),ze=(0,t.KR)([]);let Te=(0,n.EW)((()=>l.state.exploreHub.companies)),Oe=(0,n.EW)((()=>l.state.exploreHub.listingCategories));function Ne(){v.A.get("/assets/PaymentModes.json").then((e=>Ie.value=e.data.map((e=>(e.image=a(1707)(`./${e.image}`),e)))))}function $e(e){const l=e.target.files[0],a=new FileReader;a.onload=e=>{Se.value=e.target.result,Ke.value=l},a.readAsDataURL(l),$("#primaryListingMedia").val("")}function He(e){const l=e.target.files;for(let a=0;a<l.length;a++){const e=l[a],n=new FileReader;n.onload=l=>{Xe.value.push({name:e.name,url:l.target.result}),De.value.push(e)},n.readAsDataURL(e)}$("#listingMedia").val("")}function Qe(){Se.value=null,Ke.value=null}function je(e){Xe.value.splice(e,1),De.value.splice(e,1)}function Ge(){return Ue.value.mode&&Ue.value.mode.length?Ue.value.amount&&Ue.value.amount.toString().length?isNaN(Ue.value.amount)?p.nk.warning("Please enter a valid amount"):null!=Ue.value.reference&&Ue.value.reference.length&&ze.value.find((e=>null!=e.reference&&e.reference.toString().toLowerCase()==Ue.value.reference.toString().toLowerCase()))?p.nk.warning("Reference code has already been used"):(ze.value.push(JSON.parse(JSON.stringify(Ue.value))),Ue.value={mode:null,amount:null,reference:null},void(Ye.value=!1)):p.nk.warning("Please enter the payment amount"):p.nk.warning("Please select a payment mode")}function qe(){if(!fe.value.title||!fe.value.title.length)return p.nk.warning("Please enter title");if(!fe.value.placement||!fe.value.placement.length)return p.nk.warning("Please select listing placement");if(!fe.value.company_id||!fe.value.company_id.toString().length)return p.nk.warning("Please select the company");if(!fe.value.category_id||!fe.value.category_id.toString().length)return p.nk.warning("Please select the category");if(!Ke.value)return p.nk.warning("Please upload the primary media");if(!De.value.length)return p.nk.warning("Please upload some images for this listing");let e=Pe.getSemanticHTML();if(!e||!e.toString().length||"<p></p>"==e)return p.nk.warning("Please enter the listing description");if(!fe.value.start_at||!fe.value.start_at.length)return p.nk.warning("Please select start date");if(!fe.value.end_at||!fe.value.end_at.length)return p.nk.warning("Please select end date");fe.value.description=e;let a=new FormData;Object.keys(fe.value).forEach((e=>{let l=fe.value[e];a.append(e,l)}));for(let l=0;l<De.value.length;l++)a.append(`media[${l}]`,De.value[l]);if(a.append("primary_media",Ke.value),ze.value.length)for(let l=0;l<ze.value.length;l++)a.append(`payments[${l}][amount]`,ze.value[l].amount),a.append(`payments[${l}][mode]`,ze.value[l].mode),a.append(`payments[${l}][reference]`,ze.value[l].reference||(0,c.A)(ze.value[l].mode));ne.value=!0,f.A.post(k.pe.EXPLORE_HUB_ADD_LISTING,a).then((e=>{$.growl.notice({message:e.data.message}),l.commit("exploreHub/STORE_ACTIVE_LISTINGS",[]),l.commit("exploreHub/STORE_ACTIVE_LISTINGS_FILTERS",{}),ne.value=!1,G.back()})).catch((e=>ne.value=!1))}return(0,n.sV)((()=>{Te.value.length||(0,o.k1)(),Oe.value.length||(0,o.HC)(),Ne(),Pe=new Quill("#descriptionEditor",{theme:"snow",placeholder:"Enter listing body here"})})),(e,l)=>{const a=(0,n.g2)("el-input"),r=(0,n.g2)("el-tag"),v=(0,n.g2)("el-option"),p=(0,n.g2)("el-select"),f=(0,n.g2)("el-date-picker"),k=(0,n.g2)("el-button"),g=(0,n.g2)("el-dialog"),$=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",L,[(0,n.Lk)("div",y,[h,(0,n.bF)(s.A)]),(0,n.Lk)("div",_,[(0,n.Lk)("div",b,[(0,n.Lk)("div",w,[(0,n.bF)(d.A,null,{default:(0,n.k6)((()=>[(0,n.eW)("Title")])),_:1}),(0,n.bF)(a,{placeholder:"Enter listing title here",size:"large",modelValue:fe.value.title,"onUpdate:modelValue":l[0]||(l[0]=e=>fe.value.title=e)},null,8,["modelValue"])]),(0,n.Lk)("div",C,[(0,n.bF)(d.A,null,{default:(0,n.k6)((()=>[(0,n.eW)("Description")])),_:1}),x]),(0,n.Lk)("div",F,[(0,n.Lk)("div",R,[(0,n.bF)(d.A,null,{default:(0,n.k6)((()=>[(0,n.eW)("Placement")])),_:1}),(0,n.bF)(p,{placeholder:"Select Placement",size:"large",modelValue:fe.value.placement,"onUpdate:modelValue":l[1]||(l[1]=e=>fe.value.placement=e)},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Fe.value,(e=>((0,n.uX)(),(0,n.Wv)(v,{key:"create-listing-placement-"+e,label:(0,t.R1)(c.A)(e),value:e},{default:(0,n.k6)((()=>["for_you"==e?((0,n.uX)(),(0,n.Wv)(r,{key:0,type:"success",effect:"light",round:"",size:"small"},{default:(0,n.k6)((()=>[(0,n.eW)((0,u.v_)((0,t.R1)(c.A)(e)),1)])),_:2},1024)):(0,n.Q3)("",!0),"featured"==e?((0,n.uX)(),(0,n.Wv)(r,{key:1,type:"primary",effect:"light",round:"",size:"small"},{default:(0,n.k6)((()=>[(0,n.eW)((0,u.v_)((0,t.R1)(c.A)(e)),1)])),_:2},1024)):(0,n.Q3)("",!0),"exclusive"==e?((0,n.uX)(),(0,n.Wv)(r,{key:2,type:"warning",effect:"light",round:"",size:"small"},{default:(0,n.k6)((()=>[(0,n.eW)((0,u.v_)((0,t.R1)(c.A)(e)),1)])),_:2},1024)):(0,n.Q3)("",!0)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),(0,n.Lk)("div",W,[(0,n.Lk)("div",A,[(0,n.bF)(d.A,null,{default:(0,n.k6)((()=>[(0,n.eW)("Company")])),_:1}),(0,n.bF)(p,{modelValue:fe.value.company_id,"onUpdate:modelValue":l[2]||(l[2]=e=>fe.value.company_id=e),placeholder:"Select Company",size:"large",filterable:""},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,t.R1)(Te),(e=>((0,n.uX)(),(0,n.Wv)(v,{key:"create-listing-company-"+e.id,label:e.name,value:e.id},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{src:e.logo,style:{"max-width":"30px","max-height":"20px","border-radius":"10px"}},null,8,E),(0,n.eW)("  "+(0,u.v_)(e.name),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),(0,n.Lk)("div",V,[(0,n.Lk)("div",M,[(0,n.bF)(d.A,null,{default:(0,n.k6)((()=>[(0,n.eW)("Category")])),_:1}),(0,n.bF)(p,{modelValue:fe.value.category_id,"onUpdate:modelValue":l[3]||(l[3]=e=>fe.value.category_id=e),placeholder:"Select Category",size:"large",filterable:""},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,t.R1)(Oe),(e=>((0,n.uX)(),(0,n.Wv)(v,{key:"create-listing-category-"+e.name,label:e.name,value:e.id},{default:(0,n.k6)((()=>[(0,n.Lk)("div",P,[(0,n.Lk)("span",S,(0,u.v_)(e.icon),1),(0,n.eW)("   "),(0,n.Lk)("span",null,(0,u.v_)(e.name),1)])])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])])]),(0,n.Lk)("div",K,[(0,n.Lk)("div",X,[(0,n.Lk)("div",D,[(0,n.bF)(d.A,null,{default:(0,n.k6)((()=>[(0,n.eW)("Runs from")])),_:1}),(0,n.bF)(f,{modelValue:fe.value.start_at,"onUpdate:modelValue":l[4]||(l[4]=e=>fe.value.start_at=e),type:"date","value-format":"YYYY-MM-DD",format:"MMM D, YYYY",placeholder:"Start Date",size:"large"},null,8,["modelValue"])])]),(0,n.Lk)("div",Y,[(0,n.Lk)("div",I,[(0,n.bF)(d.A,null,{default:(0,n.k6)((()=>[(0,n.eW)("To")])),_:1}),(0,n.bF)(f,{modelValue:fe.value.end_at,"onUpdate:modelValue":l[5]||(l[5]=e=>fe.value.end_at=e),type:"date","value-format":"YYYY-MM-DD",format:"MMM D, YYYY",placeholder:"End Date",size:"large"},null,8,["modelValue"])])]),(0,n.Lk)("div",U,[(0,n.Lk)("div",z,[(0,n.bF)(d.A,null,{default:(0,n.k6)((()=>[(0,n.eW)("Media")])),_:1}),(0,n.Lk)("div",T,[O,N,(0,n.Lk)("input",{type:"file",class:"form-control",id:"primaryListingMedia",onChange:$e},null,32),null!=Se.value?((0,n.uX)(),(0,n.CE)("div",H,[(0,n.Lk)("div",Q,[(0,n.Lk)("img",{src:Se.value,style:{"max-width":"80px","max-height":"60px"}},null,8,j),(0,n.Lk)("div",{class:"remover",onClick:Qe},q)])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",J,[B,Z,(0,n.Lk)("input",{type:"file",multiple:"",class:"form-control",id:"listingMedia",onChange:He},null,32),(0,n.Lk)("div",ee,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Xe.value,((e,l)=>((0,n.uX)(),(0,n.CE)("div",{class:"p-1 uploaded-image",key:"uploaded-media-"+l},[(0,n.Lk)("img",{src:e.url,style:{"max-width":"80px","max-height":"60px"}},null,8,le),(0,n.Lk)("div",{class:"remover",onClick:e=>je(l)},te,8,ae)])))),128))])])])]),(0,n.Lk)("div",ue,[(0,n.Lk)("div",ie,[(0,n.bF)(d.A,null,{default:(0,n.k6)((()=>[(0,n.eW)("Payments")])),_:1}),(0,n.Lk)("div",se,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ze.value,((e,l)=>((0,n.uX)(),(0,n.CE)("div",{class:"p-1 added-payment",key:"added-payment-"+l},[(0,n.Lk)("div",re,[(0,n.Lk)("small",null,[oe,(0,n.eW)(": "+(0,u.v_)((0,t.R1)(o.RL)(e.amount))+" ",1),de,ce,(0,n.eW)(": "+(0,u.v_)((0,t.R1)(c.A)(e.mode))+" ",1),e.reference?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[me,ve,(0,n.eW)(": "+(0,u.v_)(e.reference),1)],64)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",{class:"remover",onClick:e=>ze.value.splice(l,1)},ke,8,pe)])))),128)),(0,n.eW)("    "),(0,n.bF)(k,{onClick:l[6]||(l[6]=e=>Ye.value=!Ye.value),icon:(0,t.R1)(m.FWt),round:""},{default:(0,n.k6)((()=>[(0,n.eW)(" Add payment ")])),_:1},8,["icon"])])])])])]),ge,(0,n.Lk)("div",Le,[(0,n.bF)(k,{size:"large",type:"primary",onClick:qe},{default:(0,n.k6)((()=>[(0,n.eW)("Create Listing")])),_:1}),(0,n.bF)(k,{size:"large",type:"info",onClick:l[7]||(l[7]=e=>(0,t.R1)(G).back())},{default:(0,n.k6)((()=>[(0,n.eW)("Cancel")])),_:1})])])),[[$,ne.value]]),(0,n.bF)(g,{"custom-class":"el-dialog-width",width:"45%",fullscreen:(0,t.R1)(o.Qv),modelValue:Ye.value,"onUpdate:modelValue":l[10]||(l[10]=e=>Ye.value=e)},{default:(0,n.k6)((()=>[(0,n.Lk)("div",ye,[(0,n.bF)(d.A,null,{default:(0,n.k6)((()=>[(0,n.eW)("Select Payment Mode")])),_:1}),(0,n.Lk)("div",he,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Ie.value,(e=>((0,n.uX)(),(0,n.CE)("div",{class:(0,u.C4)(["p-1 payment-mode hov-pointer",{selected:e.name==Ue.value.mode}]),key:"all-payment-modes-"+e.name,onClick:l=>Ue.value.mode=e.name},[(0,n.Lk)("div",be,[(0,n.Lk)("img",{src:e.image,style:{"max-width":"40px","max-height":"20px"}},null,8,we),(0,n.eW)("    "),(0,n.Lk)("h6",Ce,(0,u.v_)((0,t.R1)(c.A)(e.name)),1)]),(0,n.bo)((0,n.Lk)("div",xe,Re,512),[[i.aG,Ue.value.mode==e.name]])],10,_e)))),128))])]),(0,n.Lk)("div",We,[(0,n.Lk)("div",Ae,[(0,n.bF)(d.A,null,{default:(0,n.k6)((()=>[(0,n.eW)("Payment Amount")])),_:1}),(0,n.bF)(a,{placeholder:"Enter payment amount",modelValue:Ue.value.amount,"onUpdate:modelValue":l[8]||(l[8]=e=>Ue.value.amount=e)},null,8,["modelValue"])]),(0,n.Lk)("div",Ee,[(0,n.bF)(d.A,null,{default:(0,n.k6)((()=>[(0,n.eW)("Transaction Reference")])),_:1}),(0,n.bF)(a,{placeholder:"Enter reference code",modelValue:Ue.value.reference,"onUpdate:modelValue":l[9]||(l[9]=e=>Ue.value.reference=e)},null,8,["modelValue"])])]),Ve,(0,n.Lk)("div",Me,[(0,n.bF)(k,{type:"primary",onClick:Ge},{default:(0,n.k6)((()=>[(0,n.eW)("Add Payment")])),_:1})])])),_:1},8,["fullscreen","modelValue"])],64)}}};const Se=Pe;var Ke=Se},1707:function(e,l,a){var n={"./bank_transfer.webp":1880,"./card.png":2785,"./cash.png":6450,"./cheque.png":4354,"./mpesa.png":9459};function t(e){var l=u(e);return a(l)}function u(e){if(!a.o(n,e)){var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}return n[e]}t.keys=function(){return Object.keys(n)},t.resolve=u,e.exports=t,t.id=1707},1880:function(e,l,a){"use strict";e.exports=a.p+"img/bank_transfer.webp"},2785:function(e,l,a){"use strict";e.exports=a.p+"img/card.png"},6450:function(e,l,a){"use strict";e.exports=a.p+"img/cash.png"},4354:function(e,l,a){"use strict";e.exports=a.p+"img/cheque.png"},9459:function(e,l,a){"use strict";e.exports=a.p+"img/mpesa.png"}}]);
//# sourceMappingURL=98.js.map